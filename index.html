
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>晓明童鞋的窝</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="晓明童鞋">
    

    
    <meta name="description" content="Let&apos;s make things better and better.">
<meta property="og:type" content="website">
<meta property="og:title" content="晓明童鞋的窝">
<meta property="og:url" content="https://samingzhong.github.io/index.html">
<meta property="og:site_name" content="晓明童鞋的窝">
<meta property="og:description" content="Let&apos;s make things better and better.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="晓明童鞋的窝">
<meta name="twitter:description" content="Let&apos;s make things better and better.">

    
    <link rel="alternative" href="/atom.xml" title="晓明童鞋的窝" type="application/atom+xml">
    
    
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="晓明童鞋的窝">晓明童鞋的窝</a></h1>
				<h2 class="blog-motto">勿忘初心，方得始终。</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:samingzhong.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/15/经验记录/软件开发:设计笔记/" title="并发编程" itemprop="url">并发编程</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2017-11-15T08:17:15.000Z" itemprop="datePublished"> 发表于 2017-11-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="1&#x529F;&#x80FD;&#x72EC;&#x7ACB;&#x4E0D;&#x8FC7;&#x5EA6;&#x8BBE;&#x8BA1;"><a href="#1-&#x529F;&#x80FD;&#x72EC;&#x7ACB;&#xFF0C;&#x4E0D;&#x8FC7;&#x5EA6;&#x8BBE;&#x8BA1;&#x3002;" class="headerlink" title="1.&#x529F;&#x80FD;&#x72EC;&#x7ACB;&#xFF0C;&#x4E0D;&#x8FC7;&#x5EA6;&#x8BBE;&#x8BA1;&#x3002;"></a>1.&#x529F;&#x80FD;&#x72EC;&#x7ACB;&#xFF0C;&#x4E0D;&#x8FC7;&#x5EA6;&#x8BBE;&#x8BA1;&#x3002;</h2><p>&#x5BF9;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5EFA;&#x6A21;&#xFF0C;&#x529F;&#x80FD;&#x5355;&#x72EC;&#x3001;&#x907F;&#x5F00;&#x8026;&#x5408;&#x8BBE;&#x8BA1;&#x3002;</p>
<h2 id="2&#x601D;&#x8003;&#x95EE;&#x9898;&#x4ECE;&#x73B0;&#x8C61;&#x5230;&#x672C;&#x8D28;"><a href="#2-&#x601D;&#x8003;&#x95EE;&#x9898;&#xFF1A;&#x4ECE;&#x73B0;&#x8C61;&#x5230;&#x672C;&#x8D28;&#x3002;" class="headerlink" title="2.&#x601D;&#x8003;&#x95EE;&#x9898;&#xFF1A;&#x4ECE;&#x73B0;&#x8C61;&#x5230;&#x672C;&#x8D28;&#x3002;"></a>2.&#x601D;&#x8003;&#x95EE;&#x9898;&#xFF1A;&#x4ECE;&#x73B0;&#x8C61;&#x5230;&#x672C;&#x8D28;&#x3002;</h2><p>&#x4EA7;&#x54C1;&#x3001;&#x6280;&#x672F;&#x5C42;&#x9762;&#x4E0A;&#x505A;&#x53EF;&#x884C;&#x6027;&#x5206;&#x6790;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/并发编程/">并发编程</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/15/经验记录/并发编程/" title="并发编程" itemprop="url">并发编程</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2017-11-15T08:17:15.000Z" itemprop="datePublished"> 发表于 2017-11-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>[TOC]</p>
<h1 id="&#x5E76;&#x53D1;&#x7F16;&#x7A0B;"><a href="#&#x5E76;&#x53D1;&#x7F16;&#x7A0B;" class="headerlink" title="&#x5E76;&#x53D1;&#x7F16;&#x7A0B;"></a>&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</h1><p>&#x4ECE;&#x5B9E;&#x8DF5;&#x89D2;&#x5EA6;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x4F1A;&#x5E38;&#x78B0;&#x5230;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;</p>
<ul>
<li>&#x6709;&#x4E9B;&#x6D89;&#x53CA;&#x5230;&#x6BD4;&#x8F83;&#x8D39;&#x65F6;&#x7684;&#x8BA1;&#x7B97;&#x6D3B;&#x513F;&#xFF0C;&#x60F3;&#x65B0;&#x8D77;&#x4E00;&#x6761;&#x7EBF;&#x7A0B;&#x6765;&#x6267;&#x884C;&#xFF0C;&#x7ED3;&#x679C;&#x901A;&#x77E5;&#x5230;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;</li>
</ul>
<h2 id="&#x4ECB;&#x7ECD;"><a href="#&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4ECB;&#x7ECD;"></a>&#x4ECB;&#x7ECD;</h2><h2 id="&#x5217;&#x4E3E;&#x4E00;&#x4E9B;&#x8BED;&#x8A00;&#x7684;&#x5E76;&#x53D1;&#x7F16;&#x7A0B;"><a href="#&#x5217;&#x4E3E;&#x4E00;&#x4E9B;&#x8BED;&#x8A00;&#x7684;&#x5E76;&#x53D1;&#x7F16;&#x7A0B;" class="headerlink" title="&#x5217;&#x4E3E;&#x4E00;&#x4E9B;&#x8BED;&#x8A00;&#x7684;&#x5E76;&#x53D1;&#x7F16;&#x7A0B;"></a>&#x5217;&#x4E3E;&#x4E00;&#x4E9B;&#x8BED;&#x8A00;&#x7684;&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</h2><p>C</p>
<p>C&#x8BED;&#x8A00;&#x4E0B;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x3001;&#x591A;&#x8FDB;&#x7A0B;&#x6280;&#x672F;&#x662F;&#x8FDB;&#x884C;&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x5173;&#x952E;&#x6280;&#x672F;&#x3002;</p>
<p>&#x591A;&#x7EBF;&#x7A0B;</p>
<p>&#x5229;&#x7528;pthread&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;&#x4EE5;&#x53CA;&#x5176;&#x5B83;&#x63A7;&#x5236;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x7EBF;&#x7A0B;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x6BD4;&#x8F83;&#x5355;&#x4E00;&#xFF0C;&#x521B;&#x5EFA;&#x5E76;&#x4E14;&#x7ED1;&#x5B9A;&#x597D;&#x6307;&#x5B9A;&#x7684;&#x4EFB;&#x52A1;&#xFF08;&#x51FD;&#x6570;&#xFF09;&#xFF0C;&#x5F00;&#x59CB;&#x6267;&#x884C;&#xFF0C;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x7B49;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x5C40;&#x9650;&#x70B9;&#x5728;&#x4E8E;&#xFF1A;&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#x7684;&#x8D44;&#x6E90;&#x6709;&#x9650;&#x3002;</p>
<p>&#x96BE;&#x70B9;&#x5728;&#x4E8E;&#xFF1A;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x7BA1;&#x7406;&#x590D;&#x6742;&#xFF0C;&#x5BB9;&#x6613;&#x8131;&#x79BB;&#x63A7;&#x5236;&#xFF08;&#x5E76;&#x53D1;&#x521B;&#x5EFA;&#x5927;&#x91CF;&#x7684;&#x5B50;&#x7EBF;&#x7A0B;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x8BA9;CPU&#x8D85;&#x8D1F;&#x8377;&#xFF09;&#x3002;</p>
<p>&#x591A;&#x8FDB;&#x7A0B;</p>
<p>C++</p>
<p>Java</p>
<p>OC</p>
<p>Go</p>
<p>Python</p>
<h2 id="&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x51E0;&#x4E2A;&#x6CE8;&#x610F;&#x4E8B;&#x9879;"><a href="#&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x51E0;&#x4E2A;&#x6CE8;&#x610F;&#x4E8B;&#x9879;" class="headerlink" title="&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x51E0;&#x4E2A;&#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x51E0;&#x4E2A;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h2><p>&#x591A;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x65F6;&#x5E8F;&#x9519;&#x4E71;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/并发编程/">并发编程</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/02/iOS App瘦身/" title="iOS App瘦身" itemprop="url">iOS App瘦身</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2017-11-02T08:17:15.000Z" itemprop="datePublished"> 发表于 2017-11-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<!-- tocstop -->

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/能工巧匠集/">能工巧匠集</a>►<a class="article-category-link" href="/categories/能工巧匠集/iOS开发/">iOS开发</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/02/UIKit/iOS视图渲染/" title="iOS视图渲染" itemprop="url">iOS视图渲染</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2017-11-02T08:17:15.000Z" itemprop="datePublished"> 发表于 2017-11-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<!-- tocstop -->

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/能工巧匠集/">能工巧匠集</a>►<a class="article-category-link" href="/categories/能工巧匠集/iOS开发/">iOS开发</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/12/14/如何不升级Xcode支持真机测试/" title="如何不升级Xcode支持对最新iOS的真机测试" itemprop="url">如何不升级Xcode支持对最新iOS的真机测试</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2016-12-14T09:20:15.000Z" itemprop="datePublished"> 发表于 2016-12-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<ul>
<li><a href="#&#x4E0D;&#x5347;&#x7EA7;xcode&#x652F;&#x6301;&#x5BF9;&#x6700;&#x65B0;ios&#x7684;&#x771F;&#x673A;&#x6D4B;&#x8BD5;">&#x4E0D;&#x5347;&#x7EA7;Xcode&#x652F;&#x6301;&#x5BF9;&#x6700;&#x65B0;iOS&#x7684;&#x771F;&#x673A;&#x6D4B;&#x8BD5;</a></li>
<li><a href="#&#x5BF9;&#x88C5;&#x6709;&#x8F83;&#x4F4E;&#x7248;&#x672C;ios&#x7684;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;">&#x5BF9;&#x88C5;&#x6709;&#x8F83;&#x4F4E;&#x7248;&#x672C;iOS&#x7684;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;</a></li>
</ul>
<!-- tocstop -->
<h2 id="&#x4E0D;&#x5347;&#x7EA7;xcode&#x652F;&#x6301;&#x5BF9;&#x6700;&#x65B0;ios&#x7684;&#x771F;&#x673A;&#x6D4B;&#x8BD5;"><a href="#&#x4E0D;&#x5347;&#x7EA7;Xcode&#x652F;&#x6301;&#x5BF9;&#x6700;&#x65B0;iOS&#x7684;&#x771F;&#x673A;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x4E0D;&#x5347;&#x7EA7;Xcode&#x652F;&#x6301;&#x5BF9;&#x6700;&#x65B0;iOS&#x7684;&#x771F;&#x673A;&#x6D4B;&#x8BD5;"></a>&#x4E0D;&#x5347;&#x7EA7;Xcode&#x652F;&#x6301;&#x5BF9;&#x6700;&#x65B0;iOS&#x7684;&#x771F;&#x673A;&#x6D4B;&#x8BD5;</h2><p>&#x8BA4;&#x771F;&#x770B;&#x8FC7;Xcode&#x5E94;&#x7528;(Xcode.app/Contents&#x91CC;&#x8FB9;&#x7684;&#x4E1C;&#x897F;)&#x7684;&#x7AE5;&#x978B;&#x90FD;&#x5E94;&#x8BE5;&#x77E5;&#x9053;&#xFF0C;&#x5728;&#x76EE;&#x5F55; <code>/Applications/Xcode.app/Contents/Developer/Platforms/</code> &#x4E0B;&#x6709;&#x8BB8;&#x591A;&#x5E73;&#x53F0;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<img src="/assert/images/2016/Xcode_Platfroms_Dir.png" alt="Xcode_Platfroms_Dir"></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5F53;&#x524D;Xcode&#x652F;&#x6301;&#x771F;&#x673A;&#x6D4B;&#x8BD5;&#x7684;iOS&#x7248;&#x672C;&#xFF1A;<img src="/assert/images/2016/ios_device_support.png" alt="ios_device_support"></p>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;iOS&#x53D1;&#x5E03;&#x65B0;&#x7684;&#x4E8C;&#x7EA7;&#x7248;&#x672C;&#x65F6;&#xFF08;&#x6BD4;&#x5982;&#x8BF4;&#x4ECE;&#x73B0;&#x6709;&#x7684;iOS10.1.1&#x5230;iOS10.2&#xFF0C;iOS10.1.1&#x4E3A;&#x4E09;&#x7EA7;&#x7248;&#x672C;&#xFF0C;iOS10.2&#x4E3A;&#x4E8C;&#x7EA7;&#x7248;&#x672C;&#xFF09; &#xFF0C;&#x82F9;&#x679C;&#x4F1A;&#x8DDF;&#x7740;&#x53D1;&#x5E03;&#x65B0;&#x7684;Xcode&#x6765;&#x652F;&#x6301;&#x5BF9;iOS10.2&#x7279;&#x6027;&#x7684;&#x8C03;&#x8BD5;&#xFF0C;&#x6700;&#x76F4;&#x63A5;&#x4F53;&#x73B0;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;&#xFF0C;&#x65B0;&#x7684;Xcode&#x4E0A;&#x8FF0;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x91CC;&#x4F1A;&#x591A;&#x4E86;iOS10.2&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x91CC;&#x8FB9;&#x662F;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#xFF1A;<img src="/assert/images/2016/iOS10.2_diskImage.png" alt="iOS10.2_diskImage"></p>
<p>&#x6709;&#x4E86;&#x5B83;&#xFF0C;Xcode&#x5C31;&#x80FD;&#x5BF9;&#x88C5;&#x6709;iOS10.2&#x7684;iPhone&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;&#x3002;Xcode&#x5C06;&#x4F1A;&#x628A;&#x4F60;&#x63A5;&#x8FDB;&#x53BB;&#x7684;iPhone&#x91CC;&#x7684;OS symbol<img src="/assert/images/2016/device_support.png" alt="device_support"></p>
<p>&#x8FD9;&#x91CC;&#x54EA;&#x6015;&#x662F;&#x4E09;&#x7EA7;&#x7248;&#x672C;&#x90FD;&#x4F1A;&#x6709;&#xFF0C;&#x90A3;&#x662F;&#x56E0;&#x4E3A;&#xFF0C;&#x8FD9;&#x4EFD;&#x6587;&#x4EF6;&#x662F;&#x4ECE;iPhone&#x91CC;&#x62F7;&#x8D1D;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x751A;&#x81F3;&#x6709;&#x65F6;&#x5019;&#x540C;&#x4E00;&#x4E2A;&#x4E8C;&#x7EA7;&#xFF08;&#x6216;&#x4E09;&#x7EA7;&#xFF09;&#x7248;&#x672C;&#xFF0C;&#x8FD8;&#x4F1A;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x7F16;&#x8BD1;&#x7248;&#x672C;&#xFF08;&#x62EC;&#x53F7;&#x91CC;&#x7684;&#x5C31;&#x662F;&#x7F16;&#x8BD1;&#x7248;&#x672C;&#x53F7;&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x91CC;&#x8FB9;&#x662F;&#x5168;&#x662F;&#x8BE5;&#x7248;&#x672C;iOS&#x7684;&#x6240;&#x6709;&#x7CFB;&#x7EDF;&#x4FE1;&#x606F;&#xFF1A;</p>
<p><img src="/assert/images/2016/ios10.2_symbol.png" alt="ios10.2_symbol"></p>
<p>&#x6211;&#x4EEC;&#x5E38;&#x6253;&#x4EA4;&#x9053;&#x7684;UIKit&#x5C31;&#x5728;&#x91CC;&#x8FB9;&#x7684;Library&#x91CC;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x88C5;&#x6709;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x771F;&#x673A;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;&#x65F6;&#xFF0C;Xcode&#x4F1A;&#x94FE;&#x63A5;&#x5230;&#x8FD9;&#x91CC;&#x8FB9;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x4F9B;&#x6211;&#x4EEC;&#x8C03;&#x8BD5;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x6BCF;&#x6B21;iOS&#x66F4;&#x65B0;&#x90FD;&#x8981;&#x53BB;&#x4E0B;&#x8F7D;&#x65B0;&#x7684;Xcode&#x5F88;&#x9EBB;&#x70E6;&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x7701;&#x4E8B;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#xFF0C;&#x5F04;&#x5230;DiskImage&#x76F8;&#x5173;&#x6570;&#x636E;&#xFF0C;&#x7C98;&#x8D34;&#x8FDB;&#x53BB;&#x76EE;&#x5F55;&#xFF1A;</p>
<blockquote>
<p>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/</p>
</blockquote>
<p>&#x4F46;&#x662F;&#xFF0C;&#x6211;&#x4E0D;&#x5EFA;&#x8BAE;&#x8FD9;&#x4E48;&#x5E72;&#xFF0C;&#x867D;&#x7136;&#x8FD9;&#x6837;&#x80FD;&#x591F;&#x8BA9;Xcode&#x652F;&#x6301;&#x4E86;&#x88C5;&#x6709;&#x65B0;iOS&#x7684;iPhone&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x65B0;&#x7684;Xcode&#x7684;&#x53D1;&#x5E03;&#xFF0C;&#x5F80;&#x5F80;&#x6D89;&#x53CA;&#x5230;&#x591A;&#x9879;&#x7684;&#x66F4;&#x6539;&#xFF0C;&#x6BD4;&#x5982;Xcode&#x529F;&#x80FD;&#x7279;&#x6027;&#x3001;&#x66F4;&#x65B0;&#x6700;&#x65B0;&#x7684;&#x6A21;&#x62DF;&#x5668;&#x7248;&#x672C;&#x3001;&#x66F4;&#x65B0;&#x3001;&#x4F18;&#x5316;&#x4E00;&#x4E9B;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x7B49;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6B64;&#x6CD5;&#x4EC5;&#x9002;&#x5408;&#x5728;Xcode&#x53D8;&#x66F4;&#x4E0D;&#x5927;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x52C9;&#x5F3A;&#x5E94;&#x6025;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x8FC7;&#x5EA6;&#x4F9D;&#x8D56;&#x3002;</p>
<h2 id="&#x5BF9;&#x88C5;&#x6709;&#x8F83;&#x4F4E;&#x7248;&#x672C;ios&#x7684;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;"><a href="#&#x5BF9;&#x88C5;&#x6709;&#x8F83;&#x4F4E;&#x7248;&#x672C;iOS&#x7684;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;" class="headerlink" title="&#x5BF9;&#x88C5;&#x6709;&#x8F83;&#x4F4E;&#x7248;&#x672C;iOS&#x7684;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;"></a>&#x5BF9;&#x88C5;&#x6709;&#x8F83;&#x4F4E;&#x7248;&#x672C;iOS&#x7684;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x771F;&#x673A;&#x8C03;&#x8BD5;</h2><p>Xcode8&#x53D1;&#x5E03;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x9ED8;&#x8BA4;&#x4E0D;&#x652F;&#x6301;&#x5BF9;iOS6&#x3001;iOS7&#x8FD9;&#x4E9B;&#x8F83;&#x4F4E;&#x7248;&#x672C;iOS&#x7684;&#x771F;&#x673A;&#x8C03;&#x8BD5;&#x4E86;&#x3002;</p>
<p>&#x8DDF;&#x4E0A;&#x9762;&#x540C;&#x6837;&#x7684;&#x9053;&#x7406;&#xFF0C;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7248;&#x672C;&#x7684;DiskImage&#x6587;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4; <a href="https://pan.baidu.com/s/1hrAksSk" target="_blank" rel="external">&#x8FD9;&#x4E2A;</a>&#x3002;&#x7C98;&#x8D34;&#x8FDB;&#x53BB;&#x6587;&#x4EF6;&#x5939;:</p>
<blockquote>
<p>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/</p>
</blockquote>
<p>&#x5373;&#x53EF;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/能工巧匠集/">能工巧匠集</a>►<a class="article-category-link" href="/categories/能工巧匠集/工欲善其事必先利其器/">工欲善其事必先利其器</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Xcode/">Xcode</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/12/09/关于二进制、库类型文件/" title="关于二进制、库类型文件架构相关信息" itemprop="url">关于二进制、库类型文件架构相关信息</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2016-12-09T03:17:15.000Z" itemprop="datePublished"> 发表于 2016-12-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<ul>
<li><a href="#1-&#x6587;&#x4EF6;&#x67B6;&#x6784;">1. &#x6587;&#x4EF6;&#x67B6;&#x6784;</a><ul>
<li><a href="#11-&#x4EC0;&#x4E48;&#x662F;&#x67B6;&#x6784;">1.1 &#x4EC0;&#x4E48;&#x662F;&#x67B6;&#x6784;?</a></li>
<li><a href="#12-&#x67E5;&#x770B;&#x67B6;&#x6784;&#x4FE1;&#x606F;">1.2 &#x67E5;&#x770B;&#x67B6;&#x6784;&#x4FE1;&#x606F;</a></li>
</ul>
</li>
<li><a href="#2-&#x6587;&#x4EF6;&#x662F;&#x5426;&#x88AB;&#x52A0;&#x5BC6;">2. &#x6587;&#x4EF6;&#x662F;&#x5426;&#x88AB;&#x52A0;&#x5BC6;</a></li>
</ul>
<!-- tocstop -->
<h2 id="1-&#x6587;&#x4EF6;&#x67B6;&#x6784;"><a href="#1-&#x6587;&#x4EF6;&#x67B6;&#x6784;" class="headerlink" title="1. &#x6587;&#x4EF6;&#x67B6;&#x6784;"></a>1. &#x6587;&#x4EF6;&#x67B6;&#x6784;</h2><p>&#x4E8C;&#x8FDB;&#x5236;&#x3001;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x67B6;&#x6784;&#x4FE1;&#x606F;&#x5176;&#x5B9E;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x77E5;&#x9053;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x7684;&#x6839;&#x6E90;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#x67D0;&#x4E9B;&#x7B2C;&#x4E09;&#x65B9;SDK&#x63D0;&#x4F9B;&#x51FA;&#x6765;&#xFF0C;&#x53EA;&#x652F;&#x6301;&#x771F;&#x673A;&#x8C03;&#x8BD5;&#xFF0C;&#x6A21;&#x62DF;&#x5668;&#x94FE;&#x63A5;&#x9636;&#x6BB5;&#x62A5;&#x9519;&#xFF0C;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x8BE5;&#x7B2C;&#x4E09;&#x65B9;SDK&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x6A21;&#x62DF;&#x5668;&#x94FE;&#x63A5;&#x4F7F;&#x7528;&#x7684; <code>x386</code> &#x6216;&#x8005; <code>x86_64</code> &#x67B6;&#x6784;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5E93;&#x3002;</p>
<h3 id="11-&#x4EC0;&#x4E48;&#x662F;&#x67B6;&#x6784;"><a href="#1-1-&#x4EC0;&#x4E48;&#x662F;&#x67B6;&#x6784;" class="headerlink" title="1.1 &#x4EC0;&#x4E48;&#x662F;&#x67B6;&#x6784;?"></a>1.1 &#x4EC0;&#x4E48;&#x662F;&#x67B6;&#x6784;?</h3><p>&#x9996;&#x5148;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x67B6;&#x6784;&#x6307;&#x7684;&#x662F;&#xFF0C;CPU&#x6307;&#x4EE4;&#x96C6;&#x67B6;&#x6784;&#xFF0C;<a href="https://zh.wikipedia.org/wiki/%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9E%B6%E6%A7%8B" target="_blank" rel="external">&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x662F;&#x8FD9;&#x4E48;&#x89E3;&#x91CA;&#x7684;</a>&#x3002;&#x5728;Apple&#x7684;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x91CC;&#xFF0C;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>&#x67B6;&#x6784;&#x540D;&#x79F0;</strong></td>
<td><strong>&#x5BF9;&#x5E94;&#x8BBE;&#x5907;</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><strong>iPhone</strong></td>
<td><strong>iPad </strong></td>
<td><strong>iPod touch</strong></td>
</tr>
<tr>
<td><strong>armv6</strong></td>
<td><strong>iPhone</strong>&#x3001;<strong>iPhone3G</strong></td>
<td></td>
<td><strong>&#x7B2C;&#x4E00;&#x4EE3;&#x3001;&#x4E8C;&#x4EE3;iPod touch</strong></td>
</tr>
<tr>
<td><strong>armv7</strong></td>
<td><strong>iPhone3GS&#x3001;iPhone4&#x3001;iPhone4S&#xFF1B;</strong></td>
<td><strong>iPad&#x3001;iPad2&#x3001;The New iPad&#xFF08;3rd&#xFF09;&#xFF0C;iPad mini&#xFF1B;</strong></td>
<td><strong>iPod touch3G&#x3001;iPod touch4</strong></td>
</tr>
<tr>
<td><strong>armv7s</strong></td>
<td><strong>iPhone5&#x3001;iPhone5C</strong></td>
<td><strong>iPad4&#xFF08;iPad with Retina Display&#xFF09;</strong></td>
<td></td>
</tr>
<tr>
<td><strong>arm64</strong></td>
<td><strong>iPhone5S&#x3001;iPhone6&#x3001;iPhone6s&#x3001;iPhone7</strong></td>
<td><strong>iPad Air&#x3001;iPad Air2&#xFF1B;iPad mini2</strong></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>&#x5728;iOS9&#x4E4B;&#x524D;&#xFF0C;&#x8BBE;&#x5907;&#x4ECE; App Store&#x4E0A;&#x4E0B;&#x8F7D;&#x5E94;&#x7528;&#xFF0C;&#x5305;&#x6587;&#x4EF6;&#xFF08;Bundle.app&#xFF09;&#x4E0B;&#x8F7D;&#x4E0B;&#x6765;&#xFF0C;&#x91CC;&#x8FB9;&#x7684;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x662F;&#x5305;&#x542B;&#x5927;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;2&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#xFF0C;&#x5BF9;iPhone&#x6765;&#x8BF4;&#xFF0C;&#x4E0D;&#x540C;&#x8BBE;&#x5907;&#x52A0;&#x8F7D;&#x7684;&#x6D41;&#x7A0B;&#x662F;&#xFF1A;</p>
<p>iPhone3GS&#x3001;iPhone4&#x8FD9;&#x7C7B; <code>armv7</code> &#x8BBE;&#x5907;&#xFF0C;&#x5C31;&#x4F1A;&#x52A0;&#x8F7D; <code>armv7</code> &#x90A3;&#x90E8;&#x5206;&#x7684;&#x6570;&#x636E;&#xFF0C;</p>
<p>&#x800C;iPhone5&#x8FD9;&#x7C7B; <code>armv7s</code> &#x67B6;&#x6784;&#x7684;&#x8BBE;&#x5907;&#x5219;&#x662F;&#xFF0C;&#x5982;&#x679C;bundle&#x91CC;&#x8FB9;&#x6709; <code>armv7s</code> &#x7684;&#x67B6;&#x6784;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;load&#x8FD9;&#x90E8;&#x5206;&#x6570;&#x636E;&#xFF0C;&#x5426;&#x5219;load <code>armv7</code> &#x7684;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x4E3A;&#x5904;&#x7406;&#x5668;&#x6307;&#x4EE4;&#x96C6;&#x67B6;&#x6784;&#x5411;&#x4E0B;&#x517C;&#x5BB9;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x53EF;&#x80FD;&#x4F1A;&#x4E22;&#x5931;&#x4E00;&#x4E9B;&#x6027;&#x80FD;&#x3002;</p>
<p><code>arm64</code> &#x67B6;&#x6784;&#x7684;&#x8BBE;&#x5907;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;5s&#x4EE5;&#x540E;&#x7684;&#x8BBE;&#x5907;&#xFF0C;&#x53EA;&#x52A0;&#x8F7D; <code>arm64</code> &#x67B6;&#x6784;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x9664;&#x975E;&#x4F60;&#x4E0A;&#x4F20;&#x5E94;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x538B;&#x6839;&#x5C31;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x67B6;&#x6784;&#x7684;&#x6570;&#x636E;&#xFF08;Apple&#x5DF2;&#x7ECF;&#x8981;&#x6C42;&#x5F00;&#x53D1;&#x8005;&#x4E0A;&#x4F20;&#x7684;&#x5E94;&#x7528;&#x5FC5;&#x987B;&#x5305;&#x542B; <code>arm64</code> &#x67B6;&#x6784;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x4F1A;&#x62D2;&#x7EDD;&#x4E0A;&#x67B6;&#xFF09;&#xFF0C;&#x539F;&#x56E0;&#x4F30;&#x8BA1;&#x662F;&#x6027;&#x80FD;&#x4E22;&#x5931;&#x7684;&#x95EE;&#x9898;&#x5427;&#xFF0C;&#x597D;&#x597D;&#x7684;64&#x4F4D;&#x67B6;&#x6784;&#x7684;CPU&#xFF0C;&#x8DD1;32&#x4F4D;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x7F6A;&#x8FC7;&#x3002;&#x800C;&#x975E; <code>arm64</code> &#x67B6;&#x6784;&#x7684; <code>armv7s</code> &#x5BF9;&#x4E8E; <code>armv7</code> &#x800C;&#x8A00;&#xFF0C;&#x4F30;&#x8BA1;&#x4E5F;&#x5C31;&#x662F;&#x5FAE;&#x5FAE;&#x7684;&#x4F18;&#x5316;&#x800C;&#x5DF2;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x5F88;&#x591A;&#x5927;&#x5382;&#x7684;app&#x5C31;&#x53EA;&#x662F;&#x5305;&#x542B;&#x4E86;<code>armv7</code>,<code>arm64</code> &#x4E24;&#x4E2A;&#x67B6;&#x6784;&#xFF0C;&#x4E3A;&#x7684;&#x5C31;&#x662F;&#xFF1A;</p>
<ol>
<li><p>iOS9&#x4EE5;&#x4E0B;&#x7684;&#x8BBE;&#x5907;&#xFF0C;&#x4E0B;&#x8F7D;&#x5E94;&#x7528;&#x7684;&#x5927;&#x5C0F;&#x4E0D;&#x4F1A;&#x592A;&#x5927;&#xFF08;&#x8BD5;&#x60F3;&#xFF0C;&#x5982;&#x679C;&#x518D;&#x5305;&#x542B;&#x4E00;&#x4E2A;armv7s&#x7684;&#x67B6;&#x6784;&#xFF0C;&#x90A3;&#x4E48;&#x5F97;&#x591A;&#x5927;&#xFF0C;&#x62FF;&#x5FAE;&#x4FE1;&#x6765;&#x8BF4;&#xFF0C;&#x8D77;&#x7801;&#x5F97;&#x5230;150M+&#xFF0C;&#x76EE;&#x524D;&#x4E24;&#x4E2A;&#x67B6;&#x6784;&#x7684;&#x5305;&#x662F;110M&#x5DE6;&#x53F3;&#xFF0C;&#x8FD8;&#x7B97;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#xFF09;&#x3002;&#x66F4;&#x4F55;&#x51B5;&#xFF0C;</p>
</li>
<li><p>iOS9&#x4EE5;&#x4E0A;&#x7684;&#x8BBE;&#x5907;&#xFF0C;Apple&#x5728;&#x4E24;&#x7AEF;&#xFF08;iOS&#x7AEF;&#xFF0C;App Store&#xFF09;&#x505A;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x4F46;&#x524D;&#x63D0;&#x662F;&#x5F00;&#x53D1;&#x8005;&#x9700;&#x8981;&#x5F00;&#x542F;&#x5BF9;<a href="http://www.cocoachina.com/ios/20150818/13078.html" target="_blank" rel="external">BitCode</a>&#x7684;&#x652F;&#x6301;&#x3002;&#x8FD9;&#x4E2A;&#x4F18;&#x5316;&#x53EF;&#x4EE5;&#x8BA9;&#x4F60;&#x7684;&#x8BBE;&#x5907;&#x4E0B;&#x8F7D;&#x4EC5;&#x5305;&#x542B;&#x8BBE;&#x5907;CPU&#x6307;&#x4EE4;&#x96C6;&#x67B6;&#x6784;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x8D77;&#x7801;&#x53EF;&#x4EE5;&#x8BA9;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x4F53;&#x79EF;&#x51CF;&#x534A;&#x3002;</p>
</li>
</ol>
<p>&#x7136;&#x800C;&#xFF0C;&#x5982;&#x679C;&#x5F00;&#x53D1;SDK&#x7684;&#x8BDD;&#xFF0C;&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x6A21;&#x62DF;&#x5668;&#x7B49;&#xFF0C;&#x5BF9;&#x5916;&#x53D1;&#x5E03;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5B9E;&#x8FD8;&#x662F;&#x5E94;&#x8BE5;&#x652F;&#x6301; <code>i386</code> &#x4EE5;&#x53CA;  <code>x86_64</code>&#x3002;</p>
<p>&#x5173;&#x4E8E;&#x9879;&#x76EE;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#xFF0C;&#x8BF7;&#x53C2;&#x8003;&#x4E00;&#x4E0B;&#x4EE5;&#x4E0B;&#x811A;&#x672C;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">set -e</div><div class="line"></div><div class="line"># Define product path</div><div class="line">BUILD_DIR=${SRCROOT}/build</div><div class="line">PRODUCTS_DIR=~/Desktop/STVideoSDK</div><div class="line"></div><div class="line"># Build device and simulator static libraries</div><div class="line">xcodebuild -target STVideoSDK -configuration Release -sdk iphonesimulator ARCHS=&apos;i386 x86_64&apos; clean build</div><div class="line">xcodebuild -target STVideoSDK -configuration Release -sdk iphoneos ARCHS=&apos;armv7 armv7s arm64&apos; clean build</div><div class="line">xcodebuild -target STVideoRes -configuration Release -sdk iphoneos clean build</div><div class="line"></div><div class="line"># Cleaning the oldest</div><div class="line">if [ -d &quot;${PRODUCTS_DIR}&quot; ]</div><div class="line">then</div><div class="line">rm -rf &quot;${PRODUCTS_DIR}&quot;</div><div class="line">fi</div><div class="line"></div><div class="line"># Create the product directory</div><div class="line">mkdir -p &quot;${PRODUCTS_DIR}&quot;</div><div class="line"></div><div class="line"># Create universal binary file using lipo</div><div class="line">lipo -create -output &quot;${PRODUCTS_DIR}/libSTVideoSDK.a&quot; &quot;${BUILD_DIR}/Release-iphoneos/libSTVideoSDK.a&quot; &quot;${BUILD_DIR}/Release-iphonesimulator/libSTVideoSDK.a&quot;</div><div class="line"></div><div class="line"># Last touch. copy the header files</div><div class="line"># Just for convenience</div><div class="line">cp -R &quot;${BUILD_DIR}/Release-iphoneos/include/STVideoSDK/&quot; &quot;${PRODUCTS_DIR}/&quot;</div><div class="line"></div><div class="line"># Copy the resources bundle to the product dir</div><div class="line">ditto &quot;${BUILD_DIR}/Release-iphoneos/STVideoSDK.bundle&quot; &quot;${PRODUCTS_DIR}/STVideoSDK.bundle&quot;</div><div class="line"></div><div class="line"># Cleaning build dir</div><div class="line">rm -r &quot;${BUILD_DIR}&quot;</div><div class="line"></div><div class="line">open &quot;${PRODUCTS_DIR}&quot;</div></pre></td></tr></table></figure>
<h3 id="12-&#x67E5;&#x770B;&#x67B6;&#x6784;&#x4FE1;&#x606F;"><a href="#1-2-&#x67E5;&#x770B;&#x67B6;&#x6784;&#x4FE1;&#x606F;" class="headerlink" title="1.2 &#x67E5;&#x770B;&#x67B6;&#x6784;&#x4FE1;&#x606F;"></a>1.2 &#x67E5;&#x770B;&#x67B6;&#x6784;&#x4FE1;&#x606F;</h3><p>&#x8981;&#x67E5;&#x770B;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x6216;&#x8005;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x652F;&#x6301;&#x7684;&#x67B6;&#x6784;&#x4FE1;&#x606F;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x4F7F;&#x7528; <code>file</code> &#x5DE5;&#x5177;&#xFF1A;</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">zhongsMBP:</span>~ samingzhong$ file <span class="regexp">/Users/</span>samingzhong<span class="regexp">/Library/</span>Developer<span class="regexp">/Xcode/</span>DerivedData<span class="regexp">/Demo-akusserrydvfiwbpctcabqcrugzd/</span>Build<span class="regexp">/Products/</span>Debug-iphoneos<span class="regexp">/Demo.app/</span>Demo </div><div class="line"><span class="regexp">/Users/</span>samingzhong<span class="regexp">/Library/</span>Developer<span class="regexp">/Xcode/</span>DerivedData<span class="regexp">/Demo-akusserrydvfiwbpctcabqcrugzd/</span>Build<span class="regexp">/Products/</span>Debug-iphoneos<span class="regexp">/Demo.app/</span><span class="string">Demo:</span> Mach-O universal binary with <span class="number">2</span> <span class="string">architectures:</span> [<span class="string">arm_v7:</span> Mach-O executable arm_v7] [<span class="string">arm64:</span> Mach-O <span class="number">64</span>-bit executable arm64]</div><div class="line"><span class="regexp">/Users/</span>samingzhong<span class="regexp">/Library/</span>Developer<span class="regexp">/Xcode/</span>DerivedData<span class="regexp">/Demo-akusserrydvfiwbpctcabqcrugzd/</span>Build<span class="regexp">/Products/</span>Debug-iphoneos<span class="regexp">/Demo.app/</span>Demo (<span class="keyword">for</span> architecture armv7):	Mach-O executable arm_v7</div><div class="line"><span class="regexp">/Users/</span>samingzhong<span class="regexp">/Library/</span>Developer<span class="regexp">/Xcode/</span>DerivedData<span class="regexp">/Demo-akusserrydvfiwbpctcabqcrugzd/</span>Build<span class="regexp">/Products/</span>Debug-iphoneos<span class="regexp">/Demo.app/</span>Demo (<span class="keyword">for</span> architecture arm64):	Mach-O <span class="number">64</span>-bit executable arm64</div></pre></td></tr></table></figure>
<p>&#x53BB;&#x9664;&#x6240;&#x6709;&#x8DEF;&#x5F84;&#x4FE1;&#x606F;&#x5C31;&#x662F;&#xFF1A;</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">zhongsMBP:~ samingzhong$ <span class="keyword">file</span> Demo </div><div class="line">Mach-O universal binary <span class="keyword">with</span> <span class="number">2</span> architectures: </div><div class="line">[arm_v7: Mach-O executable arm_v7] [arm64: Mach-O <span class="number">64</span>-<span class="built_in">bit</span> executable arm64]</div><div class="line">Demo (<span class="keyword">for</span> <span class="keyword">architecture</span> armv7):	Mach-O executable arm_v7</div><div class="line">Demo (<span class="keyword">for</span> <span class="keyword">architecture</span> arm64):	Mach-O <span class="number">64</span>-<span class="built_in">bit</span> executable arm64</div></pre></td></tr></table></figure>
<p>&#x53EF;&#x7B80;&#x5355;&#x7684;&#x5F97;&#x77E5;&#xFF0C;&#x6B64;&#x6587;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x5305;&#x542B;2&#x4E2A;&#x67B6;&#x6784;&#x7684;&#x901A;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x5206;&#x522B;&#x4E3A;armv7&#x3001;arm64&#x67B6;&#x6784;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x6216;&#x8005;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;lipo&#x5DE5;&#x5177;&#xFF1A;</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">zhongsMBP:</span>~ samingzhong$ lipo -info Demo </div><div class="line">Architectures <span class="keyword">in</span> the fat <span class="string">file:</span> Demo <span class="string">are:</span> armv7 arm64</div></pre></td></tr></table></figure>
<p>&#x5176;&#x5B83;&#x6709; <code>libtool</code>&#x3001;<code>otool</code> &#x4E5F;&#x662F;&#x8DDF;&#x4E8C;&#x8FDB;&#x5236;&#x3001;&#x5E93;&#x6587;&#x4EF6;&#xFF08;&#x6216;&#x76EE;&#x6807;&#x6587;&#x4EF6;&#xFF09;&#x76F8;&#x5173;&#xFF0C;&#x4F46;&#x662F;&#x4E3B;&#x8981;&#x4E0D;&#x662F;&#x4E3A;&#x4E86;&#x67E5;&#x770B;&#x67B6;&#x6784;&#x4FE1;&#x606F;&#xFF0C;&#x800C;&#x662F;&#x4E3A;&#x4E86;&#x5236;&#x4F5C;&#x5E93;&#x6587;&#x4EF6;&#xFF08;<code>libtool -static/dynamic &#x2026; -o xxx</code>), &#x4EE5;&#x53CA;&#x663E;&#x793A;&#x4E8C;&#x8FDB;&#x5236;&#x3001;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x5177;&#x4F53;&#x4FE1;&#x606F;&#xFF08;&#x6BD4;&#x5982;&#x8BF4;&#x6587;&#x4EF6;&#x5934;&#x4FE1;&#x606F;&#x3001;&#x52A0;&#x8F7D;&#x4FE1;&#x606F;&#x7B49;&#xFF09;</p>
<p>&#x5982;&#xFF0C;<strong>otool&#x67E5;&#x770B;&#x4E00;&#x4E2A;&#x53EF;&#x6267;&#x884C;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x7684;&#x52A0;&#x8F7D;&#x60C5;&#x51B5;</strong>&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div></pre></td><td class="code"><pre><div class="line">exec_file(architecture armv7):</div><div class="line">Mach header</div><div class="line">      magic cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags</div><div class="line"> <span class="number">0xfeedface</span>      <span class="number">12</span>          <span class="number">9</span>  <span class="number">0x00</span>           <span class="number">2</span>    <span class="number">21</span>       <span class="number">2148</span> <span class="number">0x00200085</span></div><div class="line">Load command <span class="number">0</span><span class="comment">// &#x7B2C;&#x4E00;&#x6761;load&#x6307;&#x4EE4; LC_SEGMENT&#xFF0C;&#x52A0;&#x8F7D;&#x6BB5;&#xFF1A;__PAGEZERO&#x7C7B;&#x578B;</span></div><div class="line">      cmd LC_SEGMENT</div><div class="line">  cmdsize <span class="number">56</span></div><div class="line">  segname __PAGEZERO</div><div class="line">   vmaddr <span class="number">0x00000000</span></div><div class="line">   vmsize <span class="number">0x00004000</span></div><div class="line">  fileoff <span class="number">0</span></div><div class="line"> filesize <span class="number">0</span></div><div class="line">  maxprot <span class="number">0x00000000</span></div><div class="line"> initprot <span class="number">0x00000000</span></div><div class="line">   nsects <span class="number">0</span></div><div class="line">    flags <span class="number">0x0</span></div><div class="line">Load command <span class="number">1</span> <span class="comment">// &#x7B2C;&#x4E8C;&#x6761;load&#x6307;&#x4EE4; LC_SEGMENT&#xFF0C;&#x52A0;&#x8F7D;&#x6BB5;&#xFF1A;__TEXT&#x7C7B;&#x578B;</span></div><div class="line">      cmd LC_SEGMENT</div><div class="line">  cmdsize <span class="number">532</span></div><div class="line">  segname __TEXT</div><div class="line">	...</div><div class="line">Section</div><div class="line">  sectname __text	<span class="comment">// &#x6B64;&#x4E3A;&#x4EE3;&#x7801;&#x6587;&#x672C;&#x533A;</span></div><div class="line">   segname __TEXT</div><div class="line">      addr <span class="number">0x0000a9e8</span></div><div class="line">      size <span class="number">0x0000027c</span></div><div class="line">    offset <span class="number">27112</span></div><div class="line">     align <span class="number">2</span>^<span class="number">1</span> (<span class="number">2</span>)</div><div class="line">    reloff <span class="number">0</span></div><div class="line">    nreloc <span class="number">0</span></div><div class="line">     flags <span class="number">0x80000400</span></div><div class="line"> reserved1 <span class="number">0</span></div><div class="line"> reserved2 <span class="number">0</span></div><div class="line">Section</div><div class="line">  sectname __picsymbolstub4 <span class="comment">// ...xxx&#x533A;</span></div><div class="line">   segname __TEXT</div><div class="line">   ...</div><div class="line">   </div><div class="line">  Load command <span class="number">2</span>	<span class="comment">// &#x7B2C;&#x4E09;&#x6761;&#x52A0;&#x8F7D;&#x6307;&#x4EE4;&#xFF0C;&#x8FD8;&#x662F; LC_SEGMENT&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x662F;__DATA&#x7C7B;&#x578B;</span></div><div class="line">     cmd LC_SEGMENT</div><div class="line">  cmdsize <span class="number">872</span></div><div class="line">  segname __DATA</div><div class="line">  ...</div><div class="line">Section</div><div class="line">  sectname __nl_symbol_ptr	<span class="comment">// 	nl&#x7B26;&#x53F7;&#x6307;&#x9488;&#x533A;</span></div><div class="line">   segname __DATA</div><div class="line">   ...</div><div class="line">  __objc_classlist</div><div class="line">  ...</div><div class="line">  __objc_protolist</div><div class="line">  ...</div><div class="line">  __objc_ivar</div><div class="line">  ...</div><div class="line">  </div><div class="line">  Load command <span class="number">3</span>	<span class="comment">// __LINKEDIT&#x7C7B;&#x578B;&#x6BB5;</span></div><div class="line">      cmd LC_SEGMENT</div><div class="line">  cmdsize <span class="number">56</span></div><div class="line">  segname __LINKEDIT</div><div class="line">  	...</div><div class="line">  </div><div class="line">  Load command <span class="number">4</span>	<span class="comment">// &#x4EC5;&#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x5E93;&#x4FE1;&#x606F;</span></div><div class="line">	cmd LC_DYLD_INFO_ONLY</div><div class="line">	...</div><div class="line">Load command <span class="number">5</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x7CFB;&#x7EDF;&#x8868;</span></div><div class="line">     cmd LC_SYMTAB</div><div class="line">	...</div><div class="line">Load command <span class="number">6</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x7CFB;&#x7EDF;&#x8868;</span></div><div class="line">	cmd LC_DYSYMTAB</div><div class="line">	  ...</div><div class="line">  Load command <span class="number">7</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5668;</span></div><div class="line">          cmd LC_LOAD_DYLINKER</div><div class="line">      cmdsize <span class="number">28</span></div><div class="line">         name /usr/lib/dyld (offset <span class="number">12</span>)</div><div class="line">Load command <span class="number">8</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x7528;&#x6237;ID</span></div><div class="line">     cmd LC_UUID</div><div class="line"> cmdsize <span class="number">24</span></div><div class="line">    uuid <span class="number">5</span>A455D38-F77C<span class="number">-3240</span><span class="number">-98</span>B8-C4E0B11A1B6A</div><div class="line">Load command <span class="number">9</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x652F;&#x6301;&#x7684;&#x6700;&#x5C0F;iOS&#x7248;&#x672C;</span></div><div class="line">      cmd LC_VERSION_MIN_IPHONEOS</div><div class="line">  cmdsize <span class="number">16</span></div><div class="line">  version <span class="number">9.3</span></div><div class="line">      sdk <span class="number">10.1</span></div><div class="line">Load command <span class="number">10</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x4EE3;&#x7801;&#x7248;&#x672C;</span></div><div class="line">      cmd LC_SOURCE_VERSION</div><div class="line">  cmdsize <span class="number">16</span></div><div class="line">  version <span class="number">0.0</span></div><div class="line">Load command <span class="number">11</span>	<span class="comment">// &#x52A0;&#x8F7D;main&#x51FD;&#x6570;</span></div><div class="line">       cmd LC_MAIN</div><div class="line">   cmdsize <span class="number">24</span></div><div class="line">  entryoff <span class="number">27623</span></div><div class="line"> stacksize <span class="number">0</span></div><div class="line">Load command <span class="number">12</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A0;&#x5BC6;&#x4FE1;&#x606F;</span></div><div class="line">          cmd LC_ENCRYPTION_INFO</div><div class="line">      cmdsize <span class="number">20</span></div><div class="line">     cryptoff <span class="number">16384</span></div><div class="line">    cryptsize <span class="number">16384</span></div><div class="line">      cryptid <span class="number">0</span></div><div class="line">Load command <span class="number">13</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x5E93;</span></div><div class="line">          cmd LC_LOAD_DYLIB</div><div class="line">      cmdsize <span class="number">84</span></div><div class="line">         name /System/Library/Frameworks/Foundation.framework/Foundation (offset <span class="number">24</span>)</div><div class="line">   time stamp <span class="number">2</span> Thu Jan  <span class="number">1</span> <span class="number">08</span>:<span class="number">00</span>:<span class="number">02</span> <span class="number">1970</span></div><div class="line">      current version <span class="number">1349.1</span><span class="number">.0</span></div><div class="line">compatibility version <span class="number">300.0</span><span class="number">.0</span></div><div class="line">Load command <span class="number">14</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x5E93;</span></div><div class="line">          cmd LC_LOAD_DYLIB</div><div class="line">      cmdsize <span class="number">52</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x5E93;</span></div><div class="line">         name /usr/lib/libobjc.A.dylib (offset <span class="number">24</span>)</div><div class="line">   time stamp <span class="number">2</span> Thu Jan  <span class="number">1</span> <span class="number">08</span>:<span class="number">00</span>:<span class="number">02</span> <span class="number">1970</span></div><div class="line">      current version <span class="number">228.0</span><span class="number">.0</span></div><div class="line">compatibility version <span class="number">1.0</span><span class="number">.0</span></div><div class="line">Load command <span class="number">15</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x5E93;</span></div><div class="line">          cmd LC_LOAD_DYLIB</div><div class="line">      cmdsize <span class="number">52</span></div><div class="line">         name /usr/lib/libSystem.B.dylib (offset <span class="number">24</span>)</div><div class="line">   time stamp <span class="number">2</span> Thu Jan  <span class="number">1</span> <span class="number">08</span>:<span class="number">00</span>:<span class="number">02</span> <span class="number">1970</span></div><div class="line">      current version <span class="number">1238.0</span><span class="number">.0</span></div><div class="line">compatibility version <span class="number">1.0</span><span class="number">.0</span></div><div class="line">Load command <span class="number">16</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x5E93;</span></div><div class="line">          cmd LC_LOAD_DYLIB</div><div class="line">      cmdsize <span class="number">76</span></div><div class="line">         name /System/Library/Frameworks/<span class="built_in">UIKit</span>.framework/<span class="built_in">UIKit</span> (offset <span class="number">24</span>)</div><div class="line">   time stamp <span class="number">2</span> Thu Jan  <span class="number">1</span> <span class="number">08</span>:<span class="number">00</span>:<span class="number">02</span> <span class="number">1970</span></div><div class="line">      current version <span class="number">3600.5</span><span class="number">.2</span></div><div class="line">compatibility version <span class="number">1.0</span><span class="number">.0</span></div><div class="line">Load command <span class="number">17</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;</span></div><div class="line">          cmd LC_RPATH</div><div class="line">      cmdsize <span class="number">40</span></div><div class="line">         path @executable_path/Frameworks (offset <span class="number">12</span>)</div><div class="line">Load command <span class="number">18</span>	<span class="comment">// &#x51FD;&#x6570;&#x5F00;&#x59CB;</span></div><div class="line">      cmd LC_FUNCTION_STARTS</div><div class="line">  cmdsize <span class="number">16</span></div><div class="line">  dataoff <span class="number">50036</span></div><div class="line"> datasize <span class="number">16</span></div><div class="line">Load command <span class="number">19</span>	<span class="comment">// &#x52A0;&#x8F7D;&#x4EE3;&#x7801;&#x91CC;&#x7684;&#x6570;&#x636E;</span></div><div class="line">      cmd LC_DATA_IN_CODE</div><div class="line">  cmdsize <span class="number">16</span></div><div class="line">  dataoff <span class="number">50052</span></div><div class="line"> datasize <span class="number">0</span></div><div class="line">Load command <span class="number">20</span>	<span class="comment">// &#x4EE3;&#x7801;&#x7B7E;&#x540D;</span></div><div class="line">      cmd LC_CODE_SIGNATURE</div><div class="line">  cmdsize <span class="number">16</span></div><div class="line">  dataoff <span class="number">53584</span></div><div class="line"> datasize <span class="number">10896</span></div><div class="line"></div><div class="line">exec_file(architecture arm64):</div><div class="line">... <span class="comment">// &#x8DDF;&#x4E0A;&#x9762;&#x5DEE;&#x4E0D;&#x591A;</span></div></pre></td></tr></table></figure>
<p>&#x666E;&#x901A;&#x4E8C;&#x8FDB;&#x5236;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x4E0E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x52A0;&#x8F7D;&#x533A;&#x522B;&#xFF1A;</p>
<p>&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x52A0;&#x8F7D;&#x53EF;&#x80FD;&#x4F1A;&#x591A;&#x51FA;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Section</div><div class="line">  sectname __bitcode</div><div class="line">   segname __LLVM</div><div class="line">   ... </div><div class="line">   Load command <span class="number">6</span></div><div class="line">     cmd LC_LINKER_OPTION	<span class="comment">// &#x94FE;&#x63A5;&#x5668;&#x9009;&#x9879;</span></div><div class="line"> cmdsize <span class="number">32</span></div><div class="line">   count <span class="number">2</span></div><div class="line">  string <span class="meta">#1 -framework</span></div><div class="line">  string <span class="meta">#2 Security	// &#x5B89;&#x5168;&#x6846;&#x67B6;</span></div><div class="line">Load command <span class="number">7</span></div><div class="line">     cmd LC_LINKER_OPTION</div><div class="line"> cmdsize <span class="number">40</span></div><div class="line">   count <span class="number">2</span></div><div class="line">  string <span class="meta">#1 -framework</span></div><div class="line">  string <span class="meta">#2 CoreFoundation	// CF&#x6846;&#x67B6;</span></div><div class="line">  ...</div></pre></td></tr></table></figure>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x96C6;&#x6210;&#x6709;&#x4E9B;&#x7B2C;&#x4E09;&#x65B9;SDK&#x6709;&#x65F6;&#x5019;&#x4F1A;&#x51FA;&#x73B0;&#x6709;&#x4E9B;&#x5E93;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x94FE;&#x63A5;&#x8FDB;&#x6765;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x90FD;&#x662F;SDK&#x7684;&#x9879;&#x76EE;target&#x914D;&#x7F6E;&#x51FA;&#x4E86;&#x95EE;&#x9898;&#xFF1A;&#x6CA1;&#x6709;&#x6253;&#x5F00;<code>Enable Modules</code> &#x6216;&#x8005; <code>Link Frameworks Automatically</code>&#xFF08;Xcode6+&#x597D;&#x50CF;&#x65B0;&#x5EFA;&#x7684;&#x5DE5;&#x7A0B;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x8FD9;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#xFF09;&#xFF0C;&#x5F00;&#x542F;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA9;&#x4F60;&#x4E0D;&#x9700;&#x660E;&#x786E;&#x58F0;&#x660E;&#x4EE3;&#x7801;&#x91CC;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x7CFB;&#x7EDF;&#x5E93;&#x7684;&#x5F15;&#x7528;&#x3002;&#xFF08;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x770B;&#x5230;&#x7684;LC_LINKER_OPTION&#x90A3;&#x8FB9;&#x7684;&#x4F18;&#x5316;&#xFF0C;Xcode&#x4F1A;&#x68C0;&#x67E5;&#x4F60;&#x4EE3;&#x7801;&#x91CC;&#x6846;&#x67B6;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x94FE;&#x63A5;&#x9636;&#x6BB5;&#x5E2E;&#x4F60;&#x628A;&#x76F8;&#x5173;&#x7684;&#x7CFB;&#x7EDF;&#x5E93;&#x7ED9;&#x94FE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x6700;&#x540E;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x4E5F;&#x5F53;&#x7136;&#x4F1A;&#x8FDB;&#x5230;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF08;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x5E93;&#x6587;&#x4EF6;&#xFF09;&#xFF0C;&#x5C31;&#x50CF;&#x4E0A;&#x9762;&#x770B;&#x5230;&#x7684;&#x90A3;&#x6837;&#x3002;</p>
<h2 id="2-&#x6587;&#x4EF6;&#x662F;&#x5426;&#x88AB;&#x52A0;&#x5BC6;"><a href="#2-&#x6587;&#x4EF6;&#x662F;&#x5426;&#x88AB;&#x52A0;&#x5BC6;" class="headerlink" title="2. &#x6587;&#x4EF6;&#x662F;&#x5426;&#x88AB;&#x52A0;&#x5BC6;"></a>2. &#x6587;&#x4EF6;&#x662F;&#x5426;&#x88AB;&#x52A0;&#x5BC6;</h2><p>&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x4F7F;&#x7528;otool&#x53BB;&#x67E5;&#x770B;&#x6587;&#x4EF6;&#x7684;&#x52A0;&#x8F7D;&#x4FE1;&#x606F;-<code>otool -l xxx|grep -B 2 crypt</code>&#xFF0C;&#x7136;&#x540E;&#x67E5;&#x770B;cryptid&#x57DF;&#xFF0C;1&#x4E3A;&#x52A0;&#x5BC6;&#xFF0C;0&#x4E3A;&#x4E0D;&#x52A0;&#x5BC6;&#x3002;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">          cmd LC_ENCRYPTION_INFO	<span class="comment">// &#x52A0;&#x8F7D;&#x52A0;&#x5BC6;&#x4FE1;&#x606F; armv7&#x67B6;&#x6784;</span></div><div class="line">      cmdsize <span class="number">20</span></div><div class="line">     cryptoff <span class="number">16384</span></div><div class="line">    cryptsize <span class="number">16384</span></div><div class="line">      cryptid <span class="number">0</span></div><div class="line">--</div><div class="line">          cmd LC_ENCRYPTION_INFO_64	<span class="comment">// &#x52A0;&#x8F7D;&#x52A0;&#x5BC6;&#x4FE1;&#x606F; arm64&#x67B6;&#x6784;</span></div><div class="line">      cmdsize <span class="number">24</span></div><div class="line">     cryptoff <span class="number">16384</span></div><div class="line">    cryptsize <span class="number">16384</span></div><div class="line">      cryptid <span class="number">0</span></div></pre></td></tr></table></figure>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x662F;&#x5426;&#x52A0;&#x5BC6;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x53EF;&#x6267;&#x884C;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x9759;&#x6001;&#x5E93;&#x5012;&#x6CA1;&#x6709;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x52A0;&#x8F7D;&#x6307;&#x4EE4;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/能工巧匠集/">能工巧匠集</a>►<a class="article-category-link" href="/categories/能工巧匠集/iOS开发/">iOS开发</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/关于二进制/">关于二进制</a><a href="/tags/库/">库</a><a href="/tags/文件架构/">文件架构</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/12/05/Foundation/Foundation框架介绍/" title="Foundation框架介绍" itemprop="url">Foundation框架介绍</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2016-12-05T07:38:15.000Z" itemprop="datePublished"> 发表于 2016-12-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<ul>
<li><a href="#foundation">Foundation</a><ul>
<li><a href="#&#x6982;&#x8FF0;">&#x6982;&#x8FF0;</a></li>
<li><a href="#foundation&#x6846;&#x67B6;&#x91CC;&#x7684;&#x7C7B;">Foundation&#x6846;&#x67B6;&#x91CC;&#x7684;&#x7C7B;</a></li>
<li><a href="#foundation&#x6846;&#x67B6;&#x5934;&#x6587;&#x4EF6;">Foundation&#x6846;&#x67B6;&#x5934;&#x6587;&#x4EF6;</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2 id="foundation"><a href="#Foundation" class="headerlink" title="Foundation"></a>Foundation</h2><h3 id="&#x6982;&#x8FF0;"><a href="#&#x6982;&#x8FF0;" class="headerlink" title="&#x6982;&#x8FF0;"></a>&#x6982;&#x8FF0;</h3><p>Foundation&#x6846;&#x67B6;&#x4EE5;CoreFoundation&#x6846;&#x67B6;&#x4E3A;&#x57FA;&#x7840;&#xFF0C;&#x662F;OC&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x7684;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x5C01;&#x88C5;&#x3002;</p>
<ul>
<li>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x57FA;&#x672C;&#x7684;&#x5DE5;&#x5177;&#x7C7B;&#x3002;</li>
<li>&#x901A;&#x8FC7;&#x5F15;&#x5165;&#x4E00;&#x4E9B;&#x4E00;&#x81F4;&#x7684;&#x60EF;&#x4F8B;&#x8BA9;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#x5BB9;&#x6613;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#x9500;&#x6BC1;&#x3002;</li>
<li>&#x652F;&#x6301;unicode&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x5BF9;&#x8C61;&#x6301;&#x4E45;&#x5316;&#x548C;&#x5BF9;&#x8C61;&#x53D1;&#x5E03;&#x3002;<ul>
<li>&#x6301;&#x4E45;&#x5316;&#xFF1A;&#x5BF9;&#x8C61;&#x5F52;&#x6863;&#x6210;&#x6587;&#x4EF6;&#xFF0C;&#x5BF9;&#x8C61;&#x53D1;&#x5E03;&#xFF1A;&#x6587;&#x4EF6;&#x89E3;&#x5F52;&#x6863;&#x6210;&#x5BF9;&#x8C61;&#xFF1F;</li>
</ul>
</li>
<li>&#x72EC;&#x7ACB;&#x4E8E;OS&#x3001;&#x5F3A;&#x8C03;&#x53EF;&#x79FB;&#x690D;&#x6027;&#x3002;<ul>
<li>Foundation&#x6846;&#x67B6;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;macOS&#x8FD8;&#x662F;iOS&#x3001;tvOS&#x90FD;&#x5728;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x53EF;&#x79FB;&#x690D;&#x6027;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x8BE5;&#x6846;&#x67B6;&#x5305;&#x542B;&#x4E86;&#xFF1A;</p>
<ul>
<li>&#x6839;&#x5BF9;&#x8C61;&#x7C7B;&#x3002;</li>
<li>&#x8868;&#x8FBE;&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x7C7B;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x6570;&#x7EC4;&#x3001;&#x96C6;&#x5408;&#x3002;</li>
<li>&#x8868;&#x8FBE;&#x7CFB;&#x7EDF;&#x4FE1;&#x606F;&#x7684;&#x7C7B;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x65E5;&#x671F;&#x3002;</li>
<li>&#x8868;&#x8FBE;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;&#x7684;&#x7C7B;&#x3002;</li>
<li>&#x7B49;&#x3002;</li>
</ul>
<h3 id="foundation&#x6846;&#x67B6;&#x91CC;&#x7684;&#x7C7B;"><a href="#Foundation&#x6846;&#x67B6;&#x91CC;&#x7684;&#x7C7B;" class="headerlink" title="Foundation&#x6846;&#x67B6;&#x91CC;&#x7684;&#x7C7B;"></a>Foundation&#x6846;&#x67B6;&#x91CC;&#x7684;&#x7C7B;</h3><ul>
<li><p>&#x6570;&#x636E;&#x5B58;&#x50A8;</p>
<p><code>NSData</code>&#xFF0C;<code>NSValue</code>&#xFF0C;<code>NSNumber</code>&#xFF0C;<code>NSArray</code>&#xFF0C;<code>NSDictionary</code>&#xFF0C;<code>NSSet</code></p>
</li>
<li><p>&#x6587;&#x672C;&#x548C;&#x5B57;&#x7B26;&#x4E32;</p>
<p><code>NSString</code>&#xFF0C;<code>NSMutableString</code>&#xFF0C;<code>NSScanner</code>&#xFF0C;<code>NSCharacterSet</code></p>
</li>
<li><p>&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;</p>
<p><code>NSDate</code>&#xFF0C;<code>NSTimeZone</code>&#xFF0C;<code>NSCalendar</code>&#xFF0C;<code>NSLocale</code></p>
</li>
<li><p>&#x6392;&#x5E8F;&#x548C;&#x8FC7;&#x6EE4;</p>
<p><code>NSArray</code>&#x3001;<code>NSDictionary</code>&#x548C;<code>NSSet</code>&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x53EF;&#x88AB;&#x6392;&#x5E8F;&#x548C;&#x8FC7;&#x6EE4;&#xFF0C;&#x76F8;&#x5173;&#x7C7B;&#xFF1A;<code>NSPredicate</code>&#xFF0C;<code>NSSortDescriptor</code>&#x3002;</p>
</li>
<li><p>&#x5E94;&#x7528;&#x534F;&#x8C03;&#x548C;&#x65F6;&#x673A;</p>
<p><code>NSNotification</code>, <code>NSNotificationCenter</code>, <code>NSNotificationQueue</code>&#xFF0C;<code>Timer</code>&#x3002;</p>
</li>
<li><p>&#x5BF9;&#x8C61;&#x89E3;&#x538B;&#x548C;&#x6301;&#x4E45;&#x5316;</p>
<p><code>NSPropertyListSerialization</code> , <code>NSJSONSerialization</code>, <code>NSCoder</code></p>
</li>
<li><p>OS&#x670D;&#x52A1;</p>
<p><code>NSFileManager</code> &#x63D0;&#x4F9B;&#x4E86;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#x76F8;&#x5173;&#x63A5;&#x53E3;&#xFF0C; <code>NSThread</code> &#x548C;  <code>NSProcessInfo</code> &#x8BA9;&#x4F60;&#x521B;&#x5EFA;&#x591A;&#x7EBF;&#x7A0B;&#x5E94;&#x7528;&#x4EE5;&#x53CA;&#x5728;&#x5E94;&#x7528;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#x67E5;&#x8BE2;&#x73AF;&#x5883;&#x4FE1;&#x606F;&#x3002;</p>
</li>
<li><p>URL&#x52A0;&#x8F7D;&#x7CFB;&#x7EDF;</p>
<p>&#x4E00;&#x4E2A;&#x5141;&#x8BB8;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x901A;&#x8FC7;URL&#x8BBF;&#x95EE;&#x5185;&#x5BB9;&#x7684;&#x96C6;&#x5408;&#x7C7B;&#xFF0C;&#x4EE5; <code>NSURL</code>&#x7C7B;&#x4E3A;&#x4EE3;&#x8868;&#x3002;</p>
<p><code>NSURLRequest</code> &#x8DDF; <code>NSURLResponse</code>&#x5206;&#x522B;&#x8868;&#x793A;&#x901A;&#x8FC7; <code>NSURLSession</code> &#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x7684;&#x8BF7;&#x6C42;&#x548C;&#x56DE;&#x5E94;&#x5BF9;&#x8C61;&#xFF0C;</p>
<p>&#x5176;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x4EE5;helper&#x7C7B;&#x63D0;&#x4F9B;&#x51FA;&#x6765;&#xFF0C;&#x5305;&#x62EC; <code>NSURLProtocol</code> &#x534F;&#x8BAE;&#xFF0C;</p>
<p><code>NSURLAuthenticaionChallenge</code> &#x548C; <code>NSHTTPCookieStorage</code> &#x7528;&#x6765;&#x8FDB;&#x884C;&#x6743;&#x9650;&#x8BA4;&#x8BC1;&#xFF0C;</p>
<p><code>HSHTTPCookieStorage</code> &#x7528;&#x4E8E;cookie&#x5B58;&#x50A8;&#xFF0C;<code>NSURLCache</code> &#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x7BA1;&#x7406;&#x3002;</p>
</li>
</ul>
<h3 id="foundation&#x6846;&#x67B6;&#x5934;&#x6587;&#x4EF6;"><a href="#Foundation&#x6846;&#x67B6;&#x5934;&#x6587;&#x4EF6;" class="headerlink" title="Foundation&#x6846;&#x67B6;&#x5934;&#x6587;&#x4EF6;"></a>Foundation&#x6846;&#x67B6;&#x5934;&#x6587;&#x4EF6;</h3><p><img src="/assert/images/2016/foundation_header1.png" alt="foundation_header1"></p>
<p><img src="/assert/images/2016/foundation_header2.png" alt="foundation_header2"></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Foundation框架/">Foundation框架</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Foundation/">Foundation</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/12/开发技术积累日志/" title="开发技术积累日志" itemprop="url">开发技术积累日志</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2016-10-12T08:17:15.000Z" itemprop="datePublished"> 发表于 2016-10-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<ul>
<li><a href="#&#x5F00;&#x53D1;&#x6280;&#x672F;&#x79EF;&#x7D2F;&#x65E5;&#x5FD7;">&#x5F00;&#x53D1;&#x6280;&#x672F;&#x79EF;&#x7D2F;&#x65E5;&#x5FD7;</a><ul>
<li><a href="#todo-list">TODO LIST</a><ul>
<li><a href="#1-&#x6C47;&#x7F16;&#x76F8;&#x5173;">1. &#x6C47;&#x7F16;&#x76F8;&#x5173;</a></li>
<li><a href="#2-jspatch&#x4F7F;&#x7528;">2. JSPatch&#x4F7F;&#x7528;</a></li>
<li><a href="#3-&#x4E00;&#x4E9B;&#x5173;&#x8054;">3. &#x4E00;&#x4E9B;&#x5173;&#x8054;</a></li>
<li><a href="#4-&#x5E94;&#x7528;&#x672C;&#x5730;&#x5316;">4. &#x5E94;&#x7528;&#x672C;&#x5730;&#x5316;</a></li>
<li><a href="#5-&#x4F5C;&#x56FE;&#x76F8;&#x5173;&#x6280;&#x80FD;">5. &#x4F5C;&#x56FE;&#x76F8;&#x5173;&#x6280;&#x80FD;</a></li>
<li><a href="#6-jspatch&#x5B89;&#x5168;&#x8BBE;&#x7F6E;">6. JSPatch&#x5B89;&#x5168;&#x8BBE;&#x7F6E;</a></li>
<li><a href="#7&#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x9002;&#x5408;&#x591A;&#x6570;&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;">7.&#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x9002;&#x5408;&#x591A;&#x6570;&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;&#xFF1A;</a></li>
</ul>
</li>
<li><a href="#ideas">IDEAS</a><ul>
<li><a href="#1-&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x5E7F;&#x544A;&#x5237;&#x91CF;">1. &#x5982;&#x4F55;&#x8FDB;&#x884C;&#x5E7F;&#x544A;&#x5237;&#x91CF;&#xFF1F;</a></li>
<li><a href="#2&#x5173;&#x4E8E;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x4E2D;dsp&#x89D2;&#x8272;&#x7684;&#x4E00;&#x4E9B;&#x601D;&#x8003;">2.&#x5173;&#x4E8E;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x4E2D;DSP&#x89D2;&#x8272;&#x7684;&#x4E00;&#x4E9B;&#x601D;&#x8003;</a></li>
<li><a href="#3-&#x5BA2;&#x6237;&#x7AEF;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x672C;&#x5730;rsa&#x52A0;&#x5BC6;&#x4F7F;&#x7528;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#x5982;&#x652F;&#x4ED8;&#x5B9D;app">3. &#x5BA2;&#x6237;&#x7AEF;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x672C;&#x5730;RSA&#x52A0;&#x5BC6;&#xFF08;&#x4F7F;&#x7528;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#xFF0C;&#x5982;&#x652F;&#x4ED8;&#x5B9D;app&#xFF09;</a></li>
<li><a href="#4&#x5199;&#x4E00;&#x4E2A;&#x756A;&#x8304;&#x5DE5;&#x4F5C;&#x6CD5;app">4.&#x5199;&#x4E00;&#x4E2A;&#x201C;&#x756A;&#x8304;&#x5DE5;&#x4F5C;&#x6CD5;&#x201D;App</a></li>
<li><a href="#5&#x5199;&#x4E00;&#x4E2A;-v2ex&#x7F51;&#x7AD9;&#x5BA2;&#x6237;&#x7AEF;">5.&#x5199;&#x4E00;&#x4E2A; V2EX&#x7F51;&#x7AD9;&#x5BA2;&#x6237;&#x7AEF;</a></li>
</ul>
</li>
<li><a href="#tech-log">TECH LOG</a><ul>
<li><a href="#1&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x8BB0;&#x5F55;">1.&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x8BB0;&#x5F55;</a></li>
<li><a href="#2could-not-build-module-uikit">2.Could not build module &#x201C;UIKit&#x201D;</a></li>
<li><a href="#3-&#x65E5;&#x5FD7;&#x7684;&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;">3. &#x65E5;&#x5FD7;&#x7684;&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;</a></li>
<li><a href="#4&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x534F;&#x8BAE;nsobject-nscopy-nsmutablecopy">4.&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x534F;&#x8BAE;&#xFF1A;NSObject, NSCopy, NSMutableCopy</a></li>
<li><a href="#5&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5199;&#x8FDB;&#x6587;&#x4EF6;">5.&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5199;&#x8FDB;&#x6587;&#x4EF6;</a></li>
<li><a href="#6&#x7531;-voidsetvalueidvalue-forkeynsstring-&#x65B9;&#x6CD5;&#x60F3;&#x5230;&#x7684;">6.&#x7531; - (void)setValue:(id)value forKey:(NSString *) &#x65B9;&#x6CD5;&#x60F3;&#x5230;&#x7684;</a></li>
<li><a href="#7nsoperation-vs-grand-central-dispatch">7.NSOperation vs Grand Central Dispatch</a></li>
</ul>
</li>
<li><a href="#tools">TOOLS</a><ul>
<li><a href="#1hosts&#x6587;&#x4EF6;&#x4FEE;&#x6539;">1.Hosts&#x6587;&#x4EF6;&#x4FEE;&#x6539;</a></li>
<li><a href="#2ios&#x4F7F;&#x7528;charles&#x6293;&#x5305;&#x5E76;&#x7BE1;&#x6539;&#x8FD4;&#x56DE;&#x6570;&#x636E;">2.iOS&#x4F7F;&#x7528;Charles&#x6293;&#x5305;&#x5E76;&#x7BE1;&#x6539;&#x8FD4;&#x56DE;&#x6570;&#x636E;</a></li>
<li><a href="#3&#x4E00;&#x4E9B;&#x5907;&#x5FD8;">3.&#x4E00;&#x4E9B;&#x5907;&#x5FD8;</a></li>
<li><a href="#4coredata&#x5B66;&#x4E60;">4.CoreData&#x5B66;&#x4E60;</a></li>
<li><a href="#5xcode-server">5.Xcode Server</a></li>
</ul>
</li>
<li><a href="#error-log">ERROR LOG</a><ul>
<li><a href="#1arc&#x76F8;&#x5173;">1.ARC&#x76F8;&#x5173;</a></li>
<li><a href="#2-&#x9884;&#x7F16;&#x8BD1;&#x5934;&#x6587;&#x4EF6;pch">2. &#x9884;&#x7F16;&#x8BD1;&#x5934;&#x6587;&#x4EF6;.pch</a></li>
<li><a href="#3&#x7B26;&#x53F7;&#x91CD;&#x590D;">3.&#x7B26;&#x53F7;&#x91CD;&#x590D;</a><ul>
<li><a href="#31-&#x5254;&#x9664;&#x9759;&#x6001;&#x5E93;&#x7684;&#x67D0;&#x4E9B;&#x76EE;&#x6807;&#x6587;&#x4EF6;">3.1 &#x5254;&#x9664;&#x9759;&#x6001;&#x5E93;&#x7684;&#x67D0;&#x4E9B;&#x76EE;&#x6807;&#x6587;&#x4EF6;</a><ul>
<li><a href="#&#x7B80;&#x8981;">&#x7B80;&#x8981;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;">4.&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;</a></li>
<li><a href="#5xcode-signing-error">5.Xcode Signing Error!!</a><ul>
<li><a href="#xcode-signing&#x9009;&#x9879;">Xcode Signing&#x9009;&#x9879;</a></li>
<li><a href="#&#x914D;&#x7F6E;&#x4E00;&#x4E2A;provision-profile&#x6587;&#x4EF6;">&#x914D;&#x7F6E;&#x4E00;&#x4E2A;provision profile&#x6587;&#x4EF6;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h1 id="&#x5F00;&#x53D1;&#x6280;&#x672F;&#x79EF;&#x7D2F;&#x65E5;&#x5FD7;"><a href="#&#x5F00;&#x53D1;&#x6280;&#x672F;&#x79EF;&#x7D2F;&#x65E5;&#x5FD7;" class="headerlink" title="&#x5F00;&#x53D1;&#x6280;&#x672F;&#x79EF;&#x7D2F;&#x65E5;&#x5FD7;"></a>&#x5F00;&#x53D1;&#x6280;&#x672F;&#x79EF;&#x7D2F;&#x65E5;&#x5FD7;</h1><p>now date: 2016.10.12</p>
<p>[TOC]</p>
<table>
<thead>
<tr>
<th>TODO LIST</th>
<th>IDEAS</th>
<th>TECH NOTE</th>
<th>TOOLS</th>
<th>ERROR LOG</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x8BA1;&#x5212;&#x5217;&#x8868;</td>
<td>&#x7075;&#x611F;</td>
<td>&#x6280;&#x672F;&#x7B14;&#x8BB0;</td>
<td>&#x5DE5;&#x5177;&#x4F7F;&#x7528;</td>
<td>&#x5751; * &#x62A5;&#x9519;</td>
</tr>
</tbody>
</table>
<h2 id="todo-list"><a href="#TODO-LIST" class="headerlink" title="TODO LIST"></a>TODO LIST</h2><h3 id="1-&#x6C47;&#x7F16;&#x76F8;&#x5173;"><a href="#1-&#x6C47;&#x7F16;&#x76F8;&#x5173;" class="headerlink" title="1. &#x6C47;&#x7F16;&#x76F8;&#x5173;"></a>1. &#x6C47;&#x7F16;&#x76F8;&#x5173;</h3><p><a href="http://baike.baidu.com/view/14983064.htm#1" target="_blank" rel="external">http://baike.baidu.com/view/14983064.htm#1</a></p>
<hr>
<p>2016.10.12</p>
<h3 id="2-jspatch&#x4F7F;&#x7528;"><a href="#2-JSPatch&#x4F7F;&#x7528;" class="headerlink" title="2. JSPatch&#x4F7F;&#x7528;"></a>2. JSPatch&#x4F7F;&#x7528;</h3><p>&#x8463;&#x94C2;&#x7136;&#x7684;&#x535A;&#x5BA2;&#xFF1A;<br><a href="http://www.cnblogs.com/dsxniubility/p/4264777.html" target="_blank" rel="external">http://www.cnblogs.com/dsxniubility/p/4264777.html</a></p>
<hr>
<p>2016.10.14</p>
<hr>
<h3 id="3-&#x4E00;&#x4E9B;&#x5173;&#x8054;"><a href="#3-&#x4E00;&#x4E9B;&#x5173;&#x8054;" class="headerlink" title="3. &#x4E00;&#x4E9B;&#x5173;&#x8054;"></a>3. &#x4E00;&#x4E9B;&#x5173;&#x8054;</h3><p><a href="https://leancloud.cn/" target="_blank" rel="external">https://leancloud.cn/</a><br> <a href="https://ios.bugly.qq.com" target="_blank" rel="external">https://ios.bugly.qq.com</a></p>
<hr>
<p>2016.10.27</p>
<h3 id="4-&#x5E94;&#x7528;&#x672C;&#x5730;&#x5316;"><a href="#4-&#x5E94;&#x7528;&#x672C;&#x5730;&#x5316;" class="headerlink" title="4. &#x5E94;&#x7528;&#x672C;&#x5730;&#x5316;"></a>4. &#x5E94;&#x7528;&#x672C;&#x5730;&#x5316;</h3><h3 id="5-&#x4F5C;&#x56FE;&#x76F8;&#x5173;&#x6280;&#x80FD;"><a href="#5-&#x4F5C;&#x56FE;&#x76F8;&#x5173;&#x6280;&#x80FD;" class="headerlink" title="5. &#x4F5C;&#x56FE;&#x76F8;&#x5173;&#x6280;&#x80FD;"></a>5. &#x4F5C;&#x56FE;&#x76F8;&#x5173;&#x6280;&#x80FD;</h3><p>&#x6BD4;&#x5982;&#xFF0C;sketch&#x5236;&#x4F5C;app &#x56FE;&#x6807;&#x7B49;&#x6280;&#x80FD;&#x3002;</p>
<hr>
<p>2016.11.08</p>
<h3 id="6-jspatch&#x5B89;&#x5168;&#x8BBE;&#x7F6E;"><a href="#6-JSPatch&#x5B89;&#x5168;&#x8BBE;&#x7F6E;" class="headerlink" title="6. JSPatch&#x5B89;&#x5168;&#x8BBE;&#x7F6E;"></a>6. JSPatch&#x5B89;&#x5168;&#x8BBE;&#x7F6E;</h3><p><a href="http://jspatch.com/Docs/rsa" target="_blank" rel="external">http://jspatch.com/Docs/rsa</a><br>&#x5176;&#x5B83;demo: <a href="http://gold.xitu.io/post/57c00e18a633bd005d609a26" target="_blank" rel="external">http://gold.xitu.io/post/57c00e18a633bd005d609a26</a></p>
<hr>
<p>2017.6.14</p>
<h3 id="7&#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x9002;&#x5408;&#x591A;&#x6570;&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;"><a href="#7-&#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x9002;&#x5408;&#x591A;&#x6570;&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;&#xFF1A;" class="headerlink" title="7.&#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x9002;&#x5408;&#x591A;&#x6570;&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;&#xFF1A;"></a>7.&#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x9002;&#x5408;&#x591A;&#x6570;&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;&#xFF1A;</h3><ul>
<li>app&#x4FE1;&#x606F;<ul>
<li>app&#x7248;&#x672C;</li>
<li>app feature&#x652F;&#x6301;&#x60C5;&#x51B5;</li>
</ul>
</li>
<li>&#x8BBE;&#x5907;&#x4FE1;&#x606F;<ul>
<li>&#x8BBE;&#x5907;&#x5C4F;&#x5E55;</li>
<li>&#x8BBE;&#x5907;&#x786C;&#x4EF6;&#x529F;&#x80FD;&#x652F;&#x6301;<ul>
<li>&#x76F8;&#x673A;&#xFF08;&#x8FD8;&#x6709;&#x6CA1;&#x76F8;&#x673A;&#x7684;iOS&#x8BBE;&#x5907;&#xFF1F;&#xFF09;</li>
<li>3D Touch</li>
</ul>
</li>
</ul>
</li>
<li>&#x652F;&#x4ED8;<ul>
<li>In-App-Purchase</li>
<li>AliPay&#x3001;Wechat Pay&#xFF1F;</li>
</ul>
</li>
<li>App Store</li>
<li>ARKit&#xFF1F;</li>
<li>&#x5671;&#x5934;&#xFF1F;</li>
</ul>
<h2 id="ideas"><a href="#IDEAS" class="headerlink" title="IDEAS"></a>IDEAS</h2><h3 id="1-&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x5E7F;&#x544A;&#x5237;&#x91CF;"><a href="#1-&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x5E7F;&#x544A;&#x5237;&#x91CF;&#xFF1F;" class="headerlink" title="1. &#x5982;&#x4F55;&#x8FDB;&#x884C;&#x5E7F;&#x544A;&#x5237;&#x91CF;&#xFF1F;"></a>1. &#x5982;&#x4F55;&#x8FDB;&#x884C;&#x5E7F;&#x544A;&#x5237;&#x91CF;&#xFF1F;</h3><p>&#x8BBE;&#x60F3;&#xFF1A;</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#x539F;&#x7406;&#xFF1A;</div><div class="line">	&#x5E7F;&#x544A;&#x5A92;&#x4F53;&#xFF08;&#x7F51;&#x7AD9;&#x6216;&#x8005;<span class="keyword">app</span>&#xFF09;&#x53D1;&#x8D77;&#x5E7F;&#x544A;&#x7533;&#x8BF7;&#xFF0C;&#x5E7F;&#x544A;&#x5C55;&#x793A;&#x540E;&#x5C31;&#x6709;&#x94B1;&#x6536;&#xFF08;<span class="keyword">app</span>&#x5BF9;&#x5E94;&#x7684;&#x8D26;&#x6237;&#xFF09;&#x3002;</div><div class="line">	&#x5173;&#x952E;&#x70B9;&#x5728;&#x4E8E;&#xFF1A;&#x5E7F;&#x544A;&#x7684;&#x7533;&#x8BF7;&#x6709;&#x6548;&#xFF0C;&#x7136;&#x540E;&#x89E6;&#x53D1;SDK&#x7684;&#x56DE;&#x8C03;&#xFF08;&#x6210;&#x529F;&#x5C55;&#x793A;&#x5E7F;&#x544A;&#x7684;&#x56DE;&#x8C03;&#xFF09;&#x3002;ps&#xFF1A;&#x6B64;&#x5904;&#x9700;&#x6E05;&#x695A;&#x6574;&#x4E2A;&#x5E7F;&#x544A;&#x7684;&#x8BF7;&#x6C42;&#x63A5;&#x53E3;&#x53CA;&#x5176;&#x56DE;&#x8C03;&#x63A5;&#x53E3;&#x7B49;&#x3002;</div><div class="line"></div><div class="line">	&#x4E00;&#x5929;&#x4E00;&#x4E2A;<span class="keyword">app</span>&#x5237;&#x91CF;</div><div class="line">&#x65B9;&#x6CD5;&#xFF1A;</div><div class="line">	&#x9996;&#x5148;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<span class="keyword">app</span>&#xFF0C;&#x7ED1;&#x5B9A;&#x597D;&#x8D26;&#x6237;&#x3002;</div></pre></td></tr></table></figure>
<p>&#x76F8;&#x5173;&#x94FE;&#x63A5;:<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">http</span>://www.rtbchina.com/how-<span class="keyword">not</span>-<span class="built_in">to</span>-<span class="built_in">get</span>-screwed-<span class="keyword">by</span>-shuashuashua.html</div></pre></td></tr></table></figure></p>
<hr>
<h3 id="2&#x5173;&#x4E8E;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x4E2D;dsp&#x89D2;&#x8272;&#x7684;&#x4E00;&#x4E9B;&#x601D;&#x8003;"><a href="#2-&#x5173;&#x4E8E;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x4E2D;DSP&#x89D2;&#x8272;&#x7684;&#x4E00;&#x4E9B;&#x601D;&#x8003;" class="headerlink" title="2.&#x5173;&#x4E8E;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x4E2D;DSP&#x89D2;&#x8272;&#x7684;&#x4E00;&#x4E9B;&#x601D;&#x8003;"></a>2.&#x5173;&#x4E8E;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x4E2D;DSP&#x89D2;&#x8272;&#x7684;&#x4E00;&#x4E9B;&#x601D;&#x8003;</h3><ol>
<li>DSP&#x4ECB;&#x7ECD;<br><a href="http://baike.baidu.com/view/8103074.htm" target="_blank" rel="external">http://baike.baidu.com/view/8103074.htm</a>, <a href="https://www.zhihu.com/question/23463700" target="_blank" rel="external">https://www.zhihu.com/question/23463700</a><br> &#x7B80;&#x5355;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x4E8E;&#x5E7F;&#x544A;&#x4E3B;&#x7684;&#x5E73;&#x53F0;&#xFF0C;&#x5E2E;&#x52A9;&#x5E7F;&#x544A;&#x4E3B;&#x627E;&#x5230;&#x6700;&#x5408;&#x9002;&#x6295;&#x653E;&#x76EE;&#x6807;&#xFF08;&#x67D0;app&#x3001;&#x5E74;&#x9F84;&#x4E3A;x&#x3001;&#x559C;&#x597D;&#x4E3A;y&#x3001;&#x6027;&#x522B;&#x4E3A;s&#x7684;banner&#xFF08;&#x6216;&#x8005;&#x89C6;&#x9891;&#xFF09;&#x5E7F;&#x544A;&#xFF09;&#x3002;</li>
<li>&#x4E92;&#x8054;&#x7F51;&#x5E7F;&#x544A;&#x7684;&#x5B9E;&#x65F6;&#x7ADE;&#x4EF7;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5176;&#x4E2D;DSP&#x626E;&#x6F14;&#x7684;&#x89D2;&#x8272;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x5E7F;&#x544A;&#x4E3B;&#x76F4;&#x63A5;&#x6295;&#x94B1;&#x7684;&#x5730;&#x65B9;&#x3002;</li>
<li>&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;: &#x5982;&#x4F55;&#x8BA9;&#x522B;&#x4EBA;&#x6536;&#x76CA;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x81EA;&#x5DF1;&#x4E5F;&#x53D7;&#x76CA;&#xFF08;&#x6216;&#x8005;&#x53CD;&#x8FC7;&#x6765;&#xFF09;&#x3002;&#x53CC;&#x8D62;&#x624D;&#x662F;&#x6700;&#x4F73;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#x6DD8;&#x5B9D;&#xFF0C;&#x5BF9;&#x5E73;&#x53F0;&#x7684;&#x5546;&#x5BB6;&#x6709;&#x5E7F;&#x544A;&#x7684;&#x63D0;&#x4F9B;&#x3001;&#x6280;&#x672F;&#x652F;&#x6301;&#x8D39;&#x7528;&#x7B49;&#x3002;<br>&#x90A3;&#x4E48;&#xFF0C;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x65B9;&#x5411;&#x80FD;&#x8BA9;&#x81EA;&#x5DF1;&#x8D5A;&#x94B1;&#x7684;&#x65F6;&#x5019;&#x5408;&#x4F5C;&#x4F19;&#x4F34;&#x4E5F;&#x8DDF;&#x7740;&#x8D5A;&#x94B1;&#xFF1F;</li>
</ol>
<hr>
<p>2016.10.14</p>
<h3 id="3-&#x5BA2;&#x6237;&#x7AEF;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x672C;&#x5730;rsa&#x52A0;&#x5BC6;&#x4F7F;&#x7528;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#x5982;&#x652F;&#x4ED8;&#x5B9D;app"><a href="#3-&#x5BA2;&#x6237;&#x7AEF;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x672C;&#x5730;RSA&#x52A0;&#x5BC6;&#xFF08;&#x4F7F;&#x7528;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#xFF0C;&#x5982;&#x652F;&#x4ED8;&#x5B9D;app&#xFF09;" class="headerlink" title="3. &#x5BA2;&#x6237;&#x7AEF;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x672C;&#x5730;RSA&#x52A0;&#x5BC6;&#xFF08;&#x4F7F;&#x7528;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#xFF0C;&#x5982;&#x652F;&#x4ED8;&#x5B9D;app&#xFF09;"></a>3. &#x5BA2;&#x6237;&#x7AEF;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x672C;&#x5730;RSA&#x52A0;&#x5BC6;&#xFF08;&#x4F7F;&#x7528;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#xFF0C;&#x5982;&#x652F;&#x4ED8;&#x5B9D;app&#xFF09;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x672C;&#x5730;&#x91CC;&#x9700;&#x6709;RSA&#x516C;&#x94A5;&#xFF0C;&#x654F;&#x611F;&#x6570;&#x636E;&#x53D1;&#x9001;&#x524D;&#xFF0C;&#x9700;&#x7528;&#x6B64;&#x516C;&#x94A5;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#x5904;&#x7406;&#x3002;<br>&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;&#x5DF2;&#x88AB;&#x52A0;&#x5BC6;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;&#x79C1;&#x94A5;&#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#x3002;&#x5904;&#x7406;&#x4E1A;&#x52A1;&#x3002;</p>
<p>&#x95EE;&#x9898;&#xFF1A;&#x5982;&#x4F55;</p>
<h3 id="4&#x5199;&#x4E00;&#x4E2A;&#x756A;&#x8304;&#x5DE5;&#x4F5C;&#x6CD5;app"><a href="#4-&#x5199;&#x4E00;&#x4E2A;&#x201C;&#x756A;&#x8304;&#x5DE5;&#x4F5C;&#x6CD5;&#x201D;App" class="headerlink" title="4.&#x5199;&#x4E00;&#x4E2A;&#x201C;&#x756A;&#x8304;&#x5DE5;&#x4F5C;&#x6CD5;&#x201D;App"></a>4.&#x5199;&#x4E00;&#x4E2A;&#x201C;&#x756A;&#x8304;&#x5DE5;&#x4F5C;&#x6CD5;&#x201D;App</h3><p>&#x521D;&#x8877;</p>
<p>&#x529F;&#x80FD;&#x8BBE;&#x8BA1;</p>
<p>&#x5F00;&#x53D1;&#x8BA1;&#x5212;</p>
<h3 id="5&#x5199;&#x4E00;&#x4E2A;-v2ex&#x7F51;&#x7AD9;&#x5BA2;&#x6237;&#x7AEF;"><a href="#5-&#x5199;&#x4E00;&#x4E2A;-V2EX&#x7F51;&#x7AD9;&#x5BA2;&#x6237;&#x7AEF;" class="headerlink" title="5.&#x5199;&#x4E00;&#x4E2A; V2EX&#x7F51;&#x7AD9;&#x5BA2;&#x6237;&#x7AEF;"></a>5.&#x5199;&#x4E00;&#x4E2A; V2EX&#x7F51;&#x7AD9;&#x5BA2;&#x6237;&#x7AEF;</h3><p>&#x53C2;&#x8003;&#x6587;&#x6863;</p>
<p><a href="https://www.v2ex.com/p/7v9TEc53" target="_blank" rel="external">https://www.v2ex.com/p/7v9TEc53</a></p>
<p>&#x521D;&#x8877;</p>
<p>&#x529F;&#x80FD;&#x8BBE;&#x8BA1;</p>
<p>&#x5F00;&#x53D1;&#x8BA1;&#x5212;</p>
<h2 id="tech-log"><a href="#TECH-LOG" class="headerlink" title="TECH LOG"></a>TECH LOG</h2><h3 id="1&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x8BB0;&#x5F55;"><a href="#1-&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x8BB0;&#x5F55;" class="headerlink" title="1.&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x8BB0;&#x5F55;"></a>1.&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x8BB0;&#x5F55;</h3><p>from: <a href="http://blog.ibireme.com/2013/11/26/objective-c-messaging/" target="_blank" rel="external">http://blog.ibireme.com/2013/11/26/objective-c-messaging/</a></p>
<p>&#x6A21;&#x62DF;&#x5668;&#x8FDB;&#x884C;&#x65AD;&#x70B9;&#x8C03;&#x8BD5;&#x3001;&#x8C03;&#x8BD5;&#x7EC8;&#x7AEF;&#x91CC;&#x8F93;&#x5165;<br>call (void)instrumentObjcMessageSends(YES)<br>&#x76F8;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x5386;&#x53F2;&#x5728;/tmp/msgSends-xxxx(app&#x8FDB;&#x7A0B;&#x53F7;).</p>
<p>&#x5185;&#x5BB9;&#x5982;&#x4E0B;:</p>
<ul>
<li>NSObject NSObject new</li>
</ul>
<ul>
<li>NSObject NSObject init</li>
<li>NSObject NSObject performSelector:</li>
</ul>
<ul>
<li>NSObject NSObject resolveInstanceMethod:</li>
<li>NSObject NSObject resolveInstanceMethod:</li>
</ul>
<ul>
<li>NSObject NSObject forwardingTargetForSelector:</li>
<li>NSObject NSObject forwardingTargetForSelector:</li>
<li>NSObject NSObject methodSignatureForSelector:</li>
<li>NSObject NSObject methodSignatureForSelector:</li>
<li>NSObject NSObject class</li>
<li>NSObject NSObject doesNotRecognizeSelector:</li>
<li>NSObject NSObject doesNotRecognizeSelector:</li>
<li>NSObject NSObject class<br>&#x2026;</li>
</ul>
<p>&#x770B;&#x6CD5;&#xFF1A;&#x9488;&#x5BF9;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x3001;&#x8F6C;&#x53D1;&#x6D41;&#x7A0B;&#xFF0C;&#x8FD8;&#x662F;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x63ED;&#x9732;&#x4F5C;&#x7528;&#x3002;<br>&#x671F;&#x95F4;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x4E00;&#x4E9B;&#x6C47;&#x7F16;&#x4EE3;&#x7801;&#x3002;&#x53EF;&#x4EE5;&#x5BF9;&#x6C47;&#x7F16;&#x8FD9;&#x95E8;&#x8BED;&#x8A00;&#x505A;&#x4E00;&#x4E0B;&#x5165;&#x95E8;:<br><a href="http://baike.baidu.com/view/14983064.htm#1" target="_blank" rel="external">http://baike.baidu.com/view/14983064.htm#1</a><br>[&#x672A;&#x9605;&#x5B8C;]<br>&#x5173;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x3001;&#x8F6C;&#x53D1;&#x6D41;&#x7A0B;&#xFF0C;&#x82F9;&#x679C;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E5F;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x63CF;&#x8FF0;&#xFF1A;</p>
<hr>
<h3 id="2could-not-build-module-uikit"><a href="#2-Could-not-build-module-&#x201C;UIKit&#x201D;" class="headerlink" title="2.Could not build module &#x201C;UIKit&#x201D;"></a>2.Could not build module &#x201C;UIKit&#x201D;</h3><p>from: <a href="http://www.jianshu.com/p/b3c0249aafad" target="_blank" rel="external">http://www.jianshu.com/p/b3c0249aafad</a></p>
<hr>
<p>2016.10.12</p>
<h3 id="3-&#x65E5;&#x5FD7;&#x7684;&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;"><a href="#3-&#x65E5;&#x5FD7;&#x7684;&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;" class="headerlink" title="3. &#x65E5;&#x5FD7;&#x7684;&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;"></a>3. &#x65E5;&#x5FD7;&#x7684;&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;</h3><ol>
<li>&#x83B7;&#x53D6;&#x51FD;&#x6570;&#x7B7E;&#x540D;&#x3001;&#x6E90;&#x7801;&#x4F4D;&#x7F6E;&#x3001;&#x6E90;&#x7801;&#x6587;&#x4EF6;&#x3001;&#x8C03;&#x7528;&#x6808;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;<strong>func</strong>, <strong>LINE</strong>, <strong>FILE</strong>&#x3002;<br>&#x901A;&#x8FC7;[NSThread callStackSymbols]&#x53EF;&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x6808;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x8C03;&#x8BD5;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F46;&#x662F;&#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#x65F6;&#xFF0C;&#x6700;&#x597D;&#x522B;&#x7528;&#xFF08;&#x8017;&#x8D44;&#x6E90;&#x4EC0;&#x4E48;&#x7684;&#xFF09;&#x3002;<br> &#x5982;:<br> 2016-10-13 09:42:07.703 test[2238:20818] callStackSymbols:(<br> 0   test                                0x0000000109ad187c -[ViewController viewDidLoad] + 76<br> 1   UIKit                               0x000000010aaaf984 -[UIViewController loadViewIfRequired] + 1198<br> 2   UIKit                               0x000000010aaafcd3 -[UIViewController view] + 27<br> 3   UIKit                               0x000000010a985fb4 -[UIWindow addRootViewControllerViewIfPossible] + 61<br> 4   UIKit                               0x000000010a98669d -[UIWindow _setHidden:forced:] + 282<br> 5   UIKit                               0x000000010a998180 -[UIWindow makeKeyAndVisible] + 42<br> 6   UIKit                               0x000000010a90ced9 -[UIApplication _callInitializationDelegatesForMainScene:transitionContext:] + 4131<br> 7   UIKit                               0x000000010a913568 -[UIApplication _runWithMainScene:transitionContext:completion:] + 1769<br> 8   UIKit                               0x000000010a910714 -[UIApplication workspaceDidEndTransaction:] + 188<br> 9   FrontBoardServices                  0x000000010d37d8c8 <strong>FBSSERIALQUEUE_IS_CALLING_OUT_TO_A_BLOCK</strong> + 24<br> 10  FrontBoardServices                  0x000000010d37d741 -[FBSSerialQueue _performNext] + 178<br> 11  FrontBoardServices                  0x000000010d37daca -[FBSSerialQueue _performNextFromRunLoopSource] + 45<br> 12  CoreFoundation                      0x000000010a484301 <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION</strong> + 17<br> 13  CoreFoundation                      0x000000010a47a22c <strong>CFRunLoopDoSources0 + 556<br> 14  CoreFoundation                      0x000000010a4796e3 </strong>CFRunLoopRun + 867<br> 15  CoreFoundation                      0x000000010a4790f8 CFRunLoopRunSpecific + 488<br> 16  UIKit                               0x000000010a90ff21 -[UIApplication _run] + 402<br> 17  UIKit                               0x000000010a914f09 UIApplicationMain + 171<br> 18  test                                0x0000000109ad1c1f main + 111<br> 19  libdyld.dylib                       0x000000010cd3892d start + 1<br> 20  ???                                 0x0000000000000001 0x0 + 1<br> ),&#x7531;&#x6B64;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x6808;&#x4FE1;&#x606F;:start-&gt;main-&gt;UIApplicationMain-&gt;-[UIApplication _run]-&gt;&#x2026;(runloop&#x76F8;&#x5173;)-&gt;&#x51C6;&#x5907;&#x7A97;&#x53E3;-&gt;<a href="&#x6DFB;&#x52A0;&#x7A97;&#x53E3;&#x7684;&#x6839;&#x89C6;&#x56FE;&#x63A7;&#x5236;&#x5668;&#x5BF9;&#x5E94;&#x7684;&#x89C6;&#x56FE;">UIWindow addRootViewControllerViewIfPossible</a> -&gt;&#x2026; &#x53EF;&#x5F97;&#x77E5;&#x9053;&#x4E00;&#x4E9B;&#x660E;&#x663E;&#x4E9B;&#x7684;&#x4FE1;&#x606F;&#xFF1A;<br> &#x9879;&#x76EE;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;Main Interface&#x4E3A;&#x67D0;&#x4E2A;storyboard, &#x90A3;&#x4E48;&#x4F60;&#x9700;&#x8981;&#x5728;&#x8BE5;storyboard&#x8BBE;&#x7F6E;&#x597D;</li>
</ol>
<hr>
<h3 id="4&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x534F;&#x8BAE;nsobject-nscopy-nsmutablecopy"><a href="#4-&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x534F;&#x8BAE;&#xFF1A;NSObject-NSCopy-NSMutableCopy" class="headerlink" title="4.&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x534F;&#x8BAE;&#xFF1A;NSObject, NSCopy, NSMutableCopy"></a>4.&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x534F;&#x8BAE;&#xFF1A;NSObject, NSCopy, NSMutableCopy</h3><p>NSObject Protocal</p>
<hr>
<h3 id="5&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5199;&#x8FDB;&#x6587;&#x4EF6;"><a href="#5-&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5199;&#x8FDB;&#x6587;&#x4EF6;" class="headerlink" title="5.&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5199;&#x8FDB;&#x6587;&#x4EF6;"></a>5.&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5199;&#x8FDB;&#x6587;&#x4EF6;</h3><ol>
<li><p>&#x7591;&#x60D1;<br>NSString <em>cacheDir = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) firstObject];<br> NSString </em>cacheContainerPath = [[cacheDir stringByAppendingPathComponent:kTagManagerCacheDirectory] stringByAppendingPathComponent:containerId];<br> [containerJsonData writeToFile:cacheContainerPath atomically:YES];</p>
<pre><code>&#x8FD9;&#x79CD;&#x5199;&#x6CD5;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x3001;&#x6587;&#x4EF6;&#x5939;&#x751F;&#x6210;&#x3002;&#x9700;&#x8981;&#x6362;&#x6210;NSFileManager&#x53BB;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x5939;&#x65B9;&#x53EF;&#x3002;&#x5982;:
</code></pre><p> NSString <em>cacheDir = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) firstObject];<br> NSString </em>containerDir = [cacheDir stringByAppendingPathComponent:kTagManagerCacheDirectory];<br> if (![[NSFileManager defaultManager] fileExistsAtPath:containerDir]) {</p>
<pre><code>[[NSFileManager defaultManager] createDirectoryAtPath:containerDir
                          withIntermediateDirectories:YES
                                           attributes:nil
                                                error:NULL];
</code></pre><p> }<br> NSString *containerPath = [containerDir stringByAppendingPathComponent:containerId];<br> [containerJsonData writeToFile:containerPath atomically:YES];</p>
</li>
<li><p>&#x731C;&#x6D4B;<br><code>NSData</code> &#x7684; <code>writeToFile</code> &#x65B9;&#x6CD5;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x76EE;&#x5F55;&#xFF1F;</p>
</li>
<li><p>&#x771F;&#x76F8;-</p>
</li>
<li><p>&#x76F8;&#x5173;&#x6587;&#x7AE0;: <a href="http://www.jianshu.com/p/fbb997eb032d" target="_blank" rel="external">http://www.jianshu.com/p/fbb997eb032d</a></p>
</li>
</ol>
<hr>
<h3 id="6&#x7531;-voidsetvalueidvalue-forkeynsstring-&#x65B9;&#x6CD5;&#x60F3;&#x5230;&#x7684;"><a href="#6-&#x7531;-void-setValue-id-value-forKey-NSString-&#x65B9;&#x6CD5;&#x60F3;&#x5230;&#x7684;" class="headerlink" title="6.&#x7531; - (void)setValue:(id)value forKey:(NSString *) &#x65B9;&#x6CD5;&#x60F3;&#x5230;&#x7684;"></a>6.&#x7531; - (void)setValue:(id)value forKey:(NSString *) &#x65B9;&#x6CD5;&#x60F3;&#x5230;&#x7684;</h3><p>&#x5982;&#x679C;&#x5E0C;&#x671B;&#x4F7F;&#x7528;&#x5B57;&#x5178;&#x53BB;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5BF9;&#x8C61;&#x505A;&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x4F5C;&#xFF0C;&#x6CA1;&#x95EE;&#x9898;&#x3002;NSKeyValueCoding &#x534F;&#x8BAE;&#x4E13;&#x95E8;&#x4E3A;&#x6B64;&#x800C;&#x751F;&#x3002;&#x4E3B;&#x8981;&#x6709;&#xFF1A;</p>
<ul>
<li>(void)setAttributesFromDictionary:(NSDictionary *)aDictionary</li>
<li>(void)updateAttributesFromDictionary:(NSDictionary *)aDictionary</li>
<li><p>(BOOL)shouldUpdateCurrentContainerWithContainerDic:(NSDictionary *)containerDic </p>
</li>
<li><p>(void)setValue:(id)value forKey:(NSString *)key</p>
</li>
<li>(void)setValue:(id)value forUndefinedKey:(NSString *)key// Invoked by setValue:forKey: when it finds no property for a given key.</li>
</ul>
<hr>
<p>2016.10.14</p>
<h3 id="7nsoperation-vs-grand-central-dispatch"><a href="#7-NSOperation-vs-Grand-Central-Dispatch" class="headerlink" title="7.NSOperation vs Grand Central Dispatch"></a>7.NSOperation vs Grand Central Dispatch</h3><table>
<thead>
<tr>
<th></th>
<th>NSOperation</th>
<th>GCD</th>
</tr>
</thead>
<tbody>
<tr>
<td>API&#x7EA7;&#x522B;</td>
<td>OC&#x7EA7;&#x522B;API</td>
<td>&#x57FA;&#x4E8E;C&#x7684;&#x4F4E;&#x7EA7;&#x522B;&#x7684;API</td>
</tr>
<tr>
<td>API&#x5F15;&#x5165;&#x65F6;&#x671F;</td>
<td>iOS2.0&#xFF0C;macOS10.5&#x3002;iOS4+&#x7531;GCD&#x5B9E;&#x73B0;</td>
<td>iOS4.0, macOS10.6</td>
</tr>
<tr>
<td>&#x901A;&#x5E38;&#x63A8;&#x8350;&#x4F18;&#x5148;&#x4F7F;&#x7528;&#x9AD8;&#x7EA7;API</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&#x4F18;&#x52BF;</td>
<td>&#x5EFA;&#x7ACB;&#x64CD;&#x4F5C;&#x7684;&#x4F9D;&#x8D56;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x3002;&#x7531;GCD&#x5B9E;&#x73B0;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x66F4;&#x5FEB;&#xFF0C;&#x66F4;&#x9177;&#xFF01;</td>
<td>API&#x53CB;&#x597D;&#x4F18;&#x96C5;&#x3001;&#x901F;&#x5EA6;&#x5FEB;&#xFF01;</td>
</tr>
<tr>
<td>&#x52A3;&#x52BF;</td>
<td>&#x5BF9;&#x8C61;&#x7EA7;&#x522B;&#xFF0C;&#x521B;&#x5EFA;&#x4E0E;&#x9500;&#x6BC1;&#x6709;&#x5F00;&#x9500;&#xFF08;&#x5BF9;&#x4E8E;&#x6E32;&#x67D3;&#x8981;&#x6C42;&#x9AD8;&#x7684;app&#x6765;&#x8BF4;&#x6709;&#x538B;&#x529B;&#xFF09;&#x3002;API&#x4E0D;&#x591F;GCD&#x4F18;&#x96C5;</td>
<td></td>
</tr>
<tr>
<td>&#x63D0;&#x9192;</td>
<td></td>
<td>&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x7684;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;block&#x5C01;&#x88C5;&#x4EFB;&#x52A1;&#xFF0C;&#x4E14;&#x4E0D;&#x9700;&#x8981;NS Operation&#x7684;&#x4EFB;&#x4F55;&#x9644;&#x52A0;&#x529F;&#x80FD;&#xFF08;&#x6BD4;&#x5982;&#x8BF4;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x8D1F;&#x8D23;&#x7684;&#x4EFB;&#x52A1;&#x4F9D;&#x8D56;&#xFF1F;&#xFF09;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>&#x603B;&#x7ED3;</strong></td>
<td>&#x4F46;&#x64CD;&#x4F5C;&#x3010;&#x4F9D;&#x8D56;&#x590D;&#x6742;&#x3011;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;</td>
<td>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;</td>
</tr>
</tbody>
</table>
<h2 id="tools"><a href="#TOOLS" class="headerlink" title="TOOLS"></a>TOOLS</h2><h3 id="1hosts&#x6587;&#x4EF6;&#x4FEE;&#x6539;"><a href="#1-Hosts&#x6587;&#x4EF6;&#x4FEE;&#x6539;" class="headerlink" title="1.Hosts&#x6587;&#x4EF6;&#x4FEE;&#x6539;"></a>1.Hosts&#x6587;&#x4EF6;&#x4FEE;&#x6539;</h3><p>macOS: /etc/hosts or /private/etc/hosts vi&#x6253;&#x5F00;&#x4FEE;&#x6539;&#x5373;&#x53EF;<br>iOS:(&#x9700;&#x8981;&#x8D8A;&#x72F1;) iFile, /etc/hosts ,&#x4F7F;&#x7528;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x6253;&#x5F00;&#x4FEE;&#x6539;&#x5373;&#x53EF;</p>
<hr>
<h3 id="2ios&#x4F7F;&#x7528;charles&#x6293;&#x5305;&#x5E76;&#x7BE1;&#x6539;&#x8FD4;&#x56DE;&#x6570;&#x636E;"><a href="#2-iOS&#x4F7F;&#x7528;Charles&#x6293;&#x5305;&#x5E76;&#x7BE1;&#x6539;&#x8FD4;&#x56DE;&#x6570;&#x636E;" class="headerlink" title="2.iOS&#x4F7F;&#x7528;Charles&#x6293;&#x5305;&#x5E76;&#x7BE1;&#x6539;&#x8FD4;&#x56DE;&#x6570;&#x636E;"></a>2.iOS&#x4F7F;&#x7528;Charles&#x6293;&#x5305;&#x5E76;&#x7BE1;&#x6539;&#x8FD4;&#x56DE;&#x6570;&#x636E;</h3><p>from:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http:<span class="regexp">//</span>www.cnblogs.com<span class="regexp">/dsxniubility/</span>p<span class="regexp">/4621314.html</span></div></pre></td></tr></table></figure>
<h3 id="3&#x4E00;&#x4E9B;&#x5907;&#x5FD8;"><a href="#3-&#x4E00;&#x4E9B;&#x5907;&#x5FD8;" class="headerlink" title="3.&#x4E00;&#x4E9B;&#x5907;&#x5FD8;"></a>3.&#x4E00;&#x4E9B;&#x5907;&#x5FD8;</h3><ol>
<li><p>Xcode&#x7528;&#x6237;&#x914D;&#x7F6E;&#x76F8;&#x5173;&#x8DEF;&#x5F84;&#xFF1A;</p>
<blockquote>
<p>~/Library/Developer/Xcode</p>
<ol>
<li>&#x5173;&#x4E8E;&#x7528;&#x6237;&#x7684;&#x4E00;&#x4E9B;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#xFF08;CodeSnippets&#x3001;&#x4E3B;&#x9898;&#x3001;&#x5FEB;&#x6377;&#x952E;&#x7B49;&#xFF09;&#x6587;&#x4EF6;&#xFF0C;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;&#xFF1A;</li>
</ol>
<p><code>UserData</code></p>
<p>~/Library/Developer/Xcode/UserData</p>
</blockquote>
<ol>
<li><p>&#x8FDB;&#x884C;codeSign&#x7684;profile&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#xFF1A;</p>
<blockquote>
<p>~/Library/MobileDevice/Provisioning Profiles</p>
</blockquote>
</li>
<li><p>building&#x65F6;&#x4EA7;&#x751F;&#x7684;&#x7F16;&#x8BD1;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;&#xFF1A;</p>
<blockquote>
<p><code>DerivedData</code></p>
<p>~/Library/Developer/Xcode/DerivedData</p>
</blockquote>
</li>
<li><p>&#x53D6;&#x51B3;&#x4E8E;Xcode&#x652F;&#x6301;&#x7684;iOS&#x7248;&#x672C;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;&#xFF1A;</p>
<blockquote>
<p><code>iOS DeviceSupport</code></p>
<p>~/Library/Developer/Xcode/iOS DeviceSupport</p>
</blockquote>
</li>
</ol>
</li>
<li><p>&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</p>
<ol>
<li><p>Beta&#x7248;&#x672C;&#x7684;Xcode&#x3001;iOS&#x3001;macOS&#x7B49;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;</p>
<blockquote>
<p><a href="https://developer.apple.com/download/" target="_blank" rel="external">https://developer.apple.com/download/</a></p>
</blockquote>
</li>
</ol>
</li>
</ol>
<h3 id="4coredata&#x5B66;&#x4E60;"><a href="#4-CoreData&#x5B66;&#x4E60;" class="headerlink" title="4.CoreData&#x5B66;&#x4E60;"></a>4.CoreData&#x5B66;&#x4E60;</h3><h3 id="5xcode-server"><a href="#5-Xcode-Server" class="headerlink" title="5.Xcode Server"></a>5.Xcode Server</h3><p>&#x53EF;&#x6301;&#x7EED;&#x96C6;&#x6210;</p>
<h2 id="error-log"><a href="#ERROR-LOG" class="headerlink" title="ERROR LOG"></a>ERROR LOG</h2><h3 id="1arc&#x76F8;&#x5173;"><a href="#1-ARC&#x76F8;&#x5173;" class="headerlink" title="1.ARC&#x76F8;&#x5173;"></a>1.ARC&#x76F8;&#x5173;</h3><p>&#x73B0;&#x8C61;&#xFF1A;<code>&apos;retain&apos; is unavailable: not available in automatic reference counting mode</code></p>
<p>&#x5206;&#x6790;&#xFF1A;&#x5728;&#x9ED8;&#x8BA4;&#x652F;&#x6301;ARC&#x7684;&#x9879;&#x76EE;&#x91CC;&#x4F7F;&#x7528;&#x4E86;&#x975E;ARC&#x4E0B;&#x7684;&#x5BF9;&#x8C61;&#x5F15;&#x7528;&#x3001;&#x91CA;&#x653E;&#x7B49;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#xFF08;retain&#x3001;release&#x7B49;&#xFF09;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#xFF1A;&#x5BF9;&#x6307;&#x5B9A;&#x6E90;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x975E;ARC&#x7684;&#x7F16;&#x8BD1;&#x6807;&#x5FD7; <code>-fno-objc-arc</code>&#x3002;</p>
<h3 id="2-&#x9884;&#x7F16;&#x8BD1;&#x5934;&#x6587;&#x4EF6;pch"><a href="#2-&#x9884;&#x7F16;&#x8BD1;&#x5934;&#x6587;&#x4EF6;-pch" class="headerlink" title="2. &#x9884;&#x7F16;&#x8BD1;&#x5934;&#x6587;&#x4EF6;.pch"></a>2. &#x9884;&#x7F16;&#x8BD1;&#x5934;&#x6587;&#x4EF6;.pch</h3><p>&#x73B0;&#x8C61;&#xFF1A;</p>
<blockquote>
<p>XXX/Foundation.framework/Headers/NSObjCRuntime.h:492:1: Expected identifier or &#x2018;(&#x2018;</p>
<p>XXX/Foundation.framework/Headers/NSObjCRuntime.h:494:9: Unknown type name &#x2018;NSString&#x2019;</p>
<p>XXX/Foundation.framework/Headers/NSObjCRuntime.h:503:50: Declaration of &#x2018;Protocol&#x2019; must be imported from module &#x2018;ObjectiveC.runtime&#x2019; before it is required</p>
<p>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS10.2.sdk/usr/include/objc/module.map:8:10: Module &#x2018;ObjectiveC.NSObject&#x2019; requires feature &#x2018;objc&#x2019;</p>
<p>XXX/UIKit.framework/Headers/UIAccelerometer.h:8:9: Could not build module &#x2018;Foundation&#x2019;</p>
<p>/Users/samingzhong/sunteng/&#x9879;&#x76EE;-s/le173_zx/Le173/Le173.pch:21:9: Could not build module &#x2018;UIKit&#x2019;</p>
</blockquote>
<p>&#x5206;&#x6790;&#xFF1A;&#x9884;&#x7F16;&#x8BD1;&#x5934;&#x6587;&#x4EF6;&#x7F16;&#x5199;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#xFF1A;</p>
<h3 id="3&#x7B26;&#x53F7;&#x91CD;&#x590D;"><a href="#3-&#x7B26;&#x53F7;&#x91CD;&#x590D;" class="headerlink" title="3.&#x7B26;&#x53F7;&#x91CD;&#x590D;"></a>3.&#x7B26;&#x53F7;&#x91CD;&#x590D;</h3><p>&#x73B0;&#x8C61;&#xFF1A;</p>
<blockquote>
<p>duplicate symbol _OBJC<em>CLASS</em>$_HttpRequest in:</p>
<p>&#x200B;    /Users/samingzhong/sunteng/&#x9879;&#x76EE;-s/le173_zx/AdViewSDK-3.4.1/AdNetworks/Waps/lib/apilib.a(HttpRequest.o)</p>
<p>&#x200B;    /Users/samingzhong/sunteng/&#x9879;&#x76EE;-s/le173_zx/AdViewSDK-3.4.1/AdNetworks/Adwo/lib/iflyMSC.framework/iflyMSC(HttpRequest.o)</p>
<p>duplicate symbol _OBJC<em>METACLASS</em>$_HttpRequest in:</p>
<p>&#x200B;    /Users/samingzhong/sunteng/&#x9879;&#x76EE;-s/le173_zx/AdViewSDK-3.4.1/AdNetworks/Waps/lib/apilib.a(HttpRequest.o)</p>
<p>&#x200B;    /Users/samingzhong/sunteng/&#x9879;&#x76EE;-s/le173_zx/AdViewSDK-3.4.1/AdNetworks/Adwo/lib/iflyMSC.framework/iflyMSC(HttpRequest.o)</p>
<p>ld: 2 duplicate symbols for architecture arm64</p>
</blockquote>
<p>&#x89E3;&#x51B3;&#xFF1A;</p>
<ol>
<li>&#x5220;&#x9664;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x5E93;&#x3002;&#xFF08;&#x6B64;&#x6848;&#x4F8B;&#x53EF;&#x4EE5;&#x5220;&#x6389;apilib.a&#xFF09;</li>
<li>&#x5254;&#x9664;&#x4E00;&#x4EFD;&#x91CD;&#x590D;&#x7B26;&#x53F7;&#x7684;&#x76EE;&#x6807;&#x6587;&#x4EF6;&#x3002;&#xFF08;&#x6B64;&#x6848;&#x4F8B;&#x53EF;&#x4EE5;&#x5254;&#x9664;HttpRequest.o&#xFF09;</li>
</ol>
<h4 id="31-&#x5254;&#x9664;&#x9759;&#x6001;&#x5E93;&#x7684;&#x67D0;&#x4E9B;&#x76EE;&#x6807;&#x6587;&#x4EF6;"><a href="#3-1-&#x5254;&#x9664;&#x9759;&#x6001;&#x5E93;&#x7684;&#x67D0;&#x4E9B;&#x76EE;&#x6807;&#x6587;&#x4EF6;" class="headerlink" title="3.1 &#x5254;&#x9664;&#x9759;&#x6001;&#x5E93;&#x7684;&#x67D0;&#x4E9B;&#x76EE;&#x6807;&#x6587;&#x4EF6;"></a>3.1 &#x5254;&#x9664;&#x9759;&#x6001;&#x5E93;&#x7684;&#x67D0;&#x4E9B;&#x76EE;&#x6807;&#x6587;&#x4EF6;</h4><h5 id="&#x7B80;&#x8981;"><a href="#&#x7B80;&#x8981;" class="headerlink" title="&#x7B80;&#x8981;"></a>&#x7B80;&#x8981;</h5><ol>
<li><blockquote>
<p> lipo -thin arm64 libA_universal.a -o lib_A_arm64.a</p>
<p> lipo -thin armv7 libA_universal.a -o lib_A_armv7.a</p>
</blockquote>
</li>
<li><p>&#x7528; <code>lipo</code> &#x5C06;&#x901A;&#x7528;&#x67B6;&#x6784;&#x7684;&#x9759;&#x6001;&#x5E93;&#x5206;&#x79BB;&#x51FA;&#x5404;&#x4E2A;&#x67B6;&#x6784;&#x7684;&#x9759;&#x6001;&#x5E93;</p>
</li>
<li><p>&#x200B;</p>
</li>
</ol>
<p>&#x9759;&#x6001;&#x5E93;&#x6587;&#x4EF6;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x538B;&#x7F29;&#x5305;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x6765;&#x8BF4;&#x662F;&#x6240;&#x6709;&#x7684;&#x76EE;&#x6807;&#x6587;&#x4EF6;(.o&#x540E;&#x7F00;)&#x6253;&#x5305;&#x540E;&#x7684;&#x96C6;&#x5408;&#x6587;&#x4EF6;&#x3002;</p>
<p>iOS&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x51E0;&#x4E2A;&#x673A;&#x5668;&#x67B6;&#x6784;&#xFF08;&#x5982;armv64&#x5BF9;&#x5E94;iPhone5s/iPad Air, iPad mini2&#x4EE5;&#x540E;&#x7684;&#x673A;&#x5668;, &#x5173;&#x4E8E;iOS&#x67B6;&#x6784;&#x76F8;&#x5173;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8BE6;&#x60C5;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="https://samingzhong.github.io/2016/12/09/%E5%85%B3%E4%BA%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E3%80%81%E5%BA%93%E7%B1%BB%E5%9E%8B%E6%96%87%E4%BB%B6/#11-&#x4EC0;&#x4E48;&#x662F;&#x67B6;&#x6784;">&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;</a>&#xFF09;&#xFF0C;&#x800C;Xcode&#x5728;&#x4E3A;&#x4E00;&#x4E2A;Generic iOS Device&#xFF08;&#x901A;&#x7528;&#x7684;iOS&#x8BBE;&#x5907;&#xFF0C;&#x5982;iPhone&#xFF0C;iPad&#x6216;&#x8005;iPod&#x8BBE;&#x5907;&#xFF0C;&#x4E14;&#x5305;&#x62EC;&#x5B83;&#x4EEC;&#x7684;&#x65B0;&#x6B3E;&#x3001;&#x65E7;&#x6B3E;&#xFF09;&#x7F16;&#x8BD1;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x7ECF;&#x8FC7;&#x8BB8;&#x591A;&#x590D;&#x6742;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x8BE6;&#x7EC6;&#x53EF;&#x67E5;&#x770B;<a href="https://objccn.io/issue-6-1/" target="_blank" rel="external">&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;</a>&#x3002;</p>
<p>Linux&#x4E0A;&#x5F52;&#x6863;&#x76EE;&#x6807;&#x6587;&#x4EF6;&#x4E3A;&#x9759;&#x6001;&#x5E93;(&#x521B;&#x5EFA;&#x9759;&#x6001;&#x5E93;)&#x7528;&#x7684;&#x662F; <code>ar</code> &#x547D;&#x4EE4;&#xFF0C;&#x89E3;&#x5F52;&#x6863;&#x4E5F;&#x662F;&#x8FD9;&#x4E2A;&#x3002;</p>
<p>macOS&#x4E0A;&#x76F4;&#x63A5;&#x7528; <code>libtool</code> &#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x9759;&#x6001;&#x5E93;&#xFF08;&#x6216;&#x8005;&#x52A8;&#x6001;&#x5E93;&#xFF09;&#x3001;&#x6216;&#x8005;&#x5408;&#x5E76;&#x591A;&#x4E2A;&#x67B6;&#x6784;&#x7684;&#x9759;&#x6001;&#x5E93;&#xFF08;lib_armv7.a + lib_arm64.a -&gt; lib_universal.a &#xFF09;&#xFF1B;&#x591A;&#x67B6;&#x6784;&#x62C6;&#x5206;/&#x5206;&#x79BB;&#x5355;&#x67B6;&#x6784;&#x4E5F;&#x662F;&#x7528; <code>libtool</code> &#xFF0C;&#x4F46;&#x5355;&#x4E2A;&#x67B6;&#x6784;&#x7684;&#x9759;&#x6001;&#x5E93;&#x7684;&#x89E3;&#x5F52;&#x6863;&#xFF08;<em>.a -&gt; </em>.o&#xFF09;&#x3002;</p>
<h3 id="4&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;"><a href="#4-&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;" class="headerlink" title="4.&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;"></a>4.&#x7B26;&#x53F7;&#x627E;&#x4E0D;&#x5230;</h3><p>&#x73B0;&#x8C61;&#xFF1A;</p>
<blockquote>
<p>  &#x201C;_OBJC<em>CLASS</em>$_EADBannerView&#x201D;, referenced from:</p>
<p>  &#x200B;      objc-class-ref in AdViewAdapterYJF.o</p>
<p>  &#x201C;_OBJC<em>CLASS</em>$_EADSplashAd&#x201D;, referenced from:</p>
<p>  &#x200B;      objc-class-ref in AdSplashAdapterYJF.o</p>
<p>  &#x201C;_OBJC<em>CLASS</em>$_EADInterstitialAd&#x201D;, referenced from:</p>
<p>  &#x200B;      objc-class-ref in AdInstlAdapterYJF.o</p>
<p>  &#x201C;_OBJC<em>CLASS</em>$_EADConfig&#x201D;, referenced from:</p>
<p>  &#x200B;      objc-class-ref in AdInstlAdapterYJF.o</p>
<p>  &#x200B;      objc-class-ref in AdSplashAdapterYJF.o</p>
<p>  &#x200B;      objc-class-ref in AdViewAdapterYJF.o</p>
<p>  ld: symbol(s) not found for architecture arm64</p>
<p>  clang: error: linker command failed with exit code 1 (use -v to see invocation)</p>
</blockquote>
<p><strong>ld: symbol(s) not found for architecture arm64</strong></p>
<h3 id="5xcode-signing-error"><a href="#5-Xcode-Signing-Error" class="headerlink" title="5.Xcode Signing Error!!"></a>5.Xcode Signing Error!!</h3><blockquote>
<p>&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x592A;&#x7EA0;&#x7ED3;&#xFF0C;&#x8FD8;&#x662F;&#x76F4;&#x63A5;&#x52FE;&#x9009; <code>Automatically manage signing</code> &#x597D;&#x4E9B;&#x3002;</p>
</blockquote>
<h4 id="xcode-signing&#x9009;&#x9879;"><a href="#Xcode-Signing&#x9009;&#x9879;" class="headerlink" title="Xcode Signing&#x9009;&#x9879;"></a>Xcode Signing&#x9009;&#x9879;</h4><p>Xcode&#x8981;&#x6C42;&#x771F;&#x673A;&#x6D4B;&#x8BD5;&#x3001;&#x6253;&#x5305;&#x53D1;&#x5E03;&#x90FD;&#x5FC5;&#x987B;&#x8981;&#x5BF9;&#x5E94;&#x7528;&#x8FDB;&#x884C;&#x7B7E;&#x540D;&#xFF0C;&#x4EE5;&#x9632;&#x5E94;&#x7528;&#x88AB;&#x4EFB;&#x610F;&#x8BBE;&#x5907;&#x5B89;&#x88C5;&#x3002;</p>
<p>Xcode Signing&#x9009;&#x9879;&#x91CC;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<blockquote>
<p>&#xFF08;1&#xFF09;Provisioning Profile&#xFF1A;</p>
<p>&#xFF08;2&#xFF09;Team&#xFF1A;</p>
<p>&#xFF08;3&#xFF09;Signing Certificate&#xFF1A;</p>
</blockquote>
<p>&#xFF08;1&#xFF09;&#x8BA9;&#x4F60;&#x9009;&#x62E9;&#x7B7E;&#x540D;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x901A;&#x5E38;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x914D;&#x7F6E;&#x6B63;&#x786E;&#xFF0C;&#x5C31;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<p>&#x200B;    &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E3B;&#x8981;&#x662F;&#x5BF9; <code>&#x5E94;&#x7528;&#x552F;&#x4E00;&#x6807;&#x8BC6;</code>&#x3001;<code>&#x8BC1;&#x4E66;</code>&#x3001;<code>&#x5141;&#x8BB8;&#x5B89;&#x88C5;&#x7684;&#x8BBE;&#x5907;&#x7F16;&#x7801;&#x5217;&#x8868;</code> &#x505A;&#x4E00;&#x4E2A;&#x7ED1;&#x5B9A;&#xFF0C;&#x5982;&#xFF1A;</p>
<p><img src="../assert/images/2017/provisioning-profile.png" alt="provisioning-profile"></p>
<p>&#x8FD9;&#x7C7B; <code>*.mobileprovision</code> &#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x4E8E; <code>~/Library/MobileDevice/Provisioning Profiles</code>&#xFF0C;&#x5728;Apple Develop&#x7F51;&#x7AD9;&#x540E;&#x53F0;&#x914D;&#x7F6E;&#x597D;&#x8FD9;&#x4E2A;Provision Profile&#x540E;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;:</p>
<ul>
<li>&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x76EE;&#x5F55; -<code>~/Library/MobileDevice/Provisioning Profiles</code> &#x3002;Xcode&#x5C31;&#x80FD;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x8BE5;&#x6587;&#x4EF6;&#x3002;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x70B9;&#x51FB;import profile&#x2026; &#x627E;&#x5230;&#x76EE;&#x6807;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5373;&#x53EF;&#x5BFC;&#x5165;&#x4F7F;&#x7528;&#x3002;</li>
<li>&#x5230;preference - Apple IDs&#x91CC;&#x8BA9;Xcode&#x81EA;&#x5DF1;&#x4E0B;&#x8F7D;&#xFF08;&#x5F53;&#x7136;&#xFF0C;&#x524D;&#x63D0;&#x4E5F;&#x662F;&#x8981;&#x63D0;&#x524D;&#x914D;&#x7F6E;&#x597D;&#x8FD9;&#x4E2A;provision profile&#x6587;&#x4EF6;&#xFF09;&#x3002;</li>
</ul>
<h4 id="&#x914D;&#x7F6E;&#x4E00;&#x4E2A;provision-profile&#x6587;&#x4EF6;"><a href="#&#x914D;&#x7F6E;&#x4E00;&#x4E2A;provision-profile&#x6587;&#x4EF6;" class="headerlink" title="&#x914D;&#x7F6E;&#x4E00;&#x4E2A;provision profile&#x6587;&#x4EF6;"></a>&#x914D;&#x7F6E;&#x4E00;&#x4E2A;provision profile&#x6587;&#x4EF6;</h4><p>&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#x7684;&#x7406;&#x89E3;&#x4E3A;&#xFF1A;</p>
<blockquote>
<p><code>provision profile</code>  = <code>(1)Certificates</code> + <code>(2)App ID</code> + <code>(3)Type</code> + <code>(4)Devices</code></p>
</blockquote>
<ol>
<li>&#x8BC1;&#x4E66;&#x3002;&#x4E0D;&#x540C;&#x7528;&#x9014;&#x7684;provision profile&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8BC1;&#x4E66;&#x3002;<ol>
<li>&#x6D4B;&#x8BD5;&#xFF0C;&#x7528;&#x5F00;&#x53D1;&#x8BC1;&#x4E66;&#x3002;</li>
<li>&#x4E0A;&#x7EBF;&#x53D1;&#x5E03;&#xFF0C;&#x7528;&#x53D1;&#x5E03;&#x8BC1;&#x4E66;&#x3002;</li>
</ol>
</li>
<li>&#x9700;&#x8981;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;AppID&#x3002;</li>
<li>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7528;&#x9014;/&#x7C7B;&#x578B;&#x3002;&#x5F00;&#x53D1; or &#x53D1;&#x5E03;&#x3002;</li>
<li>&#x652F;&#x6301;&#x7684;&#x6D4B;&#x8BD5;&#x8BBE;&#x5907;&#x5217;&#x8868;&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x6253;&#x5305;&#x51FA;&#x6765;&#xFF0C;&#x7ED9;&#x6D4B;&#x8BD5;&#x4EBA;&#x5458;&#x6D4B;&#x8BD5;&#x4F7F;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x8BF7;&#x6CE8;&#x610F;&#x786E;&#x4FDD;&#x6D4B;&#x8BD5;&#x7684;&#x8BBE;&#x5907;&#x5728;&#x5217;&#x8868;&#x91CC;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5728;&#x7684;&#x8BDD;&#xFF0C;&#x66F4;&#x65B0;&#x4E00;&#x4E0B;&#x5217;&#x8868;&#xFF0C;&#x91CD;&#x65B0;&#x751F;&#x6210;provision profile&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;Xcode&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;&#x4E00;&#x4E0B;&#x5373;&#x53EF;&#x3002;</li>
</ol>
<p>&#x8FD9;&#x91CC;&#x8FB9;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;&#x53EF;&#x80FD;&#x662F;&#x8BC1;&#x4E66;&#x4E86;&#x3002;&#x786E;&#x5B9A;&#x4E00;&#x4E0B;&#x51E0;&#x9879;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x529F;&#x80FD;&#x7684;&#x8BC1;&#x4E66;&#xFF1A;</p>
<ol>
<li>&#x54EA;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x8BC1;&#x4E66;&#x3002;<ol>
<li>&#x5F00;&#x53D1;<ol>
<li>&#x7528;&#x4E8E;&#x7B7E;&#x540D;&#x5F00;&#x53D1;&#x7248;&#x672C;&#x7684;&#x5E94;&#x7528;&#x3002;</li>
<li>&#x7528;&#x4E8E;&#x82F9;&#x679C;&#x63A8;&#x9001;&#x6D88;&#x606F;&#x3002;</li>
</ol>
</li>
<li>&#x53D1;&#x5E03;<ol>
<li>&#x53D1;&#x5E03;&#x5230;App Store&#x6216;&#x8005;Ad Hoc&#x3002;</li>
<li>&#x7528;&#x4E8E;&#x82F9;&#x679C;&#x63A8;&#x9001;&#x6D88;&#x606F;&#x3002;</li>
<li>&#x94B1;&#x5305;&#x76F8;&#x5173;&#x3002;</li>
<li>Apple Pay&#x3002;</li>
<li>&#x5546;&#x54C1;&#x6807;&#x8BC6;&#x3002;</li>
<li>&#x5176;&#x4ED6;&#x3002;</li>
</ol>
</li>
</ol>
</li>
<li>&#x521B;&#x5EFA;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;&#x6587;&#x4EF6;-CSR&#x3002;</li>
<li>&#x4E0A;&#x4F20;CSR&#x6587;&#x4EF6;&#xFF0C;&#x83B7;&#x5F97;&#x8BC1;&#x4E66;&#xFF08;&#x5185;&#x9644;&#x5E26;&#x79C1;&#x94A5;&#xFF09;&#x3002;</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/能工巧匠集/">能工巧匠集</a>►<a class="article-category-link" href="/categories/能工巧匠集/iOS开发/">iOS开发</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/30/UIKit/关于UIView的translatesAutoresizingMaskIntoConstraints 属性/" title="关于UIView的translatesAutoresizingMaskIntoConstraints属性" itemprop="url">关于UIView的translatesAutoresizingMaskIntoConstraints属性</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2016-08-30T08:17:15.000Z" itemprop="datePublished"> 发表于 2016-08-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<ul>
<li><a href="#&#x7406;&#x89E3;">&#x7406;&#x89E3;</a></li>
</ul>
<!-- tocstop -->
<blockquote>
<p>&#x4E00;&#x4E2A;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x5C06;&#x89C6;&#x56FE;&#x7684;autoresizing mask&#x8F6C;&#x6362;&#x6210;Auto Layout constraints&#x7684;&#x5E03;&#x5C14;&#x503C;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x679C;&#x8BE5;&#x503C;&#x4E3A; <code>YES</code> &#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x7CFB;&#x5217;constraints&#x6765;&#x66FF;&#x4EE3;&#x89C6;&#x56FE;&#x7684;autoresizing mask&#x3002;</p>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;autoresizing mask&#x7EA6;&#x675F;&#x5B8C;&#x5168;&#x6307;&#x5B9A;&#x89C6;&#x56FE;&#x7684;&#x5C3A;&#x5BF8;&#x548C;&#x4F4D;&#x7F6E;&#xFF1B;&#x56E0;&#x6B64;&#x4F60;&#x6CA1;&#x6CD5;&#x589E;&#x52A0;&#x5176;&#x4ED6;&#x7EA6;&#x675F;&#x6765;&#x4FEE;&#x6539;&#x89C6;&#x56FE;&#x7684;&#x5C3A;&#x5BF8;&#x548C;&#x4F4D;&#x7F6E;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x4F7F;&#x7528;Auto Layout&#x6765;&#x52A8;&#x6001;&#x8BA1;&#x7B97;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x6216;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x8981;&#x628A;&#x4F60;&#x7684;&#x89C6;&#x56FE;&#x7684;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A; <code>NO</code> &#xFF0C;&#x7136;&#x540E;&#x4E3A;&#x4F60;&#x7684;&#x8FD9;&#x4E2A;&#x89C6;&#x56FE;&#x589E;&#x52A0;&#x5B8C;&#x5907;&#x7684;&#x7EA6;&#x675F;&#x3002;</p>
<p>&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x521B;&#x5EFA;&#x7684;&#x89C6;&#x56FE;&#xFF0C;&#x8BE5;&#x503C;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E3A; <code>YES</code> &#x3002;&#x5982;&#x679C;&#x662F;&#x5728;IB&#x91CC;&#x6DFB;&#x52A0;&#x89C6;&#x56FE;&#xFF0C;&#x90A3;&#x4E48;&#x89C6;&#x56FE;&#x7684;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x4F1A;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A; <code>NO</code> &#x3002;</p>
<h2 id="&#x7406;&#x89E3;"><a href="#&#x7406;&#x89E3;" class="headerlink" title="&#x7406;&#x89E3;"></a>&#x7406;&#x89E3;</h2><blockquote>
<p>&#x5982;&#x679C;&#x662F;&#x4ECE;&#x4EE3;&#x7801;&#x5C42;&#x9762;&#x5F00;&#x59CB;&#x4F7F;&#x7528;<strong>Autolayout</strong>,&#x9700;&#x8981;&#x5BF9;&#x4F7F;&#x7528;&#x7684;<strong>View</strong>&#x7684;<strong>translatesAutoresizingMaskIntoConstraints</strong>&#x7684;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;NO.&#x5373;&#x53EF;&#x5F00;&#x59CB;&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x6DFB;&#x52A0;Constraint,&#x5426;&#x5219;View&#x8FD8;&#x662F;&#x4F1A;&#x6309;&#x7167;&#x4EE5;&#x5F80;&#x7684;autoresizingMask&#x8FDB;&#x884C;&#x8BA1;&#x7B97;.<br>&#x800C;&#x5728;<strong>Interface Builder</strong>&#x4E2D;&#x52FE;&#x9009;&#x4E86;<strong>Use Autolayout</strong>,IB&#x751F;&#x6210;&#x7684;&#x63A7;&#x4EF6;&#x7684;<strong>translatesAutoresizingMaskIntoConstraints</strong>&#x5C5E;&#x6027;&#x90FD;&#x4F1A;&#x88AB;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;NO.    </p>
<p>-text from <a href="http://blog.csdn.net/ysy441088327/article/details/12558097/" target="_blank" rel="external">here</a></p>
</blockquote>
<p>autoresizing mask&#x4E0E;Auto Layout&#x5E03;&#x5C40;&#x7EA6;&#x675F;&#x5C5E;&#x4E8E;&#x4E24;&#x5957;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F46;&#x5141;&#x8BB8;&#x524D;&#x8005;&#x8F6C;&#x6362;&#x6210;&#x540E;&#x8005;&#x3002;&#x9ED8;&#x8BA4;&#x7684;YES&#x4E5F;&#x5C31;&#x662F;autoresizing mask&#x5C06;&#x4F1A;&#x8F6C;&#x6362;auto layout&#x3002;&#x7B80;&#x5355;&#x7684;&#x5E03;&#x5C40;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x524D;&#x8005;&#xFF0C;&#x4F46;&#x662F;&#x590D;&#x6742;&#x7684;&#x5E03;&#x5C40;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x4F7F;&#x7528;Auto Layout&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x628A;&#x8BE5;&#x89C6;&#x56FE;&#x7684; <code>translatesAutoresizingMaskIntoConstraints</code> &#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x6210;NO&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x5F00;&#x542F;Auto Layout&#x7684;&#x6548;&#x679C;&#xFF08;&#x540C;&#x65F6;&#x4F1A;&#x7981;&#x7528;autoresizing mask&#xFF09;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/能工巧匠集/">能工巧匠集</a>►<a class="article-category-link" href="/categories/能工巧匠集/iOS开发/">iOS开发</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/autoresizing-mask/">autoresizing mask</a><a href="/tags/Auto-Layout/">Auto Layout</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/16/招聘:应聘/《招聘一个靠谱的iOS》面试题参考答案（下）/" title="《招聘一个靠谱的 iOS》—参考答案（下）" itemprop="url">《招聘一个靠谱的 iOS》—参考答案（下）</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="晓明童鞋" target="_blank" itemprop="author">晓明童鞋</a>
		
  <p class="article-time">
    <time datetime="2016-08-16T06:51:15.000Z" itemprop="datePublished"> 发表于 2016-08-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- toc -->
<ul>
<li><a href="#&#x7D22;&#x5F15;">&#x7D22;&#x5F15;</a><ul>
<li><a href="#25-_objc_msgforward&#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;">25. <code>_objc_msgForward</code>&#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;</a></li>
<li><a href="#26-runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil">26. runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil&#xFF1F;</a></li>
<li><a href="#27-&#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x4E3A;&#x4EC0;&#x4E48;">27. &#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</a></li>
<li><a href="#28-runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;">28. runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF1F;</a></li>
<li><a href="#29-runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;">29. runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</a></li>
<li><a href="#30-&#x4EE5;-scheduledtimerwithtimeinterval&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#x4E3A;&#x4EC0;&#x4E48;&#x5982;&#x4F55;&#x89E3;&#x51B3;">30. &#x4EE5;+ scheduledTimerWithTimeInterval&#x2026;&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#xFF0C;&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;&#xFF0C;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</a></li>
<li><a href="#31-&#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;">31. &#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;</a></li>
<li><a href="#32-objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;">32. objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#xFF1F;</a></li>
<li><a href="#33-arc&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;">33. ARC&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;&#xFF1F;</a></li>
<li><a href="#34-&#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewdidload&#x4E2D;&#x521B;&#x5EFA;">34. &#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#xFF1F;&#xFF08;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewDidLoad&#x4E2D;&#x521B;&#x5EFA;&#xFF09;</a></li>
<li><a href="#35-bad_access&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;">35. BAD_ACCESS&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;&#xFF1F;</a></li>
<li><a href="#36-&#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;">36. &#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;&#xFF1F;</a></li>
<li><a href="#37-&#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x5982;&#x4F55;&#x89E3;&#x51B3;">37. &#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#xFF0C;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</a></li>
<li><a href="#38-&#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;">38. &#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF1F;</a></li>
<li><a href="#39-&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block-api&#x5982;uiview&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;">39. &#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block api&#xFF08;&#x5982;UIView&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#xFF09;&#xFF0C;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;&#xFF1F;</a></li>
<li><a href="#40-gcd&#x7684;&#x961F;&#x5217;dispatch_queue_t&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;">40. GCD&#x7684;&#x961F;&#x5217;&#xFF08;<code>dispatch_queue_t</code>&#xFF09;&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1F;</a></li>
<li><a href="#41-&#x5982;&#x4F55;&#x7528;gcd&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;">41. &#x5982;&#x4F55;&#x7528;GCD&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#xFF1F;&#xFF08;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;&#xFF09;</a></li>
<li><a href="#42-dispatch_barrier_async&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;">42. <code>dispatch_barrier_async</code>&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</a></li>
<li><a href="#43-&#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;dispatch_get_current_queue">43. &#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;<code>dispatch_get_current_queue</code>&#xFF1F;</a></li>
<li><a href="#44-&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;">44. &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF1F;</a></li>
<li><a href="#45-addobserverforkeypathoptionscontext&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;kvo&#x56DE;&#x8C03;">45. addObserver:forKeyPath:options:context:&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;KVO&#x56DE;&#x8C03;&#xFF1F;</a></li>
<li><a href="#46-&#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;kvo">46. &#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;KVO</a></li>
<li><a href="#47-&#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;-nsstring-_foo-&#x8C03;&#x7528;setvalueforkey&#x65F6;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F;-_foo-&#x4F5C;&#x4E3A;key">47. &#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF; <code>NSString *_foo</code> &#xFF0C;&#x8C03;&#x7528;setValue:forKey:&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F; <code>_foo</code> &#x4F5C;&#x4E3A;key&#xFF1F;</a></li>
<li><a href="#48-kvc&#x7684;keypath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;">48. KVC&#x7684;keyPath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;</a></li>
<li><a href="#49-kvc&#x548C;kvo&#x7684;keypath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;">49. KVC&#x548C;KVO&#x7684;keyPath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;&#xFF1F;</a></li>
<li><a href="#50-&#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;kvo&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;kvo&#x5B9E;&#x73B0;">50. &#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;KVO&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;KVO&#x5B9E;&#x73B0;&#xFF1F;</a></li>
<li><a href="#51-apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;kvo">51. apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;KVO&#xFF1F;</a></li>
<li><a href="#52-iboutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak">52. IBOutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak?</a></li>
<li><a href="#53-ib&#x4E2D;user-defined-runtime-attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;">53. IB&#x4E2D;User Defined Runtime Attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;</a></li>
<li><a href="#54-&#x5982;&#x4F55;&#x8C03;&#x8BD5;bad_access&#x9519;&#x8BEF;">54. &#x5982;&#x4F55;&#x8C03;&#x8BD5;BAD_ACCESS&#x9519;&#x8BEF;</a></li>
<li><a href="#55-lldbgdb&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;">55. lldb&#xFF08;gdb&#xFF09;&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#xFF1F;</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<p><a href="http://blog.sunnyxx.com/2015/07/04/ios-interview/" target="_blank" rel="external">&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684; iOS&#x300B;</a>&#x2014;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x9762;&#x8BD5;&#x9898;&#x6765;&#x6E90;&#x662F;<a href="http://weibo.com/u/1364395395" target="_blank" rel="external">&#x5FAE;&#x535A;@&#x6211;&#x5C31;&#x53EB;Sunny&#x600E;&#x4E48;&#x4E86;</a>&#x7684;&#x8FD9;&#x7BC7;&#x535A;&#x6587;&#xFF1A;<a href="http://blog.sunnyxx.com/2015/07/04/ios-interview/" target="_blank" rel="external">&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684; iOS&#x300B;</a>&#xFF0C;&#x5176;&#x4E2D;&#x5171;55&#x9898;&#xFF0C;&#x9664;&#x7B2C;&#x4E00;&#x9898;&#x4E3A;&#x7EA0;&#x9519;&#x9898;&#x5916;&#xFF0C;&#x5176;&#x4ED6;54&#x9053;&#x5747;&#x4E3A;&#x7B80;&#x7B54;&#x9898;&#x3002;</p>
<p>&#x51FA;&#x9898;&#x8005;&#x7B80;&#x4ECB;&#xFF1A; &#x5B59;&#x6E90;&#xFF08;sunnyxx&#xFF09;&#xFF0C;&#x76EE;&#x524D;&#x5C31;&#x804C;&#x4E8E;&#x767E;&#x5EA6;&#xFF0C;&#x8D1F;&#x8D23;&#x767E;&#x5EA6;&#x77E5;&#x9053; iOS &#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#xFF0C;&#x5BF9;&#x6280;&#x672F;&#x559C;&#x6B22;&#x5228;&#x6839;&#x95EE;&#x5E95;&#x548C;&#x603B;&#x7ED3;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x70ED;&#x7231;&#x5206;&#x4EAB;&#x548C;&#x5F00;&#x6E90;&#xFF0C;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x53EB; forkingdog &#x7684;&#x5F00;&#x6E90;&#x5C0F;&#x7EC4;&#x3002;</p>
<p>&#x7B54;&#x6848;&#x4E3A;<a href="http://weibo.com/luohanchenyilong/" target="_blank" rel="external">&#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;</a>&#x6574;&#x7406;&#xFF0C;&#x672A;&#x7ECF;&#x51FA;&#x9898;&#x8005;&#x6821;&#x5BF9;&#xFF0C;&#x5982;&#x6709;&#x7EB0;&#x6F0F;&#xFF0C;&#x8BF7;&#x5411;<a href="http://weibo.com/luohanchenyilong/" target="_blank" rel="external">&#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;</a>&#x6307;&#x6B63;&#x3002;</p>
<hr>
<h1 id="&#x7D22;&#x5F15;"><a href="#&#x7D22;&#x5F15;" class="headerlink" title="&#x7D22;&#x5F15;"></a>&#x7D22;&#x5F15;</h1><ol>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#25-_objc_msgforward&#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;" target="_blank" rel="external"> 25. <code>_objc_msgForward</code> &#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;</a></li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#26-runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil" target="_blank" rel="external">26. runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil&#xFF1F;</a></li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#27-&#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x4E3A;&#x4EC0;&#x4E48;" target="_blank" rel="external">27. &#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#28-runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;" target="_blank" rel="external">28. runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#29-runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;" target="_blank" rel="external">29. runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#30-&#x4EE5;-scheduledtimerwithtimeinterval&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#x4E3A;&#x4EC0;&#x4E48;&#x5982;&#x4F55;&#x89E3;&#x51B3;" target="_blank" rel="external">30. &#x4EE5;+ scheduledTimerWithTimeInterval&#x2026;&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#xFF0C;&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;&#xFF0C;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#31-&#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;" target="_blank" rel="external">31. &#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#32-objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;" target="_blank" rel="external">32. objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#33-arc&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;" target="_blank" rel="external">33. ARC&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#34-&#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewdidload&#x4E2D;&#x521B;&#x5EFA;" target="_blank" rel="external">34. &#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#xFF1F;&#xFF08;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewDidLoad&#x4E2D;&#x521B;&#x5EFA;&#xFF09;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#35-bad_access&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;" target="_blank" rel="external">35. BAD_ACCESS&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#36-&#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;" target="_blank" rel="external">36. &#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#37-&#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x5982;&#x4F55;&#x89E3;&#x51B3;" target="_blank" rel="external">37. &#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#xFF0C;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</a></li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#38-&#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;" target="_blank" rel="external">38. &#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#39-&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block-api&#x5982;uiview&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;" target="_blank" rel="external">39. &#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block api&#xFF08;&#x5982;UIView&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#xFF09;&#xFF0C;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#40-gcd&#x7684;&#x961F;&#x5217;dispatch_queue_t&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;" target="_blank" rel="external">40. GCD&#x7684;&#x961F;&#x5217;&#xFF08;dispatch_queue_t&#xFF09;&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#41-&#x5982;&#x4F55;&#x7528;gcd&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;" target="_blank" rel="external">41. &#x5982;&#x4F55;&#x7528;GCD&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#xFF1F;&#xFF08;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;&#xFF09;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#42-dispatch_barrier_async&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;" target="_blank" rel="external">42. dispatch_barrier_async&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#43-&#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;dispatch_get_current_queue" target="_blank" rel="external">43. &#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;dispatch_get_current_queue&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#44-&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;" target="_blank" rel="external">44. &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#45-addobserverforkeypathoptionscontext&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;kvo&#x56DE;&#x8C03;" target="_blank" rel="external">45. addObserver:forKeyPath:options:context:&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;KVO&#x56DE;&#x8C03;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#46-&#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;kvo" target="_blank" rel="external">46. &#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;KVO</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#47-&#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;-nsstring-_foo-&#x8C03;&#x7528;setvalueforkey&#x65F6;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F;-_foo-&#x4F5C;&#x4E3A;key" target="_blank" rel="external">47. &#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF; NSString *_foo &#xFF0C;&#x8C03;&#x7528;setValue:forKey:&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F; _foo &#x4F5C;&#x4E3A;key&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#48-kvc&#x7684;keypath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;" target="_blank" rel="external">48. KVC&#x7684;keyPath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#49-kvc&#x548C;kvo&#x7684;keypath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;" target="_blank" rel="external">49. KVC&#x548C;KVO&#x7684;keyPath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#50-&#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;kvo&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;kvo&#x5B9E;&#x73B0;" target="_blank" rel="external">50. &#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;KVO&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;KVO&#x5B9E;&#x73B0;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#51-apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;kvo" target="_blank" rel="external">51. apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;KVO&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#52-iboutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak" target="_blank" rel="external">52. IBOutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak?</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#53-ib&#x4E2D;user-defined-runtime-attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;" target="_blank" rel="external">53. IB&#x4E2D;User Defined Runtime Attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#54-&#x5982;&#x4F55;&#x8C03;&#x8BD5;bad_access&#x9519;&#x8BEF;" target="_blank" rel="external">54. &#x5982;&#x4F55;&#x8C03;&#x8BD5;BAD_ACCESS&#x9519;&#x8BEF;</a> </li>
<li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#55-lldbgdb&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;" target="_blank" rel="external">55. lldb&#xFF08;gdb&#xFF09;&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#xFF1F;</a> </li>
</ol>
<hr>
<h3 id="25-_objc_msgforward&#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;"><a href="#25-objc-msgForward&#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="25. _objc_msgForward&#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;"></a>25. <code>_objc_msgForward</code>&#x51FD;&#x6570;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;</h3><blockquote>
<p><code>_objc_msgForward</code>&#x662F; IMP &#x7C7B;&#x578B;&#xFF0C;&#x7528;&#x4E8E;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x7684;&#xFF1A;&#x5F53;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x4F46;&#x5B83;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;<code>_objc_msgForward</code>&#x4F1A;&#x5C1D;&#x8BD5;&#x505A;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x3002;</p>
</blockquote>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>_objc_msgForward</code>&#x5BF9;&#x8C61;&#xFF1A;</p>
<pre><code>IMP msgForwardIMP = _objc_msgForward;
</code></pre><p>&#x5728;<a href="https://github.com/ChenYilong/iOSInterviewQuestions" target="_blank" rel="external">&#x4E0A;&#x7BC7;</a>&#x4E2D;&#x7684;&#x300A;objc&#x4E2D;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x6D88;&#x606F;<code>[obj foo]</code>&#x548C;<code>objc_msgSend()</code>&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF1F;&#x300B;&#x66FE;&#x63D0;&#x5230;<code>objc_msgSend</code>&#x5728;&#x201C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x201D;&#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x5728;&#x201C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x201D;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;<code>objc_msgSend</code>&#x7684;&#x52A8;&#x4F5C;&#x6BD4;&#x8F83;&#x6E05;&#x6670;&#xFF1A;&#x9996;&#x5148;&#x5728; Class &#x4E2D;&#x7684;&#x7F13;&#x5B58;&#x67E5;&#x627E; IMP &#xFF08;&#x6CA1;&#x7F13;&#x5B58;&#x5219;&#x521D;&#x59CB;&#x5316;&#x7F13;&#x5B58;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x627E;&#x5230;&#xFF0C;&#x5219;&#x5411;&#x7236;&#x7C7B;&#x7684; Class &#x67E5;&#x627E;&#x3002;&#x5982;&#x679C;&#x4E00;&#x76F4;&#x67E5;&#x627E;&#x5230;&#x6839;&#x7C7B;&#x4ECD;&#x65E7;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#xFF0C;&#x5219;&#x7528;<code>_objc_msgForward</code>&#x51FD;&#x6570;&#x6307;&#x9488;&#x4EE3;&#x66FF; IMP &#x3002;&#x6700;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x8FD9;&#x4E2A; IMP &#x3002;</p>
<p>objc&#x8FD0;&#x884C;&#x65F6;&#x662F;&#x5F00;&#x6E90;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x6253;&#x5F00;<a href="http://www.opensource.apple.com/tarballs/objc4/" target="_blank" rel="external"> <strong><em>Apple Open Source &#x91CC;Mac&#x4EE3;&#x7801;&#x91CC;&#x7684;obj&#x5305;</em></strong> </a>&#x4E0B;&#x8F7D;&#x4E00;&#x4E2A;&#x6700;&#x65B0;&#x7248;&#x672C;&#xFF0C;&#x627E;&#x5230; <code>objc-runtime-new.mm</code>&#xFF0C;&#x8FDB;&#x5165;&#x4E4B;&#x540E;&#x641C;&#x7D22;<code>_objc_msgForward</code>&#x3002;</p>
<p><img src="http://i.imgur.com/rGBfaoL.png" alt="enter image description here"></p>
<p>&#x91CC;&#x9762;&#x6709;&#x5BF9;<code>_objc_msgForward</code>&#x7684;&#x529F;&#x80FD;&#x89E3;&#x91CA;&#xFF1A;</p>
<p><img src="http://i.imgur.com/vcThcdA.png" alt="enter image description here"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/***********************************************************************</span></div><div class="line">* lookUpImpOrForward.</div><div class="line">* The standard IMP lookup. </div><div class="line">* initialize==NO tries to avoid +initialize (but sometimes fails)</div><div class="line">* cache==NO skips optimistic unlocked lookup (but uses cache elsewhere)</div><div class="line">* Most callers should use initialize==YES and cache==YES.</div><div class="line">* inst is an instance of cls or a subclass thereof, or nil if none is known. </div><div class="line">*   If cls is an un-initialized metaclass then a non-nil inst is faster.</div><div class="line">* May return _objc_msgForward_impcache. IMPs destined for external use </div><div class="line">*   must be converted to _objc_msgForward or _objc_msgForward_stret.</div><div class="line">*   If you don&apos;t want forwarding at all, use lookUpImpOrNil() instead.</div><div class="line">**********************************************************************/</div></pre></td></tr></table></figure>
<p>&#x5BF9; <code>objc-runtime-new.mm</code>&#x6587;&#x4EF6;&#x91CC;&#x4E0E;<code>_objc_msgForward</code>&#x6709;&#x5173;&#x7684;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x4F7F;&#x7528;&#x4F2A;&#x4EE3;&#x7801;&#x5C55;&#x793A;&#x4E0B;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  objc-runtime-new.mm &#x6587;&#x4EF6;&#x91CC;&#x4E0E; _objc_msgForward &#x6709;&#x5173;&#x7684;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x4F7F;&#x7528;&#x4F2A;&#x4EE3;&#x7801;&#x5C55;&#x793A;</span></div><div class="line"><span class="comment">//  Created by https://github.com/ChenYilong</span></div><div class="line"><span class="comment">//  Copyright (c)  &#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;(http://weibo.com/luohanchenyilong/). All rights reserved.</span></div><div class="line"><span class="comment">//  &#x540C;&#x65F6;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F; obj_msgSend &#x7684;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;</span></div><div class="line"></div><div class="line"><span class="keyword">id</span> objc_msgSend(<span class="keyword">id</span> <span class="keyword">self</span>, SEL op, ...) {</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">	IMP imp = class_getMethodImplementation(<span class="keyword">self</span>-&gt;isa, SEL op);</div><div class="line">	imp(<span class="keyword">self</span>, op, ...); <span class="comment">//&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x4F2A;&#x4EE3;&#x7801;...</span></div><div class="line">}</div><div class="line"> </div><div class="line"><span class="comment">//&#x67E5;&#x627E;IMP</span></div><div class="line">IMP class_getMethodImplementation(Class cls, SEL sel) {</div><div class="line">    <span class="keyword">if</span> (!cls || !sel) <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">    IMP imp = lookUpImpOrNil(cls, sel);</div><div class="line">    <span class="keyword">if</span> (!imp) <span class="keyword">return</span> _objc_msgForward; <span class="comment">//_objc_msgForward &#x7528;&#x4E8E;&#x6D88;&#x606F;&#x8F6C;&#x53D1;</span></div><div class="line">    <span class="keyword">return</span> imp;</div><div class="line">}</div><div class="line"> </div><div class="line">IMP lookUpImpOrNil(Class cls, SEL sel) {</div><div class="line">    <span class="keyword">if</span> (!cls-&gt;initialize()) {</div><div class="line">        _class_initialize(cls);</div><div class="line">    }</div><div class="line"> </div><div class="line">    Class curClass = cls;</div><div class="line">    IMP imp = <span class="literal">nil</span>;</div><div class="line">    <span class="keyword">do</span> { <span class="comment">//&#x5148;&#x67E5;&#x7F13;&#x5B58;,&#x7F13;&#x5B58;&#x6CA1;&#x6709;&#x65F6;&#x91CD;&#x5EFA;,&#x4ECD;&#x65E7;&#x6CA1;&#x6709;&#x5219;&#x5411;&#x7236;&#x7C7B;&#x67E5;&#x8BE2;</span></div><div class="line">        <span class="keyword">if</span> (!curClass) <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">if</span> (!curClass-&gt;cache) fill_cache(cls, curClass);</div><div class="line">        imp = cache_getImp(curClass, sel);</div><div class="line">        <span class="keyword">if</span> (imp) <span class="keyword">break</span>;</div><div class="line">    } <span class="keyword">while</span> (curClass = curClass-&gt;superclass);</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> imp;</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x867D;&#x7136;Apple&#x6CA1;&#x6709;&#x516C;&#x5F00;<code>_objc_msgForward</code>&#x7684;&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x80FD;&#x5F97;&#x51FA;&#x7ED3;&#x8BBA;&#xFF1A;</p>
<blockquote>
<p><code>_objc_msgForward</code>&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6307;&#x9488;&#xFF08;&#x548C; IMP &#x7684;&#x7C7B;&#x578B;&#x4E00;&#x6837;&#xFF09;&#xFF0C;&#x662F;&#x7528;&#x4E8E;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x7684;&#xFF1A;&#x5F53;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x4F46;&#x5B83;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;<code>_objc_msgForward</code>&#x4F1A;&#x5C1D;&#x8BD5;&#x505A;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x3002;</p>
<p>&#x5728;<a href="https://github.com/ChenYilong/iOSInterviewQuestions" target="_blank" rel="external">&#x4E0A;&#x7BC7;</a>&#x4E2D;&#x7684;&#x300A;objc&#x4E2D;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x6D88;&#x606F;<code>[obj foo]</code>&#x548C;<code>objc_msgSend()</code>&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF1F;&#x300B;&#x66FE;&#x63D0;&#x5230;<code>objc_msgSend</code>&#x5728;&#x201C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x201D;&#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x5728;&#x201C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x201D;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;<code>objc_msgSend</code>&#x7684;&#x52A8;&#x4F5C;&#x6BD4;&#x8F83;&#x6E05;&#x6670;&#xFF1A;&#x9996;&#x5148;&#x5728; Class &#x4E2D;&#x7684;&#x7F13;&#x5B58;&#x67E5;&#x627E; IMP &#xFF08;&#x6CA1;&#x7F13;&#x5B58;&#x5219;&#x521D;&#x59CB;&#x5316;&#x7F13;&#x5B58;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x627E;&#x5230;&#xFF0C;&#x5219;&#x5411;&#x7236;&#x7C7B;&#x7684; Class &#x67E5;&#x627E;&#x3002;&#x5982;&#x679C;&#x4E00;&#x76F4;&#x67E5;&#x627E;&#x5230;&#x6839;&#x7C7B;&#x4ECD;&#x65E7;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#xFF0C;&#x5219;&#x7528;<code>_objc_msgForward</code>&#x51FD;&#x6570;&#x6307;&#x9488;&#x4EE3;&#x66FF; IMP &#x3002;&#x6700;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x8FD9;&#x4E2A; IMP &#x3002;</p>
</blockquote>
<p>&#x4E3A;&#x4E86;&#x5C55;&#x793A;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x7684;&#x5177;&#x4F53;&#x52A8;&#x4F5C;&#xFF0C;&#x8FD9;&#x91CC;&#x5C1D;&#x8BD5;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x9519;&#x8BEF;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x5E76;&#x67E5;&#x770B;&#x4E00;&#x4E0B;<code>_objc_msgForward</code>&#x662F;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x8F6C;&#x53D1;&#x7684;&#x3002;</p>
<p>&#x9996;&#x5148;&#x5F00;&#x542F;&#x8C03;&#x8BD5;&#x6A21;&#x5F0F;&#x3001;&#x6253;&#x5370;&#x51FA;&#x6240;&#x6709;&#x8FD0;&#x884C;&#x65F6;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#xFF1A;<br>&#x53EF;&#x4EE5;&#x5728;&#x4EE3;&#x7801;&#x91CC;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="keyword">void</span>)instrumentObjcMessageSends(<span class="literal">YES</span>);</div></pre></td></tr></table></figure>
<p>&#x6216;&#x8005;&#x65AD;&#x70B9;&#x6682;&#x505C;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#xFF0C;&#x5E76;&#x5728; gdb &#x4E2D;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">call (<span class="keyword">void</span>)instrumentObjcMessageSends(<span class="literal">YES</span>)</div></pre></td></tr></table></figure>
<p>&#x4EE5;&#x7B2C;&#x4E8C;&#x79CD;&#x4E3A;&#x4F8B;&#xFF0C;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="http://i.imgur.com/uEwTCC4.png" alt="enter image description here"></p>
<p>&#x4E4B;&#x540E;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x53D1;&#x9001;&#x7684;&#x6240;&#x6709;&#x6D88;&#x606F;&#x90FD;&#x4F1A;&#x6253;&#x5370;&#x5230;<code>/tmp/msgSend-xxxx</code>&#x6587;&#x4EF6;&#x91CC;&#x4E86;&#x3002;</p>
<p>&#x7EC8;&#x7AEF;&#x4E2D;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#x524D;&#x5F80;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">open /private/tmp</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/Fh5hhCw.png" alt="enter image description here"></p>
<p>&#x53EF;&#x80FD;&#x770B;&#x5230;&#x6709;&#x591A;&#x6761;&#xFF0C;&#x627E;&#x5230;&#x6700;&#x65B0;&#x751F;&#x6210;&#x7684;&#xFF0C;&#x53CC;&#x51FB;&#x6253;&#x5F00;</p>
<p>&#x5728;&#x6A21;&#x62DF;&#x5668;&#x4E0A;&#x6267;&#x884C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x8BED;&#x53E5;&#xFF08;&#x8FD9;&#x4E00;&#x5957;&#x8C03;&#x8BD5;&#x65B9;&#x6848;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x6A21;&#x62DF;&#x5668;&#xFF0C;&#x771F;&#x673A;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x5173;&#x4E8E;&#x8BE5;&#x8C03;&#x8BD5;&#x65B9;&#x6848;&#x7684;&#x62D3;&#x5C55;&#x94FE;&#x63A5;&#xFF1A;<a href="http://stackoverflow.com/a/10750398/3395008" target="_blank" rel="external"> <strong><em>Can the messages sent to an object in objc be monitored or printed out?</em></strong> </a>&#xFF09;&#xFF0C;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x9519;&#x8BEF;&#x7684;&#x6D88;&#x606F;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  main.m</span></div><div class="line"><span class="comment">//  CYLObjcMsgForwardTest</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  Created by http://weibo.com/luohanchenyilong/.</span></div><div class="line"><span class="comment">//  Copyright (c) 2015&#x5E74; &#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;. All rights reserved.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&quot;AppDelegate.h&quot;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&quot;CYLTest.h&quot;</span></span></div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> * argv[]) {</div><div class="line">    <span class="keyword">@autoreleasepool</span> {</div><div class="line">        CYLTest *test = [[CYLTest alloc] init];</div><div class="line">        [test performSelector:(<span class="keyword">@selector</span>(iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;))];</div><div class="line">        <span class="keyword">return</span> <span class="built_in">UIApplicationMain</span>(argc, argv, <span class="literal">nil</span>, <span class="built_in">NSStringFromClass</span>([AppDelegate <span class="keyword">class</span>]));</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/UjbmVvB.png" alt="enter image description here"></p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x5728;<code>/tmp/msgSend-xxxx</code>&#xFF08;&#x6211;&#x8FD9;&#x4E00;&#x6B21;&#x662F;<code>/tmp/msgSend-9805</code>&#xFF09;&#x6587;&#x4EF6;&#x91CC;&#xFF0C;&#x770B;&#x5230;&#x6253;&#x5370;&#x51FA;&#x6765;&#xFF1A;</p>
<p><img src="http://i.imgur.com/AAERz1T.png" alt="enter image description here"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">+ CYLTest <span class="built_in">NSObject</span> initialize</div><div class="line">+ CYLTest <span class="built_in">NSObject</span> alloc</div><div class="line">- CYLTest <span class="built_in">NSObject</span> init</div><div class="line">- CYLTest <span class="built_in">NSObject</span> performSelector:</div><div class="line">+ CYLTest <span class="built_in">NSObject</span> resolveInstanceMethod:</div><div class="line">+ CYLTest <span class="built_in">NSObject</span> resolveInstanceMethod:</div><div class="line">- CYLTest <span class="built_in">NSObject</span> forwardingTargetForSelector:</div><div class="line">- CYLTest <span class="built_in">NSObject</span> forwardingTargetForSelector:</div><div class="line">- CYLTest <span class="built_in">NSObject</span> methodSignatureForSelector:</div><div class="line">- CYLTest <span class="built_in">NSObject</span> methodSignatureForSelector:</div><div class="line">- CYLTest <span class="built_in">NSObject</span> <span class="keyword">class</span></div><div class="line">- CYLTest <span class="built_in">NSObject</span> doesNotRecognizeSelector:</div><div class="line">- CYLTest <span class="built_in">NSObject</span> doesNotRecognizeSelector:</div><div class="line">- CYLTest <span class="built_in">NSObject</span> <span class="keyword">class</span></div></pre></td></tr></table></figure>
<p>&#x7ED3;&#x5408;<a href="https://developer.apple.com/library/prerelease/watchos/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/#//apple_ref/doc/uid/20000050-SW11" target="_blank" rel="external">&#x300A;NSObject&#x5B98;&#x65B9;&#x6587;&#x6863;&#x300B;</a>&#xFF0C;&#x6392;&#x9664;&#x6389; NSObject &#x505A;&#x7684;&#x4E8B;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;<code>_objc_msgForward</code>&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x505A;&#x7684;&#x51E0;&#x4EF6;&#x4E8B;&#xFF1A;</p>
<ol>
<li><p>&#x8C03;&#x7528;<code>resolveInstanceMethod:</code>&#x65B9;&#x6CD5; (&#x6216; <code>resolveClassMethod:</code>)&#x3002;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x5728;&#x6B64;&#x65F6;&#x4E3A;&#x8BE5; Class &#x52A8;&#x6001;&#x6DFB;&#x52A0;&#x5B9E;&#x73B0;&#x3002;&#x5982;&#x679C;&#x6709;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x5219;&#x8C03;&#x7528;&#x5E76;&#x8FD4;&#x56DE;YES&#xFF0C;&#x90A3;&#x4E48;&#x91CD;&#x65B0;&#x5F00;&#x59CB;<code>objc_msgSend</code>&#x6D41;&#x7A0B;&#x3002;&#x8FD9;&#x4E00;&#x6B21;&#x5BF9;&#x8C61;&#x4F1A;&#x54CD;&#x5E94;&#x8FD9;&#x4E2A;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x5DF2;&#x7ECF;&#x8C03;&#x7528;&#x8FC7;<code>class_addMethod</code>&#x3002;&#x5982;&#x679C;&#x4ECD;&#x6CA1;&#x5B9E;&#x73B0;&#xFF0C;&#x7EE7;&#x7EED;&#x4E0B;&#x9762;&#x7684;&#x52A8;&#x4F5C;&#x3002;</p>
</li>
<li><p>&#x8C03;&#x7528;<code>forwardingTargetForSelector:</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5C1D;&#x8BD5;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x80FD;&#x54CD;&#x5E94;&#x8BE5;&#x6D88;&#x606F;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5982;&#x679C;&#x83B7;&#x53D6;&#x5230;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x628A;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x7ED9;&#x5B83;&#xFF0C;&#x8FD4;&#x56DE;&#x975E; nil &#x5BF9;&#x8C61;&#x3002;&#x5426;&#x5219;&#x8FD4;&#x56DE; nil &#xFF0C;&#x7EE7;&#x7EED;&#x4E0B;&#x9762;&#x7684;&#x52A8;&#x4F5C;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x8981;&#x8FD4;&#x56DE; self &#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x5F62;&#x6210;&#x6B7B;&#x5FAA;&#x73AF;&#x3002;</p>
</li>
<li><p>&#x8C03;&#x7528;<code>methodSignatureForSelector:</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5C1D;&#x8BD5;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#x3002;&#x5982;&#x679C;&#x83B7;&#x53D6;&#x4E0D;&#x5230;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>doesNotRecognizeSelector</code>&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;&#x5982;&#x679C;&#x80FD;&#x83B7;&#x53D6;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x975E;nil&#xFF1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; NSlnvocation &#x5E76;&#x4F20;&#x7ED9;<code>forwardInvocation:</code>&#x3002;</p>
</li>
<li><p>&#x8C03;&#x7528;<code>forwardInvocation:</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x7B2C;3&#x6B65;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#x5305;&#x88C5;&#x6210; Invocation &#x4F20;&#x5165;&#xFF0C;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5C31;&#x5728;&#x8FD9;&#x91CC;&#x9762;&#x4E86;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x975E;ni&#x3002;</p>
</li>
<li><p>&#x8C03;&#x7528;<code>doesNotRecognizeSelector:</code> &#xFF0C;&#x9ED8;&#x8BA4;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;&#x5982;&#x679C;&#x7B2C;3&#x6B65;&#x6CA1;&#x80FD;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#xFF0C;&#x6267;&#x884C;&#x8BE5;&#x6B65;&#x9AA4;&#x3002;</p>
</li>
</ol>
<p>&#x4E0A;&#x9762;&#x524D;4&#x4E2A;&#x65B9;&#x6CD5;&#x5747;&#x662F;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;override&#xFF0C;&#x7531; runtime &#x6765;&#x8C03;&#x7528;&#x3002;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#xFF1A;&#x5C31;&#x662F;&#x91CD;&#x5199;&#x65B9;&#x6CD5;3&#x548C;4&#xFF0C;&#x541E;&#x6389;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x6216;&#x8005;&#x4EE3;&#x7406;&#x7ED9;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x90FD;&#x662F;&#x6CA1;&#x95EE;&#x9898;&#x7684;</p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;<code>_objc_msgForward</code>&#x5728;&#x8FDB;&#x884C;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x6D89;&#x53CA;&#x4EE5;&#x4E0B;&#x8FD9;&#x51E0;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ol>
<li><p><code>resolveInstanceMethod:</code>&#x65B9;&#x6CD5; (&#x6216; <code>resolveClassMethod:</code>)&#x3002;</p>
</li>
<li><p><code>forwardingTargetForSelector:</code>&#x65B9;&#x6CD5;</p>
</li>
<li><p><code>methodSignatureForSelector:</code>&#x65B9;&#x6CD5;</p>
</li>
<li><p><code>forwardInvocation:</code>&#x65B9;&#x6CD5;</p>
</li>
<li><p><code>doesNotRecognizeSelector:</code> &#x65B9;&#x6CD5;</p>
</li>
</ol>
<p>&#x4E3A;&#x4E86;&#x80FD;&#x66F4;&#x6E05;&#x6670;&#x5730;&#x7406;&#x89E3;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#xFF0C;git&#x4ED3;&#x5E93;&#x91CC;&#x4E5F;&#x7ED9;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;Demo&#xFF0C;&#x540D;&#x79F0;&#x53EB;&#x201C; <code>_objc_msgForward_demo</code> &#x201D;,&#x53EF;&#x8FD0;&#x884C;&#x8D77;&#x6765;&#x770B;&#x770B;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x56DE;&#x7B54;&#x4E0B;&#x7B2C;&#x4E8C;&#x4E2A;&#x95EE;&#x9898;&#x201C;&#x76F4;&#x63A5;<code>_objc_msgForward</code>&#x8C03;&#x7528;&#x5B83;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;&#x201D;</p>
<p>&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>_objc_msgForward</code>&#x662F;&#x975E;&#x5E38;&#x5371;&#x9669;&#x7684;&#x4E8B;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x4E0D;&#x597D;&#x4F1A;&#x76F4;&#x63A5;&#x5BFC;&#x81F4;&#x7A0B;&#x5E8F;Crash&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x7528;&#x5F97;&#x597D;&#xFF0C;&#x80FD;&#x505A;&#x5F88;&#x591A;&#x975E;&#x5E38;&#x9177;&#x7684;&#x4E8B;&#x3002;</p>
<p>&#x5C31;&#x597D;&#x50CF;&#x8DD1;&#x9177;&#xFF0C;&#x5E72;&#x5F97;&#x597D;&#xFF0C;&#x53EB;&#x201C;&#x800D;&#x9177;&#x201D;&#xFF0C;&#x5E72;&#x4E0D;&#x597D;&#x5C31;&#x53EB;&#x201C;&#x4F5C;&#x6B7B;&#x201D;&#x3002;</p>
<p>&#x6B63;&#x5982;&#x524D;&#x6587;&#x6240;&#x8BF4;&#xFF1A;</p>
<blockquote>
<p><code>_objc_msgForward</code>&#x662F; IMP &#x7C7B;&#x578B;&#xFF0C;&#x7528;&#x4E8E;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x7684;&#xFF1A;&#x5F53;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x4F46;&#x5B83;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;<code>_objc_msgForward</code>&#x4F1A;&#x5C1D;&#x8BD5;&#x505A;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x4F55;&#x8C03;&#x7528;<code>_objc_msgForward</code>&#xFF1F;<br><code>_objc_msgForward</code>&#x96B6;&#x5C5E; C &#x8BED;&#x8A00;&#xFF0C;&#x6709;&#x4E09;&#x4E2A;&#x53C2;&#x6570; &#xFF1A;</p>
<table>
<thead>
<tr>
<th></th>
<th>&#x2013;</th>
<th><code>_objc_msgForward</code>&#x53C2;&#x6570;</th>
<th>&#x7C7B;&#x578B;</th>
</tr>
</thead>
<tbody>
<tr>
<td> 1.</td>
<td>&#x6240;&#x5C5E;&#x5BF9;&#x8C61;</td>
<td>id&#x7C7B;&#x578B;</td>
</tr>
<tr>
<td> 2.</td>
<td>&#x65B9;&#x6CD5;&#x540D;</td>
<td>SEL&#x7C7B;&#x578B; </td>
</tr>
<tr>
<td> 3.</td>
<td>&#x53EF;&#x53D8;&#x53C2;&#x6570;</td>
<td>&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x7C7B;&#x578B;</td>
</tr>
</tbody>
</table>
<p>&#x9996;&#x5148;&#x4E86;&#x89E3;&#x4E0B;&#x5982;&#x4F55;&#x8C03;&#x7528; IMP &#x7C7B;&#x578B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;IMP&#x7C7B;&#x578B;&#x662F;&#x5982;&#x4E0B;&#x683C;&#x5F0F;&#xFF1A;</p>
<p>&#x4E3A;&#x4E86;&#x76F4;&#x89C2;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A; IMP&#x7C7B;&#x578B; &#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (*voidIMP)(<span class="keyword">id</span>, SEL, ...)</div></pre></td></tr></table></figure>
<p>&#x4E00;&#x65E6;&#x8C03;&#x7528;<code>_objc_msgForward</code>&#xFF0C;&#x5C06;&#x8DF3;&#x8FC7;&#x67E5;&#x627E; IMP &#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x76F4;&#x63A5;&#x89E6;&#x53D1;&#x201C;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x201D;&#xFF0C;</p>
<p>&#x5982;&#x679C;&#x8C03;&#x7528;&#x4E86;<code>_objc_msgForward</code>&#xFF0C;&#x5373;&#x4F7F;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x786E;&#x5B9E;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x4F60;&#x4E5F;&#x4F1A;&#x544A;&#x8BC9;<code>objc_msgSend</code>&#xFF1A;</p>
<blockquote>
<p>&#x201C;&#x6211;&#x6CA1;&#x6709;&#x5728;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x91CC;&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x201D;</p>
</blockquote>
<p>&#x60F3;&#x8C61;&#x4E0B;<code>objc_msgSend</code>&#x4F1A;&#x600E;&#x4E48;&#x505A;&#xFF1F;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x5F20;&#x56FE;&#x5C31;&#x662F;&#x4F60;&#x6B63;&#x5E38;&#x8D70;<code>objc_msgSend</code>&#x8FC7;&#x7A0B;&#xFF0C;&#x548C;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>_objc_msgForward</code>&#x7684;&#x524D;&#x540E;&#x5DEE;&#x522B;&#xFF1A;</p>
<p><img src="http://ww1.sinaimg.cn/bmiddle/6628711bgw1eecx3jef23g206404tkbi.gif" alt="enter image description here"></p>
<p>&#x6709;&#x54EA;&#x4E9B;&#x573A;&#x666F;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>_objc_msgForward</code>&#xFF1F;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x573A;&#x666F;&#x662F;&#xFF1A;&#x4F60;&#x60F3;&#x83B7;&#x53D6;&#x67D0;&#x65B9;&#x6CD5;&#x6240;&#x5BF9;&#x5E94;&#x7684;<code>NSInvocation</code>&#x5BF9;&#x8C61;&#x3002;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF1A;</p>
<p><a href="https://github.com/bang590/JSPatch" target="_blank" rel="external">JSPatch &#xFF08;Github &#x94FE;&#x63A5;&#xFF09;</a>&#x5C31;&#x662F;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>_objc_msgForward</code>&#x6765;&#x5B9E;&#x73B0;&#x5176;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#x7684;&#xFF1A;</p>
<blockquote>
<p> JSPatch &#x4EE5;&#x5C0F;&#x5DE7;&#x7684;&#x4F53;&#x79EF;&#x505A;&#x5230;&#x4E86;&#x8BA9;JS&#x8C03;&#x7528;/&#x66FF;&#x6362;&#x4EFB;&#x610F;OC&#x65B9;&#x6CD5;&#xFF0C;&#x8BA9;iOS APP&#x5177;&#x5907;&#x70ED;&#x66F4;&#x65B0;&#x7684;&#x80FD;&#x529B;&#x3002;</p>
</blockquote>
<p>&#x4F5C;&#x8005;&#x7684;&#x535A;&#x6587;<a href="http://blog.cnbang.net/tech/2808/" target="_blank" rel="external">&#x300A;JSPatch&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x8BE6;&#x89E3;&#x300B;</a>&#x8BE6;&#x7EC6;&#x8BB0;&#x5F55;&#x4E86;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x3002;</p>
<p>&#x540C;&#x65F6; <a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="external"> <strong><em>RAC(ReactiveCocoa)</em></strong> </a> &#x6E90;&#x7801;&#x4E2D;&#x4E5F;&#x7528;&#x5230;&#x4E86;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;</p>
<h3 id="26-runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil"><a href="#26-runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil&#xFF1F;" class="headerlink" title="26. runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil&#xFF1F;"></a>26. runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x53D8;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x7F6E;nil&#xFF1F;</h3><blockquote>
<p>runtime &#x5BF9;&#x6CE8;&#x518C;&#x7684;&#x7C7B;&#xFF0C; &#x4F1A;&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#xFF0C;&#x5BF9;&#x4E8E; weak &#x5BF9;&#x8C61;&#x4F1A;&#x653E;&#x5165;&#x4E00;&#x4E2A; hash &#x8868;&#x4E2D;&#x3002; &#x7528; weak &#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#x5730;&#x5740;&#x4F5C;&#x4E3A; key&#xFF0C;&#x5F53;&#x6B64;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x4E3A;0&#x7684;&#x65F6;&#x5019;&#x4F1A; dealloc&#xFF0C;&#x5047;&#x5982; weak &#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#x5730;&#x5740;&#x662F;a&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x4EE5;a&#x4E3A;&#x952E;&#xFF0C; &#x5728;&#x8FD9;&#x4E2A; weak &#x8868;&#x4E2D;&#x641C;&#x7D22;&#xFF0C;&#x627E;&#x5230;&#x6240;&#x6709;&#x4EE5;a&#x4E3A;&#x952E;&#x7684; weak &#x5BF9;&#x8C61;&#xFF0C;&#x4ECE;&#x800C;&#x8BBE;&#x7F6E;&#x4E3A; nil&#x3002;</p>
</blockquote>
<p>&#x5728;<a href="https://github.com/ChenYilong/iOSInterviewQuestions" target="_blank" rel="external">&#x4E0A;&#x7BC7;</a>&#x4E2D;&#x7684;&#x300A;runtime &#x5982;&#x4F55;&#x5B9E;&#x73B0; weak &#x5C5E;&#x6027;&#x300B;&#x6709;&#x8BBA;&#x8FF0;&#x3002;&#xFF08;&#x6CE8;&#xFF1A;&#x5728;<a href="https://github.com/ChenYilong/iOSInterviewQuestions" target="_blank" rel="external">&#x4E0A;&#x7BC7;</a>&#x7684;&#x300A;&#x4F7F;&#x7528;runtime Associate&#x65B9;&#x6CD5;&#x5173;&#x8054;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x4E3B;&#x5BF9;&#x8C61;dealloc&#x7684;&#x65F6;&#x5019;&#x91CA;&#x653E;&#x4E48;&#xFF1F;&#x300B;&#x91CC;&#x7ED9;&#x51FA;&#x7684;&#x201C;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x9500;&#x6BC1;&#x65F6;&#x95F4;&#x8868;&#x201D;&#x4E5F;&#x63D0;&#x5230;<code>__weak</code>&#x5F15;&#x7528;&#x7684;&#x89E3;&#x9664;&#x65F6;&#x95F4;&#x3002;&#xFF09;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF08;&#x4F2A;&#x4EE3;&#x7801;&#xFF09;&#x6765;&#x8868;&#x793A;&#x4E0A;&#x8FF0;&#x673A;&#x5236;&#xFF1A;</p>
<p><code>objc_storeWeak(&amp;a, b)</code>&#x51FD;&#x6570;&#xFF1A;</p>
<p><code>objc_storeWeak</code>&#x51FD;&#x6570;&#x628A;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x2013;&#x8D4B;&#x503C;&#x5BF9;&#x8C61;&#xFF08;b&#xFF09;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x4F5C;&#x4E3A;&#x952E;&#x503C;key&#xFF0C;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x2013;weak&#x4FEE;&#x9970;&#x7684;&#x5C5E;&#x6027;&#x53D8;&#x91CF;&#xFF08;a&#xFF09;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF08;&amp;a&#xFF09;&#x4F5C;&#x4E3A;value&#xFF0C;&#x6CE8;&#x518C;&#x5230; weak &#x8868;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF08;b&#xFF09;&#x4E3A;0&#xFF08;nil&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x628A;&#x53D8;&#x91CF;&#xFF08;a&#xFF09;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF08;&amp;a&#xFF09;&#x4ECE;weak&#x8868;&#x4E2D;&#x5220;&#x9664;&#xFF0C;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x628A;<code>objc_storeWeak(&amp;a, b)</code>&#x7406;&#x89E3;&#x4E3A;&#xFF1A;<code>objc_storeWeak(value, key)</code>&#xFF0C;&#x5E76;&#x4E14;&#x5F53;key&#x53D8;nil&#xFF0C;&#x5C06;value&#x7F6E;nil&#x3002;</p>
<p>&#x5728;b&#x975E;nil&#x65F6;&#xFF0C;a&#x548C;b&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF0C;&#x5728;b&#x53D8;nil&#x65F6;&#xFF0C;a&#x53D8;nil&#x3002;&#x6B64;&#x65F6;&#x5411;a&#x53D1;&#x9001;&#x6D88;&#x606F;&#x4E0D;&#x4F1A;&#x5D29;&#x6E83;&#xFF1A;&#x5728;objc&#x4E2D;&#x5411;nil&#x53D1;&#x9001;&#x6D88;&#x606F;&#x662F;&#x5B89;&#x5168;&#x7684;&#x3002;</p>
<p>&#x800C;&#x5982;&#x679C;a&#x662F;&#x7531;assign&#x4FEE;&#x9970;&#x7684;&#xFF0C;&#x5219;&#xFF1A;<br>&#x5728;b&#x975E;nil&#x65F6;&#xFF0C;a&#x548C;b&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF0C;&#x5728;b&#x53D8;nil&#x65F6;&#xFF0C;a&#x8FD8;&#x662F;&#x6307;&#x5411;&#x8BE5;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF0C;&#x53D8;&#x91CE;&#x6307;&#x9488;&#x3002;&#x6B64;&#x65F6;&#x5411;a&#x53D1;&#x9001;&#x6D88;&#x606F;&#x6781;&#x6613;&#x5D29;&#x6E83;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5C06;&#x57FA;&#x4E8E;<code>objc_storeWeak(&amp;a, b)</code>&#x51FD;&#x6570;&#xFF0C;&#x4F7F;&#x7528;&#x4F2A;&#x4EE3;&#x7801;&#x6A21;&#x62DF;&#x201C;runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x5C5E;&#x6027;&#x201D;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// &#x4F7F;&#x7528;&#x4F2A;&#x4EE3;&#x7801;&#x6A21;&#x62DF;&#xFF1A;runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x5C5E;&#x6027;</span></div><div class="line"><span class="comment">// http://weibo.com/luohanchenyilong/</span></div><div class="line"><span class="comment">// https://github.com/ChenYilong</span></div><div class="line"></div><div class="line"> <span class="keyword">id</span> obj1;</div><div class="line"> objc_initWeak(&amp;obj1, obj);</div><div class="line"><span class="comment">/*obj&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x53D8;&#x4E3A;0&#xFF0C;&#x53D8;&#x91CF;&#x4F5C;&#x7528;&#x57DF;&#x7ED3;&#x675F;*/</span></div><div class="line"> objc_destroyWeak(&amp;obj1);</div></pre></td></tr></table></figure>
<p>&#x4E0B;&#x9762;&#x5BF9;&#x7528;&#x5230;&#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;<code>objc_initWeak</code>&#x548C;<code>objc_destroyWeak</code>&#x505A;&#x4E0B;&#x89E3;&#x91CA;&#xFF1A;</p>
<p>&#x603B;&#x4F53;&#x8BF4;&#x6765;&#xFF0C;&#x4F5C;&#x7528;&#x662F;&#xFF1A;<br>&#x901A;&#x8FC7;<code>objc_initWeak</code>&#x51FD;&#x6570;&#x521D;&#x59CB;&#x5316;&#x201C;&#x9644;&#x6709;weak&#x4FEE;&#x9970;&#x7B26;&#x7684;&#x53D8;&#x91CF;&#xFF08;obj1&#xFF09;&#x201D;&#xFF0C;&#x5728;&#x53D8;&#x91CF;&#x4F5C;&#x7528;&#x57DF;&#x7ED3;&#x675F;&#x65F6;&#x901A;&#x8FC7;<code>objc_destoryWeak</code>&#x51FD;&#x6570;&#x91CA;&#x653E;&#x8BE5;&#x53D8;&#x91CF;&#xFF08;obj1&#xFF09;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x5206;&#x522B;&#x4ECB;&#x7ECD;&#x4E0B;&#x65B9;&#x6CD5;&#x7684;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#xFF1A;</p>
<p><code>objc_initWeak</code>&#x51FD;&#x6570;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x5728;&#x5C06;&#x201C;&#x9644;&#x6709;weak&#x4FEE;&#x9970;&#x7B26;&#x7684;&#x53D8;&#x91CF;&#xFF08;obj1&#xFF09;&#x201D;&#x521D;&#x59CB;&#x5316;&#x4E3A;0&#xFF08;nil&#xFF09;&#x540E;&#xFF0C;&#x4F1A;&#x5C06;&#x201C;&#x8D4B;&#x503C;&#x5BF9;&#x8C61;&#x201D;&#xFF08;obj&#xFF09;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x8C03;&#x7528;<code>objc_storeWeak</code>&#x51FD;&#x6570;&#x3002;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">obj1 = <span class="number">0</span>&#xFF1B;</div><div class="line">obj_storeWeak(&amp;obj1, obj);</div></pre></td></tr></table></figure>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF1A;</p>
<blockquote>
<p> weak &#x4FEE;&#x9970;&#x7684;&#x6307;&#x9488;&#x9ED8;&#x8BA4;&#x503C;&#x662F; nil &#xFF08;&#x5728;objc&#x4E2D;&#x5411;nil&#x53D1;&#x9001;&#x6D88;&#x606F;&#x662F;&#x5B89;&#x5168;&#x7684;&#xFF09;</p>
</blockquote>
<p>&#x7136;&#x540E;<code>obj_destroyWeak</code>&#x51FD;&#x6570;&#x5C06;0&#xFF08;nil&#xFF09;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x8C03;&#x7528;<code>objc_storeWeak</code>&#x51FD;&#x6570;&#x3002;</p>
<p><code>objc_storeWeak(&amp;obj1, 0);</code></p>
<p>&#x524D;&#x9762;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x4E0E;&#x4E0B;&#x5217;&#x6E90;&#x4EE3;&#x7801;&#x76F8;&#x540C;&#x3002;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// &#x4F7F;&#x7528;&#x4F2A;&#x4EE3;&#x7801;&#x6A21;&#x62DF;&#xFF1A;runtime&#x5982;&#x4F55;&#x5B9E;&#x73B0;weak&#x5C5E;&#x6027;</span></div><div class="line"><span class="comment">// http://weibo.com/luohanchenyilong/</span></div><div class="line"><span class="comment">// https://github.com/ChenYilong</span></div><div class="line"></div><div class="line"><span class="keyword">id</span> obj1;</div><div class="line">obj1 = <span class="number">0</span>;</div><div class="line">objc_storeWeak(&amp;obj1, obj);</div><div class="line"><span class="comment">/* ... obj&#x7684;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x53D8;&#x4E3A;0&#xFF0C;&#x88AB;&#x7F6E;nil ... */</span></div><div class="line">objc_storeWeak(&amp;obj1, <span class="number">0</span>);</div></pre></td></tr></table></figure>
<p><code>objc_storeWeak</code>&#x51FD;&#x6570;&#x628A;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x2013;&#x8D4B;&#x503C;&#x5BF9;&#x8C61;&#xFF08;obj&#xFF09;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x4F5C;&#x4E3A;&#x952E;&#x503C;&#xFF0C;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x2013;weak&#x4FEE;&#x9970;&#x7684;&#x5C5E;&#x6027;&#x53D8;&#x91CF;&#xFF08;obj1&#xFF09;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x6CE8;&#x518C;&#x5230; weak &#x8868;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF08;obj&#xFF09;&#x4E3A;0&#xFF08;nil&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x628A;&#x53D8;&#x91CF;&#xFF08;obj1&#xFF09;&#x7684;&#x5730;&#x5740;&#x4ECE;weak&#x8868;&#x4E2D;&#x5220;&#x9664;&#x3002;</p>
<h3 id="27-&#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x4E3A;&#x4EC0;&#x4E48;"><a href="#27-&#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="27. &#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;"></a>27. &#x80FD;&#x5426;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x80FD;&#x5426;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</h3><ul>
<li>&#x4E0D;&#x80FD;&#x5411;&#x7F16;&#x8BD1;&#x540E;&#x5F97;&#x5230;&#x7684;&#x7C7B;&#x4E2D;&#x589E;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1B;</li>
<li>&#x80FD;&#x5411;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1B;</li>
</ul>
<p>&#x89E3;&#x91CA;&#x4E0B;&#xFF1A;</p>
<ul>
<li><p>&#x56E0;&#x4E3A;&#x7F16;&#x8BD1;&#x540E;&#x7684;&#x7C7B;&#x5DF2;&#x7ECF;&#x6CE8;&#x518C;&#x5728; runtime &#x4E2D;&#xFF0C;&#x7C7B;&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x7684; <code>objc_ivar_list</code> &#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x7684;&#x94FE;&#x8868; &#x548C; <code>instance_size</code> &#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x5DF2;&#x7ECF;&#x786E;&#x5B9A;&#xFF0C;&#x540C;&#x65F6;runtime &#x4F1A;&#x8C03;&#x7528; <code>class_setIvarLayout</code> &#x6216; <code>class_setWeakIvarLayout</code> &#x6765;&#x5904;&#x7406; strong weak &#x5F15;&#x7528;&#x3002;&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x5411;&#x5B58;&#x5728;&#x7684;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF1B;</p>
</li>
<li><p>&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x662F;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#xFF0C;&#x8C03;&#x7528; <code>class_addIvar</code> &#x51FD;&#x6570;&#x3002;&#x4F46;&#x662F;&#x5F97;&#x5728;&#x8C03;&#x7528; <code>objc_allocateClassPair</code> &#x4E4B;&#x540E;&#xFF0C;<code>objc_registerClassPair</code> &#x4E4B;&#x524D;&#xFF0C;&#x539F;&#x56E0;&#x540C;&#x4E0A;&#x3002;</p>
</li>
</ul>
<h3 id="28-runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;"><a href="#28-runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF1F;" class="headerlink" title="28. runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF1F;"></a>28. runloop&#x548C;&#x7EBF;&#x7A0B;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#xFF1F;</h3><p>&#x603B;&#x7684;&#x8BF4;&#x6765;&#xFF0C;Run loop&#xFF0C;&#x6B63;&#x5982;&#x5176;&#x540D;&#xFF0C;loop&#x8868;&#x793A;&#x67D0;&#x79CD;&#x5FAA;&#x73AF;&#xFF0C;&#x548C;run&#x653E;&#x5728;&#x4E00;&#x8D77;&#x5C31;&#x8868;&#x793A;&#x4E00;&#x76F4;&#x5728;&#x8FD0;&#x884C;&#x7740;&#x7684;&#x5FAA;&#x73AF;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;run loop&#x548C;&#x7EBF;&#x7A0B;&#x662F;&#x7D27;&#x5BC6;&#x76F8;&#x8FDE;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x8BF4;run loop&#x662F;&#x4E3A;&#x4E86;&#x7EBF;&#x7A0B;&#x800C;&#x751F;&#xFF0C;&#x6CA1;&#x6709;&#x7EBF;&#x7A0B;&#xFF0C;&#x5B83;&#x5C31;&#x6CA1;&#x6709;&#x5B58;&#x5728;&#x7684;&#x5FC5;&#x8981;&#x3002;Run loops&#x662F;&#x7EBF;&#x7A0B;&#x7684;&#x57FA;&#x7840;&#x67B6;&#x6784;&#x90E8;&#x5206;&#xFF0C; Cocoa &#x548C; CoreFundation &#x90FD;&#x63D0;&#x4F9B;&#x4E86; run loop &#x5BF9;&#x8C61;&#x65B9;&#x4FBF;&#x914D;&#x7F6E;&#x548C;&#x7BA1;&#x7406;&#x7EBF;&#x7A0B;&#x7684; run loop &#xFF08;&#x4EE5;&#x4E0B;&#x90FD;&#x4EE5; Cocoa &#x4E3A;&#x4F8B;&#xFF09;&#x3002;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x5305;&#x62EC;&#x7A0B;&#x5E8F;&#x7684;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF08; main thread &#xFF09;&#x90FD;&#x6709;&#x4E0E;&#x4E4B;&#x76F8;&#x5E94;&#x7684; run loop &#x5BF9;&#x8C61;&#x3002;</p>
<p> runloop &#x548C;&#x7EBF;&#x7A0B;&#x7684;&#x5173;&#x7CFB;&#xFF1A;</p>
<ol>
<li><p>&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;run loop&#x9ED8;&#x8BA4;&#x662F;&#x542F;&#x52A8;&#x7684;&#x3002;</p>
<p>iOS&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x91CC;&#x9762;&#xFF0C;&#x7A0B;&#x5E8F;&#x542F;&#x52A8;&#x540E;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x5982;&#x4E0B;&#x7684;main()&#x51FD;&#x6570;</p>
</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> * argv[]) {</div><div class="line">    <span class="keyword">@autoreleasepool</span> {</div><div class="line">        <span class="keyword">return</span> <span class="built_in">UIApplicationMain</span>(argc, argv, <span class="literal">nil</span>, <span class="built_in">NSStringFromClass</span>([AppDelegate <span class="keyword">class</span>]));</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
<p> &#x91CD;&#x70B9;&#x662F;UIApplicationMain()&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x4E3A;main thread&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;NSRunLoop&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x5C31;&#x89E3;&#x91CA;&#x4E86;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5728;&#x65E0;&#x4EBA;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#x4F11;&#x606F;&#xFF0C;&#x9700;&#x8981;&#x8BA9;&#x5B83;&#x5E72;&#x6D3B;&#x7684;&#x65F6;&#x5019;&#x53C8;&#x80FD;&#x7ACB;&#x9A6C;&#x54CD;&#x5E94;&#x3002;</p>
<ol>
<li><p>&#x5BF9;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x6765;&#x8BF4;&#xFF0C;run loop&#x9ED8;&#x8BA4;&#x662F;&#x6CA1;&#x6709;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684;&#x7EBF;&#x7A0B;&#x4EA4;&#x4E92;&#x5219;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x914D;&#x7F6E;&#x548C;&#x542F;&#x52A8;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x53EA;&#x662F;&#x53BB;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x5DF2;&#x786E;&#x5B9A;&#x7684;&#x4EFB;&#x52A1;&#x5219;&#x4E0D;&#x9700;&#x8981;&#x3002;</p>
</li>
<li><p>&#x5728;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A; Cocoa &#x7A0B;&#x5E8F;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x6765;&#x83B7;&#x53D6;&#x5230;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684; run loop &#x3002;</p>
</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSRunLoop</span> *runloop = [<span class="built_in">NSRunLoop</span> currentRunLoop];</div></pre></td></tr></table></figure>
<p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href="http://blog.csdn.net/wzzvictory/article/details/9237973" target="_blank" rel="external">&#x300A;objc&#x4E4B;run loop&#x8BE6;&#x89E3;&#x300B;</a>&#x3002;</p>
<h3 id="29-runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;"><a href="#29-runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="29. runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"></a>29. runloop&#x7684;mode&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h3><p>model &#x4E3B;&#x8981;&#x662F;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x4E8B;&#x4EF6;&#x5728;&#x8FD0;&#x884C;&#x5FAA;&#x73AF;&#x4E2D;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#xFF0C;&#x5206;&#x4E3A;&#xFF1A;</p>
<ul>
<li>NSDefaultRunLoopMode&#xFF08;kCFRunLoopDefaultMode&#xFF09;&#xFF1A;&#x9ED8;&#x8BA4;&#xFF0C;&#x7A7A;&#x95F2;&#x72B6;&#x6001;</li>
<li>UITrackingRunLoopMode&#xFF1A;ScrollView&#x6ED1;&#x52A8;&#x65F6;</li>
<li>UIInitializationRunLoopMode&#xFF1A;&#x542F;&#x52A8;&#x65F6;</li>
<li>NSRunLoopCommonModes&#xFF08;kCFRunLoopCommonModes&#xFF09;&#xFF1A;Mode&#x96C6;&#x5408;</li>
</ul>
<p>&#x82F9;&#x679C;&#x516C;&#x5F00;&#x63D0;&#x4F9B;&#x7684; Mode &#x6709;&#x4E24;&#x4E2A;&#xFF1A;</p>
<ol>
<li>NSDefaultRunLoopMode&#xFF08;kCFRunLoopDefaultMode&#xFF09;</li>
<li>NSRunLoopCommonModes&#xFF08;kCFRunLoopCommonModes&#xFF09;</li>
</ol>
<h3 id="30-&#x4EE5;-scheduledtimerwithtimeinterval&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#x4E3A;&#x4EC0;&#x4E48;&#x5982;&#x4F55;&#x89E3;&#x51B3;"><a href="#30-&#x4EE5;-scheduledTimerWithTimeInterval&#x2026;&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#xFF0C;&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;&#xFF0C;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;" class="headerlink" title="30. &#x4EE5;+ scheduledTimerWithTimeInterval&#x2026;&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#xFF0C;&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;&#xFF0C;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;"></a>30. &#x4EE5;+ scheduledTimerWithTimeInterval&#x2026;&#x7684;&#x65B9;&#x5F0F;&#x89E6;&#x53D1;&#x7684;timer&#xFF0C;&#x5728;&#x6ED1;&#x52A8;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5217;&#x8868;&#x65F6;&#xFF0C;timer&#x4F1A;&#x6682;&#x5B9A;&#x56DE;&#x8C03;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</h3><p>RunLoop&#x53EA;&#x80FD;&#x8FD0;&#x884C;&#x5728;&#x4E00;&#x79CD;mode&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x6362;mode&#xFF0C;&#x5F53;&#x524D;&#x7684;loop&#x4E5F;&#x9700;&#x8981;&#x505C;&#x4E0B;&#x91CD;&#x542F;&#x6210;&#x65B0;&#x7684;&#x3002;&#x5229;&#x7528;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#xFF0C;ScrollView&#x6EDA;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;NSDefaultRunLoopMode&#xFF08;kCFRunLoopDefaultMode&#xFF09;&#x7684;mode&#x4F1A;&#x5207;&#x6362;&#x5230;UITrackingRunLoopMode&#x6765;&#x4FDD;&#x8BC1;ScrollView&#x7684;&#x6D41;&#x7545;&#x6ED1;&#x52A8;&#xFF1A;&#x53EA;&#x80FD;&#x5728;NSDefaultRunLoopMode&#x6A21;&#x5F0F;&#x4E0B;&#x5904;&#x7406;&#x7684;&#x4E8B;&#x4EF6;&#x4F1A;&#x5F71;&#x54CD;ScrollView&#x7684;&#x6ED1;&#x52A8;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x628A;&#x4E00;&#x4E2A;NSTimer&#x5BF9;&#x8C61;&#x4EE5;NSDefaultRunLoopMode&#xFF08;kCFRunLoopDefaultMode&#xFF09;&#x6DFB;&#x52A0;&#x5230;&#x4E3B;&#x8FD0;&#x884C;&#x5FAA;&#x73AF;&#x4E2D;&#x7684;&#x65F6;&#x5019;,<br>ScrollView&#x6EDA;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x56E0;&#x4E3A;mode&#x7684;&#x5207;&#x6362;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;NSTimer&#x5C06;&#x4E0D;&#x518D;&#x88AB;&#x8C03;&#x5EA6;&#x3002;</p>
<p>&#x540C;&#x65F6;&#x56E0;&#x4E3A;mode&#x8FD8;&#x662F;&#x53EF;&#x5B9A;&#x5236;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#xFF1A;</p>
<p> Timer&#x8BA1;&#x65F6;&#x4F1A;&#x88AB;scrollView&#x7684;&#x6ED1;&#x52A8;&#x5F71;&#x54CD;&#x7684;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;timer&#x6DFB;&#x52A0;&#x5230;NSRunLoopCommonModes&#xFF08;kCFRunLoopCommonModes&#xFF09;&#x6765;&#x89E3;&#x51B3;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// </span></div><div class="line"><span class="comment">// http://weibo.com/luohanchenyilong/ (&#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;)</span></div><div class="line"><span class="comment">// https://github.com/ChenYilong</span></div><div class="line"></div><div class="line"><span class="comment">//&#x5C06;timer&#x6DFB;&#x52A0;&#x5230;NSDefaultRunLoopMode&#x4E2D;</span></div><div class="line">[<span class="built_in">NSTimer</span> scheduledTimerWithTimeInterval:<span class="number">1.0</span></div><div class="line">     target:<span class="keyword">self</span></div><div class="line">     selector:<span class="keyword">@selector</span>(timerTick:)</div><div class="line">     userInfo:<span class="literal">nil</span></div><div class="line">     repeats:<span class="literal">YES</span>];</div><div class="line"><span class="comment">//&#x7136;&#x540E;&#x518D;&#x6DFB;&#x52A0;&#x5230;NSRunLoopCommonModes&#x91CC;</span></div><div class="line"><span class="built_in">NSTimer</span> *timer = [<span class="built_in">NSTimer</span> timerWithTimeInterval:<span class="number">1.0</span></div><div class="line">     target:<span class="keyword">self</span></div><div class="line">     selector:<span class="keyword">@selector</span>(timerTick:)</div><div class="line">     userInfo:<span class="literal">nil</span></div><div class="line">     repeats:<span class="literal">YES</span>];</div><div class="line">[[<span class="built_in">NSRunLoop</span> currentRunLoop] addTimer:timer forMode:<span class="built_in">NSRunLoopCommonModes</span>];</div></pre></td></tr></table></figure>
<h3 id="31-&#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;"><a href="#31-&#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;" class="headerlink" title="31. &#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;"></a>31. &#x731C;&#x60F3;runloop&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;</h3><blockquote>
<p>&#x4E00;&#x822C;&#x6765;&#x8BB2;&#xFF0C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#x7EBF;&#x7A0B;&#x5C31;&#x4F1A;&#x9000;&#x51FA;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x673A;&#x5236;&#xFF0C;&#x8BA9;&#x7EBF;&#x7A0B;&#x80FD;&#x968F;&#x65F6;&#x5904;&#x7406;&#x4E8B;&#x4EF6;&#x4F46;&#x5E76;&#x4E0D;&#x9000;&#x51FA;&#xFF0C;&#x901A;&#x5E38;&#x7684;&#x4EE3;&#x7801;&#x903B;&#x8F91;<br>&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
</blockquote>
<pre><code>function loop() {
    initialize();
    do {
        var message = get_next_message();
        process_message(message);
    } while (message != quit);
}
</code></pre><p>&#x6216;&#x4F7F;&#x7528;&#x4F2A;&#x4EE3;&#x7801;&#x6765;&#x5C55;&#x793A;&#x4E0B;:</p>
<pre><code>// 
// http://weibo.com/luohanchenyilong/ (&#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;)
// https://github.com/ChenYilong
int main(int argc, char * argv[]) {
 //&#x7A0B;&#x5E8F;&#x4E00;&#x76F4;&#x8FD0;&#x884C;&#x72B6;&#x6001;
 while (AppIsRunning) {
      //&#x7761;&#x7720;&#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85;&#x5524;&#x9192;&#x4E8B;&#x4EF6;
      id whoWakesMe = SleepForWakingUp();
      //&#x5F97;&#x5230;&#x5524;&#x9192;&#x4E8B;&#x4EF6;
      id event = GetEvent(whoWakesMe);
      //&#x5F00;&#x59CB;&#x5904;&#x7406;&#x4E8B;&#x4EF6;
      HandleEvent(event);
 }
 return 0;
}
</code></pre><p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;</p>
<ol>
<li><a href="http://blog.ibireme.com/2015/05/18/runloop/#base" target="_blank" rel="external">&#x300A;&#x6DF1;&#x5165;&#x7406;&#x89E3;RunLoop&#x300B;</a></li>
<li>&#x6458;&#x81EA;&#x535A;&#x6587;<a href="https://github.com/ming1016/study/wiki/CFRunLoop" target="_blank" rel="external"><strong><em>CFRunLoop</em></strong></a>&#xFF0C;&#x539F;&#x4F5C;&#x8005;&#x662F;<a href="http://weibo.com/u/1364395395" target="_blank" rel="external">&#x5FAE;&#x535A;@&#x6211;&#x5C31;&#x53EB;Sunny&#x600E;&#x4E48;&#x4E86;</a></li>
</ol>
<h3 id="32-objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;"><a href="#32-objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#xFF1F;" class="headerlink" title="32. objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#xFF1F;"></a>32. objc&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x673A;&#x5236;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x5185;&#x5B58;&#xFF1F;</h3><p>&#x901A;&#x8FC7; retainCount &#x7684;&#x673A;&#x5236;&#x6765;&#x51B3;&#x5B9A;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x9700;&#x8981;&#x91CA;&#x653E;&#x3002;<br>&#x6BCF;&#x6B21; runloop &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90FD;&#x4F1A;&#x68C0;&#x67E5;&#x5BF9;&#x8C61;&#x7684; retainCount&#xFF0C;&#x5982;&#x679C;retainCount &#x4E3A; 0&#xFF0C;&#x8BF4;&#x660E;&#x8BE5;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x5730;&#x65B9;&#x9700;&#x8981;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x91CA;&#x653E;&#x6389;&#x4E86;&#x3002;</p>
<h3 id="33-arc&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;"><a href="#33-ARC&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;&#xFF1F;" class="headerlink" title="33. ARC&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;&#xFF1F;"></a>33. ARC&#x901A;&#x8FC7;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;&#xFF1F;</h3><p> </p><p><del>&#x7F16;&#x8BD1;&#x65F6;&#x6839;&#x636E;&#x4EE3;&#x7801;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x63D2;&#x5165; retain/release<br></del></p><br>ARC&#x76F8;&#x5BF9;&#x4E8E;MRC&#xFF0C;&#x4E0D;&#x662F;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x6DFB;&#x52A0;retain/release/autorelease&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x3002;&#x5E94;&#x8BE5;&#x662F;&#x7F16;&#x8BD1;&#x671F;&#x548C;&#x8FD0;&#x884C;&#x671F;&#x4E24;&#x90E8;&#x5206;&#x5171;&#x540C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x7BA1;&#x7406;&#x5185;&#x5B58;&#x3002;<p></p>
<p>&#x5728;&#x7F16;&#x8BD1;&#x671F;&#xFF0C;ARC&#x7528;&#x7684;&#x662F;&#x66F4;&#x5E95;&#x5C42;&#x7684;C&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7684;retain/release/autorelease&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x6027;&#x80FD;&#x66F4;&#x597D;&#xFF0C;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x5728;ARC&#x73AF;&#x5883;&#x4E0B;&#x624B;&#x52A8;retain/release/autorelease&#xFF0C;&#x540C;&#x65F6;&#x5BF9;&#x540C;&#x4E00;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x540C;&#x4E00;&#x5BF9;&#x8C61;&#x7684;&#x6210;&#x5BF9;retain/release&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF08;&#x5373;&#x5FFD;&#x7565;&#x6389;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x64CD;&#x4F5C;&#xFF09;&#xFF1B;ARC&#x4E5F;&#x5305;&#x542B;&#x8FD0;&#x884C;&#x671F;&#x7EC4;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E2A;&#x5730;&#x65B9;&#x505A;&#x7684;&#x4F18;&#x5316;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x4E5F;&#x4E0D;&#x80FD;&#x88AB;&#x5FFD;&#x7565;&#x3002;&#x3010;TODO:&#x540E;&#x7EED;&#x66F4;&#x65B0;&#x4F1A;&#x8BE6;&#x7EC6;&#x63CF;&#x8FF0;&#x4E0B;&#x3011;</p>
<h3 id="34-&#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewdidload&#x4E2D;&#x521B;&#x5EFA;"><a href="#34-&#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#xFF1F;&#xFF08;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewDidLoad&#x4E2D;&#x521B;&#x5EFA;&#xFF09;" class="headerlink" title="34. &#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#xFF1F;&#xFF08;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewDidLoad&#x4E2D;&#x521B;&#x5EFA;&#xFF09;"></a>34. &#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;autorealese&#x5BF9;&#x8C61;&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x523B;&#x91CA;&#x653E;&#xFF1F;&#xFF08;&#x6BD4;&#x5982;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewDidLoad&#x4E2D;&#x521B;&#x5EFA;&#xFF09;</h3><p>&#x5206;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;&#x624B;&#x52A8;&#x5E72;&#x9884;&#x91CA;&#x653E;&#x65F6;&#x673A;&#x3001;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x53BB;&#x91CA;&#x653E;&#x3002;</p>
<ol>
<li>&#x624B;&#x52A8;&#x5E72;&#x9884;&#x91CA;&#x653E;&#x65F6;&#x673A;&#x2013;&#x6307;&#x5B9A;autoreleasepool<br> &#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;&#xFF1A;&#x5F53;&#x524D;&#x4F5C;&#x7528;&#x57DF;&#x5927;&#x62EC;&#x53F7;&#x7ED3;&#x675F;&#x65F6;&#x91CA;&#x653E;&#x3002;</li>
<li><p>&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x53BB;&#x91CA;&#x653E;&#x2013;&#x4E0D;&#x624B;&#x52A8;&#x6307;&#x5B9A;autoreleasepool</p>
<p>Autorelease&#x5BF9;&#x8C61;&#x51FA;&#x4E86;&#x4F5C;&#x7528;&#x57DF;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x521B;&#x5EFA;&#x7684;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x4E2D;&#xFF0C;&#x5E76;&#x4F1A;&#x5728;&#x5F53;&#x524D;&#x7684; runloop &#x8FED;&#x4EE3;&#x7ED3;&#x675F;&#x65F6;&#x91CA;&#x653E;&#x3002;</p>
</li>
</ol>
<p>&#x91CA;&#x653E;&#x7684;&#x65F6;&#x673A;&#x603B;&#x7ED3;&#x8D77;&#x6765;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E0B;&#x56FE;&#x6765;&#x8868;&#x793A;&#xFF1A;</p>
<p><img src="http://i61.tinypic.com/28kodwp.jpg" alt="autoreleasepool&#x4E0E; runloop &#x7684;&#x5173;&#x7CFB;&#x56FE;"></p>
<p>&#x4E0B;&#x9762;&#x5BF9;&#x8FD9;&#x5F20;&#x56FE;&#x8FDB;&#x884C;&#x8BE6;&#x7EC6;&#x7684;&#x89E3;&#x91CA;&#xFF1A;</p>
<p>&#x4ECE;&#x7A0B;&#x5E8F;&#x542F;&#x52A8;&#x5230;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x8FD0;&#x884C;&#x5FAA;&#x73AF;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x505C;&#x4E0B;&#x6765;&#xFF0C;&#x7B49;&#x5F85;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#xFF0C;&#x7528;&#x6237;&#x7684;&#x6BCF;&#x4E00;&#x6B21;&#x4EA4;&#x4E92;&#x90FD;&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x6B21;&#x8FD0;&#x884C;&#x5FAA;&#x73AF;&#xFF0C;&#x6765;&#x5904;&#x7406;&#x7528;&#x6237;&#x6240;&#x6709;&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3001;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF1A;<br><strong>&#x6240;&#x6709; autorelease &#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x51FA;&#x4E86;&#x4F5C;&#x7528;&#x57DF;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x5230;&#x6700;&#x8FD1;&#x521B;&#x5EFA;&#x7684;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x4E2D;&#x3002;</strong></p>
<p>&#x4F46;&#x662F;&#x5982;&#x679C;&#x6BCF;&#x6B21;&#x90FD;&#x653E;&#x8FDB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; <code>main.m</code> &#x4E2D;&#x7684; autoreleasepool &#x4E2D;&#xFF0C;&#x8FDF;&#x65E9;&#x6709;&#x88AB;&#x6491;&#x6EE1;&#x7684;&#x4E00;&#x523B;&#x3002;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#x5FC5;&#x5B9A;&#x6709;&#x4E00;&#x4E2A;&#x91CA;&#x653E;&#x7684;&#x52A8;&#x4F5C;&#x3002;&#x4F55;&#x65F6;&#xFF1F;</p>
<p>&#x5728;&#x4E00;&#x6B21;&#x5B8C;&#x6574;&#x7684;&#x8FD0;&#x884C;&#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x4E4B;&#x524D;&#xFF0C;&#x4F1A;&#x88AB;&#x9500;&#x6BC1;&#x3002;</p>
<p>&#x90A3;&#x4EC0;&#x4E48;&#x65F6;&#x95F4;&#x4F1A;&#x521B;&#x5EFA;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#xFF1F;&#x8FD0;&#x884C;&#x5FAA;&#x73AF;&#x68C0;&#x6D4B;&#x5230;&#x4E8B;&#x4EF6;&#x5E76;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x521B;&#x5EFA;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x3002; </p>
<p>&#x5B50;&#x7EBF;&#x7A0B;&#x7684; runloop &#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x5DE5;&#x4F5C;&#xFF0C;&#x65E0;&#x6CD5;&#x4E3B;&#x52A8;&#x521B;&#x5EFA;&#xFF0C;&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x3002;</p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7684; NSOperation &#x548C; NSThread &#x9700;&#x8981;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x3002;&#x6BD4;&#x5982;&#xFF1A; &#x81EA;&#x5B9A;&#x4E49;&#x7684; NSOperation &#x7C7B;&#x4E2D;&#x7684; main &#x65B9;&#x6CD5;&#x91CC;&#x5C31;&#x5FC5;&#x987B;&#x6DFB;&#x52A0;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x3002;&#x5426;&#x5219;&#x51FA;&#x4E86;&#x4F5C;&#x7528;&#x57DF;&#x540E;&#xFF0C;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x5BF9;&#x8C61;&#x4F1A;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x53BB;&#x5904;&#x7406;&#x5B83;&#xFF0C;&#x800C;&#x9020;&#x6210;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x3002;</p>
<p>&#x4F46;&#x5BF9;&#x4E8E; blockOperation &#x548C; invocationOperation &#x8FD9;&#x79CD;&#x9ED8;&#x8BA4;&#x7684;Operation &#xFF0C;&#x7CFB;&#x7EDF;&#x5DF2;&#x7ECF;&#x5E2E;&#x6211;&#x4EEC;&#x5C01;&#x88C5;&#x597D;&#x4E86;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x3002;</p>
<p>@autoreleasepool &#x5F53;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x88AB;&#x9500;&#x6BC1;&#x6216;&#x8005;&#x8017;&#x5C3D;&#x65F6;&#xFF0C;&#x4F1A;&#x5411;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x53D1;&#x9001; release &#x6D88;&#x606F;&#xFF0C;&#x91CA;&#x653E;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x6C60;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x3002;</p>
<p> &#x5982;&#x679C;&#x5728;&#x4E00;&#x4E2A;vc&#x7684;viewDidLoad&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; Autorelease&#x5BF9;&#x8C61;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x5BF9;&#x8C61;&#x4F1A;&#x5728; viewDidAppear &#x65B9;&#x6CD5;&#x6267;&#x884C;&#x524D;&#x5C31;&#x88AB;&#x9500;&#x6BC1;&#x4E86;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href="http://blog.sunnyxx.com/2014/10/15/behind-autorelease/" target="_blank" rel="external">&#x300A;&#x9ED1;&#x5E55;&#x80CC;&#x540E;&#x7684;Autorelease&#x300B;</a></p>
<h3 id="35-bad_access&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;"><a href="#35-BAD-ACCESS&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;&#xFF1F;" class="headerlink" title="35. BAD_ACCESS&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;&#xFF1F;"></a>35. BAD_ACCESS&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x51FA;&#x73B0;&#xFF1F;</h3><p>&#x8BBF;&#x95EE;&#x4E86;&#x91CE;&#x6307;&#x9488;&#xFF0C;&#x6BD4;&#x5982;&#x5BF9;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x91CA;&#x653E;&#x7684;&#x5BF9;&#x8C61;&#x6267;&#x884C;&#x4E86;release&#x3001;&#x8BBF;&#x95EE;&#x5DF2;&#x7ECF;&#x91CA;&#x653E;&#x5BF9;&#x8C61;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x6216;&#x8005;&#x53D1;&#x6D88;&#x606F;&#x3002;<br>&#x6B7B;&#x5FAA;&#x73AF;</p>
<h3 id="36-&#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;"><a href="#36-&#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;&#xFF1F;" class="headerlink" title="36. &#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;&#xFF1F;"></a>36. &#x82F9;&#x679C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;autoreleasepool&#x7684;&#xFF1F;</h3><p>autoreleasepool &#x4EE5;&#x4E00;&#x4E2A;&#x961F;&#x5217;&#x6570;&#x7EC4;&#x7684;&#x5F62;&#x5F0F;&#x5B9E;&#x73B0;,&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x4E0B;&#x5217;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x5B8C;&#x6210;.</p>
<ol>
<li><code>objc_autoreleasepoolPush</code></li>
<li><code>objc_autoreleasepoolPop</code></li>
<li><code>objc_autorelease</code></li>
</ol>
<p>&#x770B;&#x51FD;&#x6570;&#x540D;&#x5C31;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x5BF9; autorelease &#x5206;&#x522B;&#x6267;&#x884C; push&#xFF0C;&#x548C; pop &#x64CD;&#x4F5C;&#x3002;&#x9500;&#x6BC1;&#x5BF9;&#x8C61;&#x65F6;&#x6267;&#x884C;release&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF1A;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x7528;&#x7C7B;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x90FD;&#x662F; Autorelease &#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x65E6; Person &#x51FA;&#x4E86;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x5F53;&#x5728; Person &#x7684; dealloc &#x65B9;&#x6CD5;&#x4E2D;&#x6253;&#x4E0A;&#x65AD;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x8C03;&#x7528;&#x5806;&#x6808;&#x4FE1;&#x606F;&#xFF1A;</p>
<p> <img src="http://i60.tinypic.com/15mfj11.jpg" alt="enter image description here"></p>
<h3 id="37-&#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x5982;&#x4F55;&#x89E3;&#x51B3;"><a href="#37-&#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#xFF0C;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;" class="headerlink" title="37. &#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#xFF0C;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;"></a>37. &#x4F7F;&#x7528;block&#x65F6;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4F1A;&#x53D1;&#x751F;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#xFF0C;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;</h3><p>&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4E2D;&#x5F3A;&#x5F15;&#x7528;&#x4E86;block&#xFF0C;&#x5728;block&#x4E2D;&#x53C8;&#x5F3A;&#x5F15;&#x7528;&#x4E86;&#x8BE5;&#x5BF9;&#x8C61;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x5C04;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x5C06;&#x8BE5;&#x5BF9;&#x8C61;&#x4F7F;&#x7528;<strong>weak&#x6216;&#x8005;</strong>block&#x4FEE;&#x9970;&#x7B26;&#x4FEE;&#x9970;&#x4E4B;&#x540E;&#x518D;&#x5728;block&#x4E2D;&#x4F7F;&#x7528;&#x3002;</p>
<ol>
<li>id weak weakSelf = self;<br>&#x6216;&#x8005; weak __typeof(&amp;*self)weakSelf = self&#x8BE5;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x5B8F;</li>
<li>id __block weakSelf = self;</li>
</ol>
<p>&#x6216;&#x8005;&#x5C06;&#x5176;&#x4E2D;&#x4E00;&#x65B9;&#x5F3A;&#x5236;&#x5236;&#x7A7A; <code>xxx = nil</code>&#x3002;</p>
<p>&#x68C0;&#x6D4B;&#x4EE3;&#x7801;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; Facebook &#x5F00;&#x6E90;&#x7684;&#x4E00;&#x4E2A;&#x68C0;&#x6D4B;&#x5DE5;&#x5177;  <a href="https://github.com/facebook/FBRetainCycleDetector" target="_blank" rel="external"><strong><em>FBRetainCycleDetector</em></strong></a> &#x3002;</p>
<h3 id="38-&#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;"><a href="#38-&#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF1F;" class="headerlink" title="38. &#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF1F;"></a>38. &#x5728;block&#x5185;&#x5982;&#x4F55;&#x4FEE;&#x6539;block&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF1F;</h3><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5728;block&#x4E2D;&#x8BBF;&#x95EE;&#x7684;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x662F;&#x590D;&#x5236;&#x8FC7;&#x53BB;&#x7684;&#xFF0C;&#x5373;&#xFF1A;<strong>&#x5199;&#x64CD;&#x4F5C;&#x4E0D;&#x5BF9;&#x539F;&#x53D8;&#x91CF;&#x751F;&#x6548;</strong>&#x3002;&#x4F46;&#x662F;&#x4F60;&#x53EF;&#x4EE5;&#x52A0;&#x4E0A; <code>__block</code> &#x6765;&#x8BA9;&#x5176;&#x5199;&#x64CD;&#x4F5C;&#x751F;&#x6548;&#xFF0C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">__block <span class="keyword">int</span> a = <span class="number">0</span>;</div><div class="line"><span class="keyword">void</span> (^foo)(<span class="keyword">void</span>) = ^{ </div><div class="line">    a = <span class="number">1</span>; </div><div class="line">};</div><div class="line">foo(); </div><div class="line"><span class="comment">//&#x8FD9;&#x91CC;&#xFF0C;a&#x7684;&#x503C;&#x88AB;&#x4FEE;&#x6539;&#x4E3A;1</span></div></pre></td></tr></table></figure>
<p>&#x8FD9;&#x662F; <a href="http://weibo.com/tangqiaoboy" target="_blank" rel="external">&#x5FAE;&#x535A;@&#x5510;&#x5DE7;_boy</a>&#x7684;&#x300A;iOS&#x5F00;&#x53D1;&#x8FDB;&#x9636;&#x300B;&#x4E2D;&#x7684;&#x7B2C;11.2.3&#x7AE0;&#x8282;&#x4E2D;&#x7684;&#x63CF;&#x8FF0;&#x3002;&#x4F60;&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x5728;&#x9762;&#x8BD5;&#x4E2D;&#x8FD9;&#x6837;&#x56DE;&#x7B54;&#xFF0C;&#x4F46;&#x4F60;&#x5E76;&#x6CA1;&#x6709;&#x7B54;&#x5230;&#x201C;&#x70B9;&#x5B50;&#x4E0A;&#x201D;&#x3002;&#x771F;&#x6B63;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x4E66;&#x8FD9;&#x672C;&#x4E66;&#x91CC;&#x5199;&#x7684;&#x8FD9;&#x4E48;&#x201C;&#x795E;&#x5947;&#x201D;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x79CD;&#x8BF4;&#x6CD5;&#x4E5F;&#x6709;&#x70B9;&#x7275;&#x5F3A;&#x3002;&#x9762;&#x8BD5;&#x5B98;&#x80AF;&#x5B9A;&#x4F1A;&#x8FFD;&#x95EE;&#x201C;&#x4E3A;&#x4EC0;&#x4E48;&#x5199;&#x64CD;&#x4F5C;&#x5C31;&#x751F;&#x6548;&#x4E86;&#xFF1F;&#x201D;&#x771F;&#x6B63;&#x7684;&#x539F;&#x56E0;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<blockquote>
<p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF1A;<strong>Block&#x4E0D;&#x5141;&#x8BB8;&#x4FEE;&#x6539;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x503C;</strong>&#xFF0C;&#x8FD9;&#x91CC;&#x6240;&#x8BF4;&#x7684;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x6307;&#x7684;&#x662F;&#x6808;&#x4E2D;&#x6307;&#x9488;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x3002;<code>__block</code> &#x6240;&#x8D77;&#x5230;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x53EA;&#x8981;&#x89C2;&#x5BDF;&#x5230;&#x8BE5;&#x53D8;&#x91CF;&#x88AB; block &#x6240;&#x6301;&#x6709;&#xFF0C;&#x5C31;&#x5C06;&#x201C;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x201D;&#x5728;&#x6808;&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x653E;&#x5230;&#x4E86;&#x5806;&#x4E2D;&#x3002;&#x8FDB;&#x800C;&#x5728;block&#x5185;&#x90E8;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x3002;</p>
</blockquote>
<p><strong>Block&#x4E0D;&#x5141;&#x8BB8;&#x4FEE;&#x6539;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x503C;</strong>&#x3002;Apple&#x8FD9;&#x6837;&#x8BBE;&#x8BA1;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x8003;&#x8651;&#x5230;&#x4E86;block&#x7684;&#x7279;&#x6B8A;&#x6027;&#xFF0C;block&#x4E5F;&#x5C5E;&#x4E8E;&#x201C;&#x51FD;&#x6570;&#x201D;&#x7684;&#x8303;&#x7574;&#xFF0C;&#x53D8;&#x91CF;&#x8FDB;&#x5165;block&#xFF0C;&#x5B9E;&#x9645;&#x5C31;&#x662F;&#x5DF2;&#x7ECF;&#x6539;&#x53D8;&#x4E86;&#x4F5C;&#x7528;&#x57DF;&#x3002;&#x5728;&#x51E0;&#x4E2A;&#x4F5C;&#x7528;&#x57DF;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x5207;&#x6362;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x52A0;&#x4E0A;&#x8FD9;&#x6837;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x53D8;&#x91CF;&#x7684;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x5C06;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x3002;&#x53C8;&#x6BD4;&#x5982;&#x6211;&#x60F3;&#x5728;block&#x5185;&#x58F0;&#x660E;&#x4E86;&#x4E00;&#x4E2A;&#x4E0E;&#x5916;&#x90E8;&#x540C;&#x540D;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x6B64;&#x65F6;&#x662F;&#x5141;&#x8BB8;&#x5462;&#x8FD8;&#x662F;&#x4E0D;&#x5141;&#x8BB8;&#x5462;&#xFF1F;&#x53EA;&#x6709;&#x52A0;&#x4E0A;&#x4E86;&#x8FD9;&#x6837;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x666F;&#x624D;&#x80FD;&#x5B9E;&#x73B0;&#x3002;&#x4E8E;&#x662F;&#x6808;&#x533A;&#x53D8;&#x6210;&#x4E86;&#x7EA2;&#x706F;&#x533A;&#xFF0C;&#x5806;&#x533A;&#x53D8;&#x6210;&#x4E86;&#x7EFF;&#x706F;&#x533A;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6253;&#x5370;&#x4E0B;&#x5185;&#x5B58;&#x5730;&#x5740;&#x6765;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">__block <span class="keyword">int</span> a = <span class="number">0</span>;</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;&#x5B9A;&#x4E49;&#x524D;&#xFF1A;%p&quot;</span>, &amp;a);         <span class="comment">//&#x6808;&#x533A;</span></div><div class="line"><span class="keyword">void</span> (^foo)(<span class="keyword">void</span>) = ^{</div><div class="line">    a = <span class="number">1</span>;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;block&#x5185;&#x90E8;&#xFF1A;%p&quot;</span>, &amp;a);    <span class="comment">//&#x5806;&#x533A;</span></div><div class="line">};</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;&#x5B9A;&#x4E49;&#x540E;&#xFF1A;%p&quot;</span>, &amp;a);         <span class="comment">//&#x5806;&#x533A;</span></div><div class="line">foo();</div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">2016</span><span class="number">-05</span><span class="number">-17</span> <span class="number">02</span>:<span class="number">03</span>:<span class="number">33.559</span> LeanCloudChatKit-iOS[<span class="number">1505</span>:<span class="number">713679</span>] &#x5B9A;&#x4E49;&#x524D;&#xFF1A;<span class="number">0x16fda86f8</span></div><div class="line"><span class="number">2016</span><span class="number">-05</span><span class="number">-17</span> <span class="number">02</span>:<span class="number">03</span>:<span class="number">33.559</span> LeanCloudChatKit-iOS[<span class="number">1505</span>:<span class="number">713679</span>] &#x5B9A;&#x4E49;&#x540E;&#xFF1A;<span class="number">0x155b22fc8</span></div><div class="line"><span class="number">2016</span><span class="number">-05</span><span class="number">-17</span> <span class="number">02</span>:<span class="number">03</span>:<span class="number">33.559</span> LeanCloudChatKit-iOS[<span class="number">1505</span>:<span class="number">713679</span>] block&#x5185;&#x90E8;&#xFF1A; <span class="number">0x155b22fc8</span></div></pre></td></tr></table></figure>
<p>&#x201C;&#x5B9A;&#x4E49;&#x540E;&#x201D;&#x548C;&#x201C;block&#x5185;&#x90E8;&#x201D;&#x4E24;&#x8005;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053; block &#x5185;&#x90E8;&#x7684;&#x53D8;&#x91CF;&#x4F1A;&#x88AB; copy &#x5230;&#x5806;&#x533A;&#xFF0C;&#x201C;block&#x5185;&#x90E8;&#x201D;&#x6253;&#x5370;&#x7684;&#x662F;&#x5806;&#x5730;&#x5740;&#xFF0C;&#x56E0;&#x800C;&#x4E5F;&#x5C31;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x201C;&#x5B9A;&#x4E49;&#x540E;&#x201D;&#x6253;&#x5370;&#x7684;&#x4E5F;&#x662F;&#x5806;&#x7684;&#x5730;&#x5740;&#x3002;</p>
<p> &#x90A3;&#x4E48;&#x5982;&#x4F55;&#x8BC1;&#x660E;&#x201C;block&#x5185;&#x90E8;&#x201D;&#x6253;&#x5370;&#x7684;&#x662F;&#x5806;&#x5730;&#x5740;&#xFF1F;</p>
<p> &#x628A;&#x4E09;&#x4E2A;16&#x8FDB;&#x5236;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x8F6C;&#x6210;10&#x8FDB;&#x5236;&#x5C31;&#x662F;&#xFF1A;</p>
<ol>
<li>&#x5B9A;&#x4E49;&#x540E;&#x524D;&#xFF1A;6171559672</li>
<li>block&#x5185;&#x90E8;&#xFF1A;5732708296</li>
<li>&#x5B9A;&#x4E49;&#x540E;&#x540E;&#xFF1A;5732708296</li>
</ol>
<p>&#x4E2D;&#x95F4;&#x76F8;&#x5DEE;438851376&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; 418.5M &#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x56E0;&#x4E3A;&#x5806;&#x5730;&#x5740;&#x8981;&#x5C0F;&#x4E8E;&#x6808;&#x5730;&#x5740;&#xFF0C;&#x53C8;&#x56E0;&#x4E3A;iOS&#x4E2D;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x6808;&#x533A;&#x5185;&#x5B58;&#x53EA;&#x6709;1M&#xFF0C;Mac&#x4E5F;&#x53EA;&#x6709;8M&#xFF0C;&#x663E;&#x7136;a&#x5DF2;&#x7ECF;&#x662F;&#x5728;&#x5806;&#x533A;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x4E5F;&#x8BC1;&#x5B9E;&#x4E86;&#xFF1A;a &#x5728;&#x5B9A;&#x4E49;&#x524D;&#x662F;&#x6808;&#x533A;&#xFF0C;&#x4F46;&#x53EA;&#x8981;&#x8FDB;&#x5165;&#x4E86; block &#x533A;&#x57DF;&#xFF0C;&#x5C31;&#x53D8;&#x6210;&#x4E86;&#x5806;&#x533A;&#x3002;&#x8FD9;&#x624D;&#x662F; <code>__block</code> &#x5173;&#x952E;&#x5B57;&#x7684;&#x771F;&#x6B63;&#x4F5C;&#x7528;&#x3002;</p>
<p> <code>__block</code> &#x5173;&#x952E;&#x5B57;&#x4FEE;&#x9970;&#x540E;&#xFF0C;int&#x7C7B;&#x578B;&#x4E5F;&#x4ECE;4&#x5B57;&#x8282;&#x53D8;&#x6210;&#x4E86;32&#x5B57;&#x8282;&#xFF0C;&#x8FD9;&#x662F; Foundation &#x6846;&#x67B6; malloc &#x51FA;&#x6765;&#x7684;&#x3002;&#x8FD9;&#x4E5F;&#x540C;&#x6837;&#x80FD;&#x8BC1;&#x5B9E;&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x8BBA;&#x3002;&#xFF08;PS&#xFF1A;&#x5C45;&#x7136;&#x6BD4; NSObject alloc &#x51FA;&#x6765;&#x7684; 16  &#x5B57;&#x8282;&#x8981;&#x591A;&#x4E00;&#x500D;&#xFF09;&#x3002;</p>
<p>&#x7406;&#x89E3;&#x5230;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5806;&#x6808;&#x5730;&#x5740;&#x7684;&#x53D8;&#x66F4;&#xFF0C;&#x800C;&#x975E;&#x6240;&#x8C13;&#x7684;&#x201C;&#x5199;&#x64CD;&#x4F5C;&#x751F;&#x6548;&#x201D;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x81F3;&#x5173;&#x91CD;&#x8981;&#xFF0C;&#x8981;&#x4E0D;&#x7136;&#x4F60;&#x5982;&#x4F55;&#x89E3;&#x91CA;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x73B0;&#x8C61;&#xFF1A;</p>
<p>&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#xFF0C;&#x5E76;&#x4E14;&#x5728;block&#x4E2D;&#x6210;&#x529F;&#x5C06;a&#x7684;&#x4ECE;Tom&#x4FEE;&#x6539;&#x4E3A;Jerry&#x3002;<br>&#x200B;<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSMutableString</span> *a = [<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@&quot;Tom&quot;</span>];</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;\n &#x5B9A;&#x4EE5;&#x524D;&#xFF1A;------------------------------------\n\</span></div><div class="line">      a&#x6307;&#x5411;&#x7684;&#x5806;&#x4E2D;&#x5730;&#x5740;&#xFF1A;%p&#xFF1B;a&#x5728;&#x6808;&#x4E2D;&#x7684;&#x6307;&#x9488;&#x5730;&#x5740;&#xFF1A;%p&quot;, a, &amp;a);               <span class="comment">//a&#x5728;&#x6808;&#x533A;</span></div><div class="line"><span class="keyword">void</span> (^foo)(<span class="keyword">void</span>) = ^{</div><div class="line">    a.string = <span class="string">@&quot;Jerry&quot;</span>;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;\n block&#x5185;&#x90E8;&#xFF1A;------------------------------------\n\</span></div><div class="line">     a&#x6307;&#x5411;&#x7684;&#x5806;&#x4E2D;&#x5730;&#x5740;&#xFF1A;%p&#xFF1B;a&#x5728;&#x6808;&#x4E2D;&#x7684;&#x6307;&#x9488;&#x5730;&#x5740;&#xFF1A;%p&quot;, a, &amp;a);               <span class="comment">//a&#x5728;&#x6808;&#x533A;</span></div><div class="line">    a = [<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@&quot;William&quot;</span>];</div><div class="line">};</div><div class="line">foo();</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;\n &#x5B9A;&#x4EE5;&#x540E;&#xFF1A;------------------------------------\n\</span></div><div class="line">      a&#x6307;&#x5411;&#x7684;&#x5806;&#x4E2D;&#x5730;&#x5740;&#xFF1A;%p&#xFF1B;a&#x5728;&#x6808;&#x4E2D;&#x7684;&#x6307;&#x9488;&#x5730;&#x5740;&#xFF1A;%p&quot;, a, &amp;a);               <span class="comment">//a&#x5728;&#x6808;&#x533A;</span></div></pre></td></tr></table></figure></p>
<p><img src="http://i66.tinypic.com/34euhcy.jpg" alt="enter image description here"></p>
<p> &#x8FD9;&#x91CC;&#x7684;a&#x5DF2;&#x7ECF;&#x7531;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x53D8;&#x6210;&#x4E86;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x3002;block&#x4F1A;&#x5BF9;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x7684;&#x6307;&#x9488;&#x8FDB;&#x884C;copy&#xFF0C;copy&#x5230;&#x5806;&#x4E2D;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x8BE5;&#x6307;&#x9488;&#x6240;&#x6307;&#x5411;&#x7684;&#x5806;&#x4E2D;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;block&#x4F53;&#x5185;&#x4FEE;&#x6539;&#x7684;&#x5B9E;&#x9645;&#x662F;a&#x6307;&#x5411;&#x7684;&#x5806;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p> &#x4F46;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x50CF;&#x4E0A;&#x9762;&#x56FE;&#x7247;&#x4E2D;&#x7684;65&#x884C;&#x90A3;&#x6837;&#x505A;&#xFF0C;&#x7ED3;&#x679C;&#x4F1A;&#x7F16;&#x8BD1;&#x4E0D;&#x901A;&#x8FC7;&#xFF0C;&#x90A3;&#x662F;&#x56E0;&#x4E3A;&#x6B64;&#x65F6;&#x4F60;&#x5728;&#x4FEE;&#x6539;&#x7684;&#x5C31;&#x4E0D;&#x662F;&#x5806;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x662F;&#x6808;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x4E0A;&#x6587;&#x5DF2;&#x7ECF;&#x8BF4;&#x8FC7;&#xFF1A;<strong>Block&#x4E0D;&#x5141;&#x8BB8;&#x4FEE;&#x6539;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x503C;</strong>&#xFF0C;&#x8FD9;&#x91CC;&#x6240;&#x8BF4;&#x7684;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x6307;&#x7684;&#x662F;&#x6808;&#x4E2D;&#x6307;&#x9488;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x3002;&#x6808;&#x533A;&#x662F;&#x7EA2;&#x706F;&#x533A;&#xFF0C;&#x5806;&#x533A;&#x624D;&#x662F;&#x7EFF;&#x706F;&#x533A;&#x3002;</p>
<h3 id="39-&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block-api&#x5982;uiview&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;"><a href="#39-&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block-api&#xFF08;&#x5982;UIView&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#xFF09;&#xFF0C;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;&#xFF1F;" class="headerlink" title="39. &#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block api&#xFF08;&#x5982;UIView&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#xFF09;&#xFF0C;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;&#xFF1F;"></a>39. &#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block api&#xFF08;&#x5982;UIView&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#xFF09;&#xFF0C;&#x662F;&#x5426;&#x4E5F;&#x8003;&#x8651;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x95EE;&#x9898;&#xFF1F;</h3><p>&#x7CFB;&#x7EDF;&#x7684;&#x67D0;&#x4E9B;block api&#x4E2D;&#xFF0C;UIView&#x7684;block&#x7248;&#x672C;&#x5199;&#x52A8;&#x753B;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x8003;&#x8651;&#xFF0C;&#x4F46;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;api &#x9700;&#x8981;&#x8003;&#x8651;&#xFF1A;</p>
<p>&#x6240;&#x8C13;&#x201C;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x201D;&#x662F;&#x6307;&#x53CC;&#x5411;&#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x90A3;&#x4E9B;&#x201C;&#x5355;&#x5411;&#x7684;&#x5F3A;&#x5F15;&#x7528;&#x201D;&#xFF08;block &#x5F3A;&#x5F15;&#x7528; self &#xFF09;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x8FD9;&#x4E9B;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="built_in">UIView</span> animateWithDuration:duration animations:^{ [<span class="keyword">self</span>.superview layoutIfNeeded]; }];</div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[<span class="built_in">NSOperationQueue</span> mainQueue] addOperationWithBlock:^{ <span class="keyword">self</span>.someProperty = xyz; }];</div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserverForName:<span class="string">@&quot;someNotification&quot;</span> </div><div class="line">                                                  object:<span class="literal">nil</span> </div><div class="line">                           queue:[<span class="built_in">NSOperationQueue</span> mainQueue]</div><div class="line">                                              usingBlock:^(<span class="built_in">NSNotification</span> * notification) {</div><div class="line">                                                    <span class="keyword">self</span>.someProperty = xyz; }];</div></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0D;&#x9700;&#x8981;&#x8003;&#x8651;&#x201C;&#x5F15;&#x7528;&#x5FAA;&#x73AF;&#x201D;&#x3002;</p>
<p>&#x4F46;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x53C2;&#x6570;&#x4E2D;&#x53EF;&#x80FD;&#x542B;&#x6709; ivar &#x7684;&#x7CFB;&#x7EDF; api &#xFF0C;&#x5982; GCD &#x3001;NSNotificationCenter&#x5C31;&#x8981;&#x5C0F;&#x5FC3;&#x4E00;&#x70B9;&#xFF1A;&#x6BD4;&#x5982;GCD &#x5185;&#x90E8;&#x5982;&#x679C;&#x5F15;&#x7528;&#x4E86; self&#xFF0C;&#x800C;&#x4E14; GCD &#x7684;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x662F; ivar&#xFF0C;&#x5219;&#x8981;&#x8003;&#x8651;&#x5230;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">__<span class="keyword">weak</span> __typeof__(<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</div><div class="line">dispatch_group_async(_operationsGroup, _operationsQueue, ^</div><div class="line">{</div><div class="line">__typeof__(<span class="keyword">self</span>) strongSelf = weakSelf;</div><div class="line">[strongSelf doSomething];</div><div class="line">[strongSelf doSomethingElse];</div><div class="line">} );</div></pre></td></tr></table></figure>
<p>&#x7C7B;&#x4F3C;&#x7684;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">__<span class="keyword">weak</span> __typeof__(<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</div><div class="line">_observer = [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserverForName:<span class="string">@&quot;testKey&quot;</span></div><div class="line">                                                              object:<span class="literal">nil</span></div><div class="line">                                                               queue:<span class="literal">nil</span></div><div class="line">                                                          usingBlock:^(<span class="built_in">NSNotification</span> *note) {</div><div class="line">    __typeof__(<span class="keyword">self</span>) strongSelf = weakSelf;</div><div class="line">    [strongSelf dismissModalViewControllerAnimated:<span class="literal">YES</span>];</div><div class="line">}];</div></pre></td></tr></table></figure>
<p>self &#x2013;&gt; _observer &#x2013;&gt; block &#x2013;&gt; self &#x663E;&#x7136;&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#x3002;</p>
<p>&#x68C0;&#x6D4B;&#x4EE3;&#x7801;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; Facebook &#x5F00;&#x6E90;&#x7684;&#x4E00;&#x4E2A;&#x68C0;&#x6D4B;&#x5DE5;&#x5177;  <a href="https://github.com/facebook/FBRetainCycleDetector" target="_blank" rel="external"><strong><em>FBRetainCycleDetector</em></strong></a> &#x3002;</p>
<h3 id="40-gcd&#x7684;&#x961F;&#x5217;dispatch_queue_t&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;"><a href="#40-GCD&#x7684;&#x961F;&#x5217;&#xFF08;dispatch-queue-t&#xFF09;&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1F;" class="headerlink" title="40. GCD&#x7684;&#x961F;&#x5217;&#xFF08;dispatch_queue_t&#xFF09;&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1F;"></a>40. GCD&#x7684;&#x961F;&#x5217;&#xFF08;<code>dispatch_queue_t</code>&#xFF09;&#x5206;&#x54EA;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1F;</h3><ol>
<li>&#x4E32;&#x884C;&#x961F;&#x5217;Serial Dispatch Queue</li>
<li>&#x5E76;&#x884C;&#x961F;&#x5217;Concurrent Dispatch Queue</li>
</ol>
<h3 id="41-&#x5982;&#x4F55;&#x7528;gcd&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;"><a href="#41-&#x5982;&#x4F55;&#x7528;GCD&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#xFF1F;&#xFF08;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;&#xFF09;" class="headerlink" title="41. &#x5982;&#x4F55;&#x7528;GCD&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#xFF1F;&#xFF08;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;&#xFF09;"></a>41. &#x5982;&#x4F55;&#x7528;GCD&#x540C;&#x6B65;&#x82E5;&#x5E72;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#xFF1F;&#xFF08;&#x5982;&#x6839;&#x636E;&#x82E5;&#x5E72;&#x4E2A;url&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x591A;&#x5F20;&#x56FE;&#x7247;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x5408;&#x6210;&#x4E00;&#x5F20;&#x6574;&#x56FE;&#xFF09;</h3><p>&#x4F7F;&#x7528;Dispatch Group&#x8FFD;&#x52A0;block&#x5230;Global Group Queue,&#x8FD9;&#x4E9B;block&#x5982;&#x679C;&#x5168;&#x90E8;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#xFF0C;&#x5C31;&#x4F1A;&#x6267;&#x884C;Main Dispatch Queue&#x4E2D;&#x7684;&#x7ED3;&#x675F;&#x5904;&#x7406;&#x7684;block&#x3002;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</div><div class="line">dispatch_group_t group = dispatch_group_create();</div><div class="line">dispatch_group_async(group, queue, ^{ <span class="comment">/*&#x52A0;&#x8F7D;&#x56FE;&#x7247;1 */</span> });</div><div class="line">dispatch_group_async(group, queue, ^{ <span class="comment">/*&#x52A0;&#x8F7D;&#x56FE;&#x7247;2 */</span> });</div><div class="line">dispatch_group_async(group, queue, ^{ <span class="comment">/*&#x52A0;&#x8F7D;&#x56FE;&#x7247;3 */</span> }); </div><div class="line">dispatch_group_notify(group, dispatch_get_main_queue(), ^{</div><div class="line">        <span class="comment">// &#x5408;&#x5E76;&#x56FE;&#x7247;</span></div><div class="line">});</div></pre></td></tr></table></figure>
<h3 id="42-dispatch_barrier_async&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;"><a href="#42-dispatch-barrier-async&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="42. dispatch_barrier_async&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"></a>42. <code>dispatch_barrier_async</code>&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h3><p> &#x5728;&#x5E76;&#x884C;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x67D0;&#x4E9B;&#x4EFB;&#x52A1;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x4E00;&#x4E9B;&#x4EFB;&#x52A1;&#x5B8C;&#x6210;&#x540E;&#x624D;&#x80FD;&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#xFF0C;&#x4F7F;&#x7528; barrier &#x6765;&#x7B49;&#x5F85;&#x4E4B;&#x524D;&#x4EFB;&#x52A1;&#x5B8C;&#x6210;&#xFF0C;&#x907F;&#x514D;&#x6570;&#x636E;&#x7ADE;&#x4E89;&#x7B49;&#x95EE;&#x9898;&#x3002;<br> <code>dispatch_barrier_async</code> &#x51FD;&#x6570;&#x4F1A;&#x7B49;&#x5F85;&#x8FFD;&#x52A0;&#x5230;Concurrent Dispatch Queue&#x5E76;&#x884C;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x5168;&#x90E8;&#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6267;&#x884C; <code>dispatch_barrier_async</code> &#x51FD;&#x6570;&#x8FFD;&#x52A0;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x7B49; <code>dispatch_barrier_async</code> &#x8FFD;&#x52A0;&#x7684;&#x5904;&#x7406;&#x6267;&#x884C;&#x7ED3;&#x675F;&#x4E4B;&#x540E;&#xFF0C;Concurrent Dispatch Queue&#x624D;&#x6062;&#x590D;&#x4E4B;&#x524D;&#x7684;&#x52A8;&#x4F5C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;</p>
<p>&#x6253;&#x4E2A;&#x6BD4;&#x65B9;&#xFF1A;&#x6BD4;&#x5982;&#x4F60;&#x4EEC;&#x516C;&#x53F8;&#x5468;&#x672B;&#x8DDF;&#x56E2;&#x65C5;&#x6E38;&#xFF0C;&#x9AD8;&#x901F;&#x4F11;&#x606F;&#x7AD9;&#x4E0A;&#xFF0C;&#x53F8;&#x673A;&#x8BF4;&#xFF1A;&#x5927;&#x5BB6;&#x90FD;&#x53BB;&#x4E0A;&#x5395;&#x6240;&#xFF0C;&#x901F;&#x6218;&#x901F;&#x51B3;&#xFF0C;&#x4E0A;&#x5B8C;&#x5395;&#x6240;&#x5C31;&#x4E0A;&#x9AD8;&#x901F;&#x3002;&#x8D85;&#x5927;&#x7684;&#x516C;&#x5171;&#x5395;&#x6240;&#xFF0C;&#x5927;&#x5BB6;&#x540C;&#x65F6;&#x53BB;&#xFF0C;&#x7A0B;&#x5E8F;&#x733F;&#x5F88;&#x5FEB;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x4F46;&#x7A0B;&#x5E8F;&#x5A9B;&#x5C31;&#x53EF;&#x80FD;&#x4F1A;&#x6162;&#x4E00;&#x4E9B;&#xFF0C;&#x5373;&#x4F7F;&#x4F60;&#x7B2C;&#x4E00;&#x4E2A;&#x56DE;&#x6765;&#xFF0C;&#x53F8;&#x673A;&#x4E5F;&#x4E0D;&#x4F1A;&#x51FA;&#x53D1;&#xFF0C;&#x53F8;&#x673A;&#x8981;&#x7B49;&#x5F85;&#x6240;&#x6709;&#x4EBA;&#x90FD;&#x56DE;&#x6765;&#x540E;&#xFF0C;&#x624D;&#x80FD;&#x51FA;&#x53D1;&#x3002; <code>dispatch_barrier_async</code> &#x51FD;&#x6570;&#x8FFD;&#x52A0;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x5982;&#x540C; &#x201C;&#x4E0A;&#x5B8C;&#x5395;&#x6240;&#x5C31;&#x4E0A;&#x9AD8;&#x901F;&#x201D;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;&#x3002;</p>
<p>&#xFF08;&#x6CE8;&#x610F;&#xFF1A;&#x4F7F;&#x7528; <code>dispatch_barrier_async</code> &#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x53EA;&#x80FD;&#x642D;&#x914D;&#x81EA;&#x5B9A;&#x4E49;&#x5E76;&#x884C;&#x961F;&#x5217; <code>dispatch_queue_t</code> &#x4F7F;&#x7528;&#x3002;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#xFF1A; <code>dispatch_get_global_queue</code> &#xFF0C;&#x5426;&#x5219; <code>dispatch_barrier_async</code> &#x7684;&#x4F5C;&#x7528;&#x4F1A;&#x548C; <code>dispatch_async</code> &#x7684;&#x4F5C;&#x7528;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x3002; &#xFF09;</p>
<h3 id="43-&#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;dispatch_get_current_queue"><a href="#43-&#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;dispatch-get-current-queue&#xFF1F;" class="headerlink" title="43. &#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;dispatch_get_current_queue&#xFF1F;"></a>43. &#x82F9;&#x679C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E9F;&#x5F03;<code>dispatch_get_current_queue</code>&#xFF1F;</h3><p><code>dispatch_get_current_queue</code>&#x5BB9;&#x6613;&#x9020;&#x6210;&#x6B7B;&#x9501;</p>
<h3 id="44-&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;"><a href="#44-&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF1F;" class="headerlink" title="44. &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF1F;"></a>44. &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF1F;</h3><pre><code>- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@&quot;1&quot;);
    dispatch_sync(dispatch_get_main_queue(), ^{
        NSLog(@&quot;2&quot;);
    });
    NSLog(@&quot;3&quot;);
}
</code></pre><p>&#x53EA;&#x8F93;&#x51FA;&#xFF1A;1 &#x3002;&#x53D1;&#x751F;&#x4E3B;&#x7EBF;&#x7A0B;&#x9501;&#x6B7B;&#x3002;</p>
<h3 id="45-addobserverforkeypathoptionscontext&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;kvo&#x56DE;&#x8C03;"><a href="#45-addObserver-forKeyPath-options-context-&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;KVO&#x56DE;&#x8C03;&#xFF1F;" class="headerlink" title="45. addObserver:forKeyPath:options:context:&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;KVO&#x56DE;&#x8C03;&#xFF1F;"></a>45. addObserver:forKeyPath:options:context:&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5206;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#x624D;&#x80FD;&#x83B7;&#x5F97;KVO&#x56DE;&#x8C03;&#xFF1F;</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// &#x6DFB;&#x52A0;&#x952E;&#x503C;&#x89C2;&#x5BDF;</span></div><div class="line"><span class="comment">/*</span></div><div class="line">1 &#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x8D1F;&#x8D23;&#x5904;&#x7406;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x7684;&#x5BF9;&#x8C61;</div><div class="line">2 &#x89C2;&#x5BDF;&#x7684;&#x5C5E;&#x6027;</div><div class="line">3 &#x89C2;&#x5BDF;&#x7684;&#x9009;&#x9879;</div><div class="line">4 &#x4E0A;&#x4E0B;&#x6587;</div><div class="line">*/</div><div class="line">[<span class="keyword">self</span>.person addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@&quot;name&quot;</span> options:<span class="built_in">NSKeyValueObservingOptionNew</span> | <span class="built_in">NSKeyValueObservingOptionOld</span> context:<span class="string">@&quot;Person Name&quot;</span>];</div></pre></td></tr></table></figure>
<p>observer&#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E0B;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// &#x6240;&#x6709;&#x7684; kvo &#x76D1;&#x542C;&#x5230;&#x4E8B;&#x4EF6;&#xFF0C;&#x90FD;&#x4F1A;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;</span></div><div class="line"><span class="comment">/*</span></div><div class="line"> 1. &#x89C2;&#x5BDF;&#x7684;&#x5C5E;&#x6027;</div><div class="line"> 2. &#x89C2;&#x5BDF;&#x7684;&#x5BF9;&#x8C61;</div><div class="line"> 3. change &#x5C5E;&#x6027;&#x53D8;&#x5316;&#x5B57;&#x5178;&#xFF08;&#x65B0;&#xFF0F;&#x65E7;&#xFF09;</div><div class="line"> 4. &#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x4E0E;&#x76D1;&#x542C;&#x7684;&#x65F6;&#x5019;&#x4F20;&#x9012;&#x7684;&#x4E00;&#x81F4;</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath ofObject:(<span class="keyword">id</span>)object change:(<span class="built_in">NSDictionary</span> *)change context:(<span class="keyword">void</span> *)context;</div></pre></td></tr></table></figure>
<h3 id="46-&#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;kvo"><a href="#46-&#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;KVO" class="headerlink" title="46. &#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;KVO"></a>46. &#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;KVO</h3><p>&#x6240;&#x8C13;&#x7684;&#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x201D;&#x662F;&#x533A;&#x522B;&#x4E8E;&#x201C;&#x81EA;&#x52A8;&#x89E6;&#x53D1;&#x201D;&#xFF1A;</p>
<p>&#x81EA;&#x52A8;&#x89E6;&#x53D1;&#x662F;&#x6307;&#x7C7B;&#x4F3C;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#xFF1A;&#x5728;&#x6CE8;&#x518C; KVO &#x4E4B;&#x524D;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x6CE8;&#x518C;&#x4E4B;&#x540E;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x503C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x89E6;&#x53D1;&#x4E86;&#x3002;</p>
<p>&#x60F3;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#xFF0C;&#x5FC5;&#x987B;&#x77E5;&#x9053;&#x81EA;&#x52A8;&#x89E6;&#x53D1; KVO &#x7684;&#x539F;&#x7406;&#xFF1A;</p>
<p>&#x952E;&#x503C;&#x89C2;&#x5BDF;&#x901A;&#x77E5;&#x4F9D;&#x8D56;&#x4E8E; NSObject &#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;:  <code>willChangeValueForKey:</code> &#x548C; <code>didChangevlueForKey:</code> &#x3002;&#x5728;&#x4E00;&#x4E2A;&#x88AB;&#x89C2;&#x5BDF;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x4E4B;&#x524D;&#xFF0C;  <code>willChangeValueForKey:</code> &#x4E00;&#x5B9A;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x5C31;<br>&#x4F1A;&#x8BB0;&#x5F55;&#x65E7;&#x7684;&#x503C;&#x3002;&#x800C;&#x5F53;&#x6539;&#x53D8;&#x53D1;&#x751F;&#x540E;&#xFF0C;  <code>observeValueForKey:ofObject:change:context:</code> &#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x7EE7;&#x800C; <code>didChangeValueForKey:</code> &#x4E5F;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x8C03;&#x7528;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x201D;&#x4E86;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x201D;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x53EA;&#x5728;&#x5E0C;&#x671B;&#x80FD;&#x63A7;&#x5236;&#x201C;&#x56DE;&#x8C03;&#x7684;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x201D;&#x65F6;&#x624D;&#x4F1A;&#x8FD9;&#x4E48;&#x505A;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x505A;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x5982;&#x679C;&#x8FD9;&#x4E2A;  <code>value</code> &#x662F;  &#x8868;&#x793A;&#x65F6;&#x95F4;&#x7684; <code>self.now</code> &#xFF0C;&#x90A3;&#x4E48;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;&#x6700;&#x540E;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x7F3A;&#x4E00;&#x4E0D;&#x53EF;&#x3002;</p>
<p>&#x76F8;&#x5173;&#x4EE3;&#x7801;&#x5DF2;&#x653E;&#x5728;&#x4ED3;&#x5E93;&#x91CC;&#x3002;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  .m&#x6587;&#x4EF6;</span></div><div class="line"><span class="comment">//  Created by https://github.com/ChenYilong</span></div><div class="line"><span class="comment">//  &#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;(http://weibo.com/luohanchenyilong/).</span></div><div class="line"><span class="comment">//  &#x624B;&#x52A8;&#x89E6;&#x53D1; value &#x7684;KVO&#xFF0C;&#x6700;&#x540E;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x7F3A;&#x4E00;&#x4E0D;&#x53EF;&#x3002;</span></div><div class="line"></div><div class="line"><span class="comment">//@property (nonatomic, strong) NSDate *now;</span></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad {</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    _now = [<span class="built_in">NSDate</span> date];</div><div class="line">    [<span class="keyword">self</span> addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@&quot;now&quot;</span> options:<span class="built_in">NSKeyValueObservingOptionNew</span> context:<span class="literal">nil</span>];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</div><div class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;now&quot;</span>]; <span class="comment">// &#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;self.now&#x7684;KVO&#x201D;&#xFF0C;&#x5FC5;&#x5199;&#x3002;</span></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</div><div class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;now&quot;</span>]; <span class="comment">// &#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;self.now&#x7684;KVO&#x201D;&#xFF0C;&#x5FC5;&#x5199;&#x3002;</span></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;4&quot;</span>);</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x4F46;&#x662F;&#x5E73;&#x65F6;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x8FD9;&#x4E48;&#x5E72;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x662F;&#x7B49;&#x7CFB;&#x7EDF;&#x53BB;&#x201C;&#x81EA;&#x52A8;&#x89E6;&#x53D1;&#x201D;&#x3002;&#x201C;&#x81EA;&#x52A8;&#x89E6;&#x53D1;&#x201D;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF1A;</p>
<blockquote>
<p>&#x6BD4;&#x5982;&#x8C03;&#x7528; <code>setNow:</code> &#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x8FD8;&#x4F1A;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x5728;&#x4E2D;&#x95F4;&#x63D2;&#x5165; <code>wilChangeValueForKey:</code> &#x3001;  <code>didChangeValueForKey:</code> &#x548C; <code>observeValueForKeyPath:ofObject:change:context:</code> &#x7684;&#x8C03;&#x7528;&#x3002;</p>
</blockquote>
<p>&#x5927;&#x5BB6;&#x53EF;&#x80FD;&#x4EE5;&#x4E3A;&#x8FD9;&#x662F;&#x56E0;&#x4E3A; <code>setNow:</code> &#x662F;&#x5408;&#x6210;&#x65B9;&#x6CD5;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x4E5F;&#x80FD;&#x770B;&#x5230;&#x6709;&#x4EBA;&#x8FD9;&#x4E48;&#x5199;&#x4EE3;&#x7801;:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setNow:(<span class="built_in">NSDate</span> *)aDate {</div><div class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;now&quot;</span>]; <span class="comment">// &#x6CA1;&#x6709;&#x5FC5;&#x8981;</span></div><div class="line">    _now = aDate;</div><div class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;now&quot;</span>];<span class="comment">// &#x6CA1;&#x6709;&#x5FC5;&#x8981;</span></div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x8FD9;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#xFF0C;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;KVO&#x4EE3;&#x7801;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x4E24;&#x6B21;&#x3002;KVO&#x5728;&#x8C03;&#x7528;&#x5B58;&#x53D6;&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#x603B;&#x662F;&#x8C03;&#x7528; <code>willChangeValueForKey:</code>  &#xFF0C;&#x4E4B;&#x540E;&#x603B;&#x662F;&#x8C03;&#x7528; <code>didChangeValueForkey:</code> &#x3002;&#x600E;&#x4E48;&#x505A;&#x5230;&#x7684;&#x5462;?&#x7B54;&#x6848;&#x662F;&#x901A;&#x8FC7; isa &#x6DF7;&#x5199;&#xFF08;isa-swizzling&#xFF09;&#x3002;&#x4E0B;&#x6587;&#x300A;apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;KVO&#xFF1F;&#x300B;&#x4F1A;&#x6709;&#x8BE6;&#x8FF0;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A; <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW3" target="_blank" rel="external">Manual Change Notification&#x2014;Apple &#x5B98;&#x65B9;&#x6587;&#x6863;</a> </p>
<h3 id="47-&#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;-nsstring-_foo-&#x8C03;&#x7528;setvalueforkey&#x65F6;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F;-_foo-&#x4F5C;&#x4E3A;key"><a href="#47-&#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;-NSString-foo-&#xFF0C;&#x8C03;&#x7528;setValue-forKey-&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F;-foo-&#x4F5C;&#x4E3A;key&#xFF1F;" class="headerlink" title="47. &#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF; NSString *_foo &#xFF0C;&#x8C03;&#x7528;setValue:forKey:&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F; _foo &#x4F5C;&#x4E3A;key&#xFF1F;"></a>47. &#x82E5;&#x4E00;&#x4E2A;&#x7C7B;&#x6709;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF; <code>NSString *_foo</code> &#xFF0C;&#x8C03;&#x7528;setValue:forKey:&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4EE5;foo&#x8FD8;&#x662F; <code>_foo</code> &#x4F5C;&#x4E3A;key&#xFF1F;</h3><p>&#x90FD;&#x53EF;&#x4EE5;&#x3002;</p>
<h3 id="48-kvc&#x7684;keypath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;"><a href="#48-KVC&#x7684;keyPath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;" class="headerlink" title="48. KVC&#x7684;keyPath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;"></a>48. KVC&#x7684;keyPath&#x4E2D;&#x7684;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;</h3><ol>
<li>&#x5FC5;&#x987B;&#x7528;&#x5728;&#x96C6;&#x5408;&#x5BF9;&#x8C61;&#x4E0A;&#x6216;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#x7684;&#x96C6;&#x5408;&#x5C5E;&#x6027;&#x4E0A;</li>
<li>&#x7B80;&#x5355;&#x96C6;&#x5408;&#x8FD0;&#x7B97;&#x7B26;&#x6709;@avg&#xFF0C; @count &#xFF0C; @max &#xFF0C; @min &#xFF0C;@sum&#xFF0C;</li>
<li>&#x683C;&#x5F0F; @&#x201D;@sum.age&#x201D;&#x6216; @&#x201D;&#x96C6;&#x5408;&#x5C5E;&#x6027;.@max.age&#x201D;</li>
</ol>
<h3 id="49-kvc&#x548C;kvo&#x7684;keypath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;"><a href="#49-KVC&#x548C;KVO&#x7684;keyPath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;&#xFF1F;" class="headerlink" title="49. KVC&#x548C;KVO&#x7684;keyPath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;&#xFF1F;"></a>49. KVC&#x548C;KVO&#x7684;keyPath&#x4E00;&#x5B9A;&#x662F;&#x5C5E;&#x6027;&#x4E48;&#xFF1F;</h3><p>KVO&#x652F;&#x6301;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;</p>
<h3 id="50-&#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;kvo&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;kvo&#x5B9E;&#x73B0;"><a href="#50-&#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;KVO&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;KVO&#x5B9E;&#x73B0;&#xFF1F;" class="headerlink" title="50. &#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;KVO&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;KVO&#x5B9E;&#x73B0;&#xFF1F;"></a>50. &#x5982;&#x4F55;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x7684;KVO&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;KVO&#x5B9E;&#x73B0;&#xFF1F;</h3><p>&#x8BF7;&#x53C2;&#x8003;&#xFF1A;</p>
<ol>
<li><a href="http://tech.glowing.com/cn/implement-kvo/" target="_blank" rel="external">&#x300A;&#x5982;&#x4F55;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x5B9E;&#x73B0; KVO&#x300B;</a></li>
<li><a href="http://stackoverflow.com/a/10042641/3395008" target="_blank" rel="external"><strong>KVO for manually implemented properties</strong></a> </li>
</ol>
<h3 id="51-apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;kvo"><a href="#51-apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;KVO&#xFF1F;" class="headerlink" title="51. apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;KVO&#xFF1F;"></a>51. apple&#x7528;&#x4EC0;&#x4E48;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;KVO&#xFF1F;</h3><p><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOImplementation.html" target="_blank" rel="external">Apple &#x7684;&#x6587;&#x6863;</a>&#x5BF9; KVO &#x5B9E;&#x73B0;&#x7684;&#x63CF;&#x8FF0;&#xFF1A;</p>
<blockquote>
<p>Automatic key-value observing is implemented using a technique called isa-swizzling&#x2026; When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class &#x2026;</p>
</blockquote>
<p>&#x4ECE;<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOImplementation.html" target="_blank" rel="external">Apple &#x7684;&#x6587;&#x6863;</a>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF1A;Apple &#x5E76;&#x4E0D;&#x5E0C;&#x671B;&#x8FC7;&#x591A;&#x66B4;&#x9732; KVO &#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x8981;&#x662F;&#x501F;&#x52A9; runtime &#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x53BB;&#x6DF1;&#x5165;&#x6316;&#x6398;&#xFF0C;&#x6240;&#x6709;&#x88AB;&#x63A9;&#x76D6;&#x7684;&#x7EC6;&#x8282;&#x90FD;&#x4F1A;&#x539F;&#x5F62;&#x6BD5;&#x9732;&#xFF1A;</p>
<blockquote>
<p>&#x5F53;&#x4F60;&#x89C2;&#x5BDF;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7C7B;&#x4F1A;&#x88AB;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x7EE7;&#x627F;&#x81EA;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x539F;&#x672C;&#x7684;&#x7C7B;&#xFF0C;&#x5E76;&#x91CD;&#x5199;&#x4E86;&#x88AB;&#x89C2;&#x5BDF;&#x5C5E;&#x6027;&#x7684; setter &#x65B9;&#x6CD5;&#x3002;&#x91CD;&#x5199;&#x7684; setter &#x65B9;&#x6CD5;&#x4F1A;&#x8D1F;&#x8D23;&#x5728;&#x8C03;&#x7528;&#x539F; setter &#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#x548C;&#x4E4B;&#x540E;&#xFF0C;&#x901A;&#x77E5;&#x6240;&#x6709;&#x89C2;&#x5BDF;&#x5BF9;&#x8C61;&#xFF1A;&#x503C;&#x7684;&#x66F4;&#x6539;&#x3002;&#x6700;&#x540E;&#x901A;&#x8FC7; <code>isa &#x6DF7;&#x5199;&#xFF08;isa-swizzling&#xFF09;</code> &#x628A;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684; isa &#x6307;&#x9488; ( isa &#x6307;&#x9488;&#x544A;&#x8BC9; Runtime &#x7CFB;&#x7EDF;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x662F;&#x4EC0;&#x4E48; ) &#x6307;&#x5411;&#x8FD9;&#x4E2A;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5BF9;&#x8C61;&#x5C31;&#x795E;&#x5947;&#x7684;&#x53D8;&#x6210;&#x4E86;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5B50;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x6211;&#x753B;&#x4E86;&#x4E00;&#x5F20;&#x793A;&#x610F;&#x56FE;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
</blockquote>
<p><img src="http://i62.tinypic.com/sy57ur.jpg" alt="enter image description here"></p>
<p> KVO &#x786E;&#x5B9E;&#x6709;&#x70B9;&#x9ED1;&#x9B54;&#x6CD5;&#xFF1A;</p>
<blockquote>
<p>Apple &#x4F7F;&#x7528;&#x4E86; <code>isa &#x6DF7;&#x5199;&#xFF08;isa-swizzling&#xFF09;</code>&#x6765;&#x5B9E;&#x73B0; KVO &#x3002;</p>
</blockquote>
<p>&#x4E0B;&#x9762;&#x505A;&#x4E0B;&#x8BE6;&#x7EC6;&#x89E3;&#x91CA;&#xFF1A;</p>
<p>&#x952E;&#x503C;&#x89C2;&#x5BDF;&#x901A;&#x77E5;&#x4F9D;&#x8D56;&#x4E8E; NSObject &#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;:  <code>willChangeValueForKey:</code> &#x548C; <code>didChangevlueForKey:</code> &#x3002;&#x5728;&#x4E00;&#x4E2A;&#x88AB;&#x89C2;&#x5BDF;&#x5C5E;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x4E4B;&#x524D;&#xFF0C;  <code>willChangeValueForKey:</code> &#x4E00;&#x5B9A;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x5C31;&#x4F1A;&#x8BB0;&#x5F55;&#x65E7;&#x7684;&#x503C;&#x3002;&#x800C;&#x5F53;&#x6539;&#x53D8;&#x53D1;&#x751F;&#x540E;&#xFF0C; <code>observeValueForKey:ofObject:change:context:</code> &#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x7EE7;&#x800C;  <code>didChangeValueForKey:</code> &#x4E5F;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x8C03;&#x7528;&#xFF0C;&#x4F46;&#x5F88;&#x5C11;&#x6709;&#x4EBA;&#x8FD9;&#x4E48;&#x505A;&#x3002;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x53EA;&#x5728;&#x5E0C;&#x671B;&#x80FD;&#x63A7;&#x5236;&#x56DE;&#x8C03;&#x7684;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x65F6;&#x624D;&#x4F1A;&#x8FD9;&#x4E48;&#x505A;&#x3002;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6539;&#x53D8;&#x901A;&#x77E5;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x3002;</p>
<p> &#x6BD4;&#x5982;&#x8C03;&#x7528; <code>setNow:</code> &#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x8FD8;&#x4F1A;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x5728;&#x4E2D;&#x95F4;&#x63D2;&#x5165; <code>wilChangeValueForKey:</code> &#x3001;  <code>didChangeValueForKey:</code>  &#x548C; <code>observeValueForKeyPath:ofObject:change:context:</code> &#x7684;&#x8C03;&#x7528;&#x3002;&#x5927;&#x5BB6;&#x53EF;&#x80FD;&#x4EE5;&#x4E3A;&#x8FD9;&#x662F;&#x56E0;&#x4E3A; <code>setNow:</code> &#x662F;&#x5408;&#x6210;&#x65B9;&#x6CD5;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x4E5F;&#x80FD;&#x770B;&#x5230;&#x6709;&#x4EBA;&#x8FD9;&#x4E48;&#x5199;&#x4EE3;&#x7801;:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setNow:(<span class="built_in">NSDate</span> *)aDate {</div><div class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;now&quot;</span>]; <span class="comment">// &#x6CA1;&#x6709;&#x5FC5;&#x8981;</span></div><div class="line">    _now = aDate;</div><div class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;now&quot;</span>];<span class="comment">// &#x6CA1;&#x6709;&#x5FC5;&#x8981;</span></div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x8FD9;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#xFF0C;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;KVO&#x4EE3;&#x7801;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x4E24;&#x6B21;&#x3002;KVO&#x5728;&#x8C03;&#x7528;&#x5B58;&#x53D6;&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#x603B;&#x662F;&#x8C03;&#x7528; <code>willChangeValueForKey:</code>  &#xFF0C;&#x4E4B;&#x540E;&#x603B;&#x662F;&#x8C03;&#x7528; <code>didChangeValueForkey:</code> &#x3002;&#x600E;&#x4E48;&#x505A;&#x5230;&#x7684;&#x5462;?&#x7B54;&#x6848;&#x662F;&#x901A;&#x8FC7; isa &#x6DF7;&#x5199;&#xFF08;isa-swizzling&#xFF09;&#x3002;&#x7B2C;&#x4E00;&#x6B21;&#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x8C03;&#x7528; <code>addObserver:forKeyPath:options:context:</code> &#x65F6;&#xFF0C;&#x6846;&#x67B6;&#x4F1A;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x65B0;&#x7684; KVO &#x5B50;&#x7C7B;&#xFF0C;&#x5E76;&#x5C06;&#x88AB;&#x89C2;&#x5BDF;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;&#x65B0;&#x5B50;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5728;&#x8FD9;&#x4E2A; KVO &#x7279;&#x6B8A;&#x5B50;&#x7C7B;&#x4E2D;&#xFF0C; Cocoa &#x521B;&#x5EFA;&#x89C2;&#x5BDF;&#x5C5E;&#x6027;&#x7684; setter &#xFF0C;&#x5927;&#x81F4;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x5982;&#x4E0B;:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setNow:(<span class="built_in">NSDate</span> *)aDate {</div><div class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;now&quot;</span>];</div><div class="line">    [<span class="keyword">super</span> setValue:aDate forKey:<span class="string">@&quot;now&quot;</span>];</div><div class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;now&quot;</span>];</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x8FD9;&#x79CD;&#x7EE7;&#x627F;&#x548C;&#x65B9;&#x6CD5;&#x6CE8;&#x5165;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x800C;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x65F6;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6B63;&#x786E;&#x547D;&#x540D;&#x5982;&#x6B64;&#x91CD;&#x8981;&#x7684;&#x539F;&#x56E0;&#x3002;&#x53EA;&#x6709;&#x5728;&#x4F7F;&#x7528;KVC&#x547D;&#x540D;&#x7EA6;&#x5B9A;&#x65F6;&#xFF0C;KVO&#x624D;&#x80FD;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#x3002;</p>
<p>KVO &#x5728;&#x5B9E;&#x73B0;&#x4E2D;&#x901A;&#x8FC7; <code>isa &#x6DF7;&#x5199;&#xFF08;isa-swizzling&#xFF09;</code> &#x628A;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684; isa &#x6307;&#x9488; ( isa &#x6307;&#x9488;&#x544A;&#x8BC9; Runtime &#x7CFB;&#x7EDF;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x662F;&#x4EC0;&#x4E48; ) &#x6307;&#x5411;&#x8FD9;&#x4E2A;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5BF9;&#x8C61;&#x5C31;&#x795E;&#x5947;&#x7684;&#x53D8;&#x6210;&#x4E86;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5B50;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x8FD9;&#x5728;<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOImplementation.html" target="_blank" rel="external">Apple &#x7684;&#x6587;&#x6863;</a>&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x5370;&#x8BC1;&#xFF1A;</p>
<blockquote>
<p>Automatic key-value observing is implemented using a technique called isa-swizzling&#x2026; When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class &#x2026;</p>
</blockquote>
<p>&#x7136;&#x800C; KVO &#x5728;&#x5B9E;&#x73B0;&#x4E2D;&#x4F7F;&#x7528;&#x4E86; <code>isa &#x6DF7;&#x5199;&#xFF08; isa-swizzling&#xFF09;</code> &#xFF0C;&#x8FD9;&#x4E2A;&#x7684;&#x786E;&#x4E0D;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x53D1;&#x73B0;&#xFF1A;Apple &#x8FD8;&#x91CD;&#x5199;&#x3001;&#x8986;&#x76D6;&#x4E86; <code>-class</code> &#x65B9;&#x6CD5;&#x5E76;&#x8FD4;&#x56DE;&#x539F;&#x6765;&#x7684;&#x7C7B;&#x3002; &#x4F01;&#x56FE;&#x6B3A;&#x9A97;&#x6211;&#x4EEC;&#xFF1A;&#x8FD9;&#x4E2A;&#x7C7B;&#x6CA1;&#x6709;&#x53D8;&#xFF0C;&#x5C31;&#x662F;&#x539F;&#x672C;&#x90A3;&#x4E2A;&#x7C7B;&#x3002;&#x3002;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x5047;&#x8BBE;&#x201C;&#x88AB;&#x76D1;&#x542C;&#x7684;&#x5BF9;&#x8C61;&#x201D;&#x7684;&#x7C7B;&#x5BF9;&#x8C61;&#x662F; <code>MYClass</code> &#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x80FD;&#x770B;&#x5230;&#x5BF9; <code>NSKVONotifying_MYClass</code> &#x7684;&#x5F15;&#x7528;&#x800C;&#x4E0D;&#x662F;&#x5BF9;  <code>MYClass</code>  &#x7684;&#x5F15;&#x7528;&#x3002;&#x501F;&#x6B64;&#x6211;&#x4EEC;&#x5F97;&#x4EE5;&#x77E5;&#x9053; Apple &#x4F7F;&#x7528;&#x4E86; <code>isa &#x6DF7;&#x5199;&#xFF08;isa-swizzling&#xFF09;</code>&#x3002;&#x5177;&#x4F53;&#x63A2;&#x7A76;&#x8FC7;&#x7A0B;&#x53EF;&#x53C2;&#x8003;<a href="https://www.mikeash.com/pyblog/friday-qa-2009-01-23.html" target="_blank" rel="external"> &#x8FD9;&#x7BC7;&#x535A;&#x6587; </a>&#x3002;</p>
<p>&#x90A3;&#x4E48; <code>wilChangeValueForKey:</code> &#x3001;  <code>didChangeValueForKey:</code>  &#x548C; <code>observeValueForKeyPath:ofObject:change:context:</code> &#x8FD9;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x662F;&#x600E;&#x6837;&#x7684;&#x5462;&#xFF1F;</p>
<p> <code>wilChangeValueForKey:</code> &#x3001;  <code>didChangeValueForKey:</code> &#x5F88;&#x597D;&#x7406;&#x89E3;&#xFF0C;<code>observeValueForKeyPath:ofObject:change:context:</code> &#x7684;&#x6267;&#x884C;&#x65F6;&#x673A;&#x662F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5462;&#xFF1F;</p>
<p> &#x5148;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<p>&#x4EE3;&#x7801;&#x5DF2;&#x653E;&#x5728;&#x4ED3;&#x5E93;&#x91CC;&#x3002;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad {</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    [<span class="keyword">self</span> addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@&quot;now&quot;</span> options:<span class="built_in">NSKeyValueObservingOptionNew</span> context:<span class="literal">nil</span>];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</div><div class="line">    [<span class="keyword">self</span> willChangeValueForKey:<span class="string">@&quot;now&quot;</span>]; <span class="comment">// &#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;self.now&#x7684;KVO&#x201D;&#xFF0C;&#x5FC5;&#x5199;&#x3002;</span></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</div><div class="line">    [<span class="keyword">self</span> didChangeValueForKey:<span class="string">@&quot;now&quot;</span>]; <span class="comment">// &#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;self.now&#x7684;KVO&#x201D;&#xFF0C;&#x5FC5;&#x5199;&#x3002;</span></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;4&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath ofObject:(<span class="keyword">id</span>)object change:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *,<span class="keyword">id</span>&gt; *)change context:(<span class="keyword">void</span> *)context {</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;3&quot;</span>);</div><div class="line">}</div></pre></td></tr></table></figure>
<p><img src="http://i66.tinypic.com/ncm7th.jpg" alt="enter image description here"></p>
<p>&#x5982;&#x679C;&#x5355;&#x5355;&#x4ECE;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x7684;&#x6253;&#x5370;&#x4E0A;&#xFF0C; </p>
<p>&#x987A;&#x5E8F;&#x4F3C;&#x4E4E;&#x662F; <code>wilChangeValueForKey:</code> &#x3001; <code>observeValueForKeyPath:ofObject:change:context:</code> &#x3001; <code>didChangeValueForKey:</code> &#x3002;</p>
<p>&#x5176;&#x5B9E;&#x4E0D;&#x7136;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A; <code>observeValueForKeyPath:ofObject:change:context:</code>  , &#x548C; <code>didChangeValueForKey:</code> &#x5230;&#x5E95;&#x8C01;&#x5148;&#x8C03;&#x7528;&#x7684;&#x95EE;&#x9898;&#xFF1A;&#x5982;&#x679C; <code>observeValueForKeyPath:ofObject:change:context:</code> &#x662F;&#x5728; <code>didChangeValueForKey:</code> &#x5185;&#x90E8;&#x89E6;&#x53D1;&#x7684;&#x64CD;&#x4F5C;&#x5462;&#xFF1F; &#x90A3;&#x4E48;&#x987A;&#x5E8F;&#x5C31;&#x662F;&#xFF1A; <code>wilChangeValueForKey:</code> &#x3001;  <code>didChangeValueForKey:</code>  &#x548C; <code>observeValueForKeyPath:ofObject:change:context:</code> </p>
<p>&#x4E0D;&#x4FE1;&#x4F60;&#x628A; <code>didChangeValueForKey:</code> &#x6CE8;&#x89C6;&#x6389;&#xFF0C;&#x770B;&#x4E0B; <code>observeValueForKeyPath:ofObject:change:context:</code> &#x4F1A;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x3002;</p>
<p>&#x4E86;&#x89E3;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x6B63;&#x5982;  <a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;/&#x300A;&#x62DB;&#x8058;&#x4E00;&#x4E2A;&#x9760;&#x8C31;&#x7684;iOS&#x300B;&#x9762;&#x8BD5;&#x9898;&#x53C2;&#x8003;&#x7B54;&#x6848;&#xFF08;&#x4E0B;&#xFF09;.md#46-&#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;kvo" target="_blank" rel="external">46. &#x5982;&#x4F55;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;value&#x7684;KVO</a>  &#x6240;&#x8BF4;&#x7684;&#xFF1A;</p>
<p>&#x201C;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x201D;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x53EA;&#x5728;&#x5E0C;&#x671B;&#x80FD;&#x63A7;&#x5236;&#x201C;&#x56DE;&#x8C03;&#x7684;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x201D;&#x65F6;&#x624D;&#x4F1A;&#x8FD9;&#x4E48;&#x505A;&#x3002;</p>
<p>&#x800C;&#x201C;&#x56DE;&#x8C03;&#x7684;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x201D;&#x5C31;&#x662F;&#x5728;&#x4F60;&#x8C03;&#x7528; <code>didChangeValueForKey:</code> &#x65B9;&#x6CD5;&#x65F6;&#x3002;</p>
<h3 id="52-iboutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak"><a href="#52-IBOutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak" class="headerlink" title="52. IBOutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak?"></a>52. IBOutlet&#x8FDE;&#x51FA;&#x6765;&#x7684;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;weak?</h3><p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href="http://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc" target="_blank" rel="external"> <strong><em>Should IBOutlets be strong or weak under ARC?</em></strong> </a></p>
<p>&#x6587;&#x7AE0;&#x544A;&#x8BC9;&#x6211;&#x4EEC;&#xFF1A;</p>
<blockquote>
<p>&#x56E0;&#x4E3A;&#x65E2;&#x7136;&#x6709;&#x5916;&#x94FE;&#x90A3;&#x4E48;&#x89C6;&#x56FE;&#x5728;xib&#x6216;&#x8005;storyboard&#x4E2D;&#x80AF;&#x5B9A;&#x5B58;&#x5728;&#xFF0C;&#x89C6;&#x56FE;&#x5DF2;&#x7ECF;&#x5BF9;&#x5B83;&#x6709;&#x4E00;&#x4E2A;&#x5F3A;&#x5F15;&#x7528;&#x4E86;&#x3002;</p>
</blockquote>
<p>&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x56DE;&#x7B54;&#x6F0F;&#x4E86;&#x4E2A;&#x91CD;&#x8981;&#x77E5;&#x8BC6;&#xFF0C;&#x4F7F;&#x7528;storyboard&#xFF08;xib&#x4E0D;&#x884C;&#xFF09;&#x521B;&#x5EFA;&#x7684;vc&#xFF0C;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x53EB;_topLevelObjectsToKeepAliveFromStoryboard&#x7684;&#x79C1;&#x6709;&#x6570;&#x7EC4;&#x5F3A;&#x5F15;&#x7528;&#x6240;&#x6709;top level&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x65F6;&#x5373;&#x4FBF;outlet&#x58F0;&#x660E;&#x6210;weak&#x4E5F;&#x6CA1;&#x5173;&#x7CFB;</p>
<h3 id="53-ib&#x4E2D;user-defined-runtime-attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;"><a href="#53-IB&#x4E2D;User-Defined-Runtime-Attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;" class="headerlink" title="53. IB&#x4E2D;User Defined Runtime Attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;"></a>53. IB&#x4E2D;User Defined Runtime Attributes&#x5982;&#x4F55;&#x4F7F;&#x7528;&#xFF1F;</h3><p>&#x5B83;&#x80FD;&#x591F;&#x901A;&#x8FC7;KVC&#x7684;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x4E00;&#x4E9B;&#x4F60;&#x5728;interface builder &#x4E2D;&#x4E0D;&#x80FD;&#x914D;&#x7F6E;&#x7684;&#x5C5E;&#x6027;&#x3002;&#x5F53;&#x4F60;&#x5E0C;&#x671B;&#x5728;IB&#x4E2D;&#x4F5C;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x5F97;&#x4E8B;&#x60C5;&#xFF0C;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x4F60;&#x7F16;&#x5199;&#x66F4;&#x52A0;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;viewcontroller</p>
<h3 id="54-&#x5982;&#x4F55;&#x8C03;&#x8BD5;bad_access&#x9519;&#x8BEF;"><a href="#54-&#x5982;&#x4F55;&#x8C03;&#x8BD5;BAD-ACCESS&#x9519;&#x8BEF;" class="headerlink" title="54. &#x5982;&#x4F55;&#x8C03;&#x8BD5;BAD_ACCESS&#x9519;&#x8BEF;"></a>54. &#x5982;&#x4F55;&#x8C03;&#x8BD5;BAD_ACCESS&#x9519;&#x8BEF;</h3><ol>
<li>&#x91CD;&#x5199;object&#x7684;respondsToSelector&#x65B9;&#x6CD5;&#xFF0C;&#x73B0;&#x5B9E;&#x51FA;&#x73B0;EXEC_BAD_ACCESS&#x524D;&#x8BBF;&#x95EE;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;object</li>
<li><p>&#x901A;&#x8FC7; Zombie<br><img src="http://i.stack.imgur.com/ZAdi0.png" alt="enter image description here"></p>
</li>
<li><p>&#x8BBE;&#x7F6E;&#x5168;&#x5C40;&#x65AD;&#x70B9;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#x4EE3;&#x7801;&#x6240;&#x5728;&#x884C;</p>
</li>
<li>Xcode 7 &#x5DF2;&#x7ECF;&#x96C6;&#x6210;&#x4E86;BAD_ACCESS&#x6355;&#x83B7;&#x529F;&#x80FD;&#xFF1A;<strong>Address Sanitizer</strong>&#x3002;<br>&#x7528;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;&#x5728;&#x914D;&#x7F6E;&#x4E2D;&#x52FE;&#x9009;&#x2705;Enable Address Sanitizer<br> <img src="https://developer.apple.com/library/prerelease/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Art/xc7-asan_2x.png" alt="enter image description here"></li>
</ol>
<h3 id="55-lldbgdb&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;"><a href="#55-lldb&#xFF08;gdb&#xFF09;&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#xFF1F;" class="headerlink" title="55. lldb&#xFF08;gdb&#xFF09;&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#xFF1F;"></a>55. lldb&#xFF08;gdb&#xFF09;&#x5E38;&#x7528;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#xFF1F;</h3><ul>
<li>breakpoint &#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#x5B9A;&#x4F4D;&#x5230;&#x67D0;&#x4E00;&#x4E2A;&#x51FD;&#x6570;</li>
<li>n &#x65AD;&#x70B9;&#x6307;&#x9488;&#x4E0B;&#x4E00;&#x6B65;</li>
<li>po&#x6253;&#x5370;&#x5BF9;&#x8C61;</li>
</ul>
<p>&#x66F4;&#x591A; lldb&#xFF08;gdb&#xFF09; &#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#x53EF;&#x67E5;&#x770B;</p>
<ol>
<li><a href="http://lldb.llvm.org/lldb-gdb.html" target="_blank" rel="external"> <strong><em>The LLDB Debugger</em></strong> </a>&#xFF1B;</li>
<li>&#x82F9;&#x679C;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="https://developer.apple.com/library/ios/technotes/tn2239/_index.html" target="_blank" rel="external"> <strong><em>iOS Debugging Magic</em></strong> </a>&#x3002;</li>
</ol>
<hr>
<p>Posted by <a href="http://weibo.com/luohanchenyilong/" target="_blank" rel="external">&#x5FAE;&#x535A;@iOS&#x7A0B;&#x5E8F;&#x72AD;&#x8881;</a><br>&#x539F;&#x521B;&#x6587;&#x7AE0;&#xFF0C;&#x7248;&#x6743;&#x58F0;&#x660E;&#xFF1A;&#x81EA;&#x7531;&#x8F6C;&#x8F7D;-&#x975E;&#x5546;&#x7528;-&#x975E;&#x884D;&#x751F;-&#x4FDD;&#x6301;&#x7F72;&#x540D; | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">Creative Commons BY-NC-ND 3.0</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS开发面试-招聘/">iOS开发面试/招聘</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS面试-招聘/">iOS面试/招聘</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Foundation框架/" title="Foundation框架">Foundation框架<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/能工巧匠集/iOS开发/" title="iOS开发">iOS开发<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS开发面试-招聘/" title="iOS开发面试/招聘">iOS开发面试/招聘<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/读书笔记/《iOS7-Programing-Cookbook》/" title="《iOS7 Programing Cookbook》">《iOS7 Programing Cookbook》<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/面试-招聘/《招聘一个靠谱的iOS》/" title="《招聘一个靠谱的iOS》">《招聘一个靠谱的iOS》<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/能工巧匠集/工欲善其事必先利其器/" title="工欲善其事必先利其器">工欲善其事必先利其器<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/并发编程/" title="并发编程">并发编程<sup>2</sup></a></li>
		  
		
		  
		
		  
			<li><a href="/categories/能工巧匠集/" title="能工巧匠集">能工巧匠集<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/读书笔记/" title="读书笔记">读书笔记<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/面试-招聘/" title="面试/招聘">面试/招聘<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >

	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2019 
		
		<a href="/about" target="_blank" title="晓明童鞋">晓明童鞋</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
